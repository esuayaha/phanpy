{"version":3,"mappings":"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","names":["j","Q","K","e","D","H","r","P","o","i","u","n","c","f","y","d","I","_","L","R","U","V","X","Y","Z","F","ee","te","re","p","t","a","l","g","k","m","$","T","oe","M","x","W","se","ie","S","N","ue","z","J","fe","w","s","B","v","h","C","G","O","q","E","root","factory","module","this","global","Toastify","options","version","divElement","property","avatarElement","closeElement","event","width","self","getAxisOffsetAValue","xOffset","yOffset","rootElement","elementToInsert","toastElement","topLeftOffsetSize","topRightOffsetSize","offsetSize","allToasts","classUsed","containsClass","height","offset","axis","elem","yourClass","window","_showToast","showToast","props","text","onClick","delay","rest","toast","className","destination","gravity","position","setTimeout","useInterval","fn","deps","immediate","savedCallback","useRef","useEffect","current","id","setInterval","tick","clearInterval","isMenuOpen","state","batchedUpdates","unstable_batchedUpdates","getTransition","transition","name","safeCall","arg","internalKey","getName","component","mergeProps","target","source","key","targetProp","sourceProp","parsePadding","paddingStr","padding","top","right","getScrollAncestor","node","overflow","overflowX","overflowY","commonProps","isDisabled","isHovering","indexOfNode","nodeList","useBEM","block","element","modifiers","useMemo","blockElement","classString","value","expandedClassName","menuContainerClass","menuClass","menuArrowClass","menuItemClass","menuDividerClass","menuHeaderClass","menuGroupClass","subMenuClass","HoverItemContext","createContext","MenuListItemContext","MenuListContext","EventHandlersContext","RadioGroupContext","SettingsContext","Keys","HoverActionTypes","CloseReason","FocusPositions","MenuStateMap","positionAbsolute","roleNone","roleMenuitem","noScrollFocus","MenuContainer","containerRef","containerProps","children","isOpen","theming","onClose","itemTransition","jsx","createSubmenuCtx","timer","count","closeDelay","pending","settled","useItems","menuRef","hoverItem","setHoverItem","useState","mutableState","updateItems","useCallback","item","isMounted","items","index","dispatch","actionType","nextIndex","hoverIndex","sortItems","orderedNodes","newItem","prevItem","getNativeDimension","transformed","untransformed","getNormalizedClientRect","rect","getPositionHelpers","containerElt","menuElt","menuScroll","boundingBoxPadding","menuRect","containerRect","boundingRect","getLeftOverflow","getRightOverflow","getTopOverflow","getBottomOverflow","leftOverflow","rightOverflow","topOverflow","bottomOverflow","placeArrowVertical","arrowRef","menuY","anchorRect","placeLeftorRight","placeLeftorRightY","placeLeftX","placeRightX","confineHorizontally","confineVertically","arrow","direction","computedDirection","placeArrowHorizontal","menuX","placeToporBottom","placeToporBottomX","placeTopY","placeBottomY","positionMenu","align","gap","shift","positionHelpers","isHorizontal","horizontalOffset","verticalOffset","arrowElt","useIsomorphicLayoutEffect","useLayoutEffect","setRef","ref","instance","useCombinedRef","refA","refB","offScreen","MenuList","ariaLabel","menuClassName","menuStyle","arrowProps","anchorPoint","anchorRef","externalRef","parentScrollingRef","setDownOverflow","repositionFlag","captureFocus","endTransition","menuItemFocus","_1","restProps","menuPosition","setMenuPosition","arrowPosition","setArrowPosition","overflowData","setOverflowData","expandedDirection","setExpandedDirection","submenuCtx","reposSubmenu","forceReposSubmenu","useReducer","boundingBoxRef","rootMenuRef","rootAnchorRef","scrollNodesRef","reposition","viewScroll","submenuCloseDelay","useContext","parentSubmenuCtx","reposFlag","prevOpen","openTransition","closeTransition","scrollNodes","onKeyDown","onAnimationEnd","onPointerMove","onPointerLeave","handlePosition","noOverflowCheck","arrowX","arrowY","menuHeight","overflowAmt","anchorScroll","scroll","handleScroll","scrollObservers","hasOverflow","parentScroll","targetList","resizeObserver","entries","flushSync","resizeObserverOptions","anchor","alwaysUpdate","setItemFocus","itemContext","maxHeight","listContext","overflowStyle","arrowModifiers","_arrowClassName","menu","ControlledMenu","forwardRef","initialMounted","unmountOnClose","transitionTimeout","submenuOpenDelay","portal","onItemClick","settings","eventHandlers","isCheckorRadio","keepOpen","menuList","createPortal","PRE_ENTER","ENTERING","ENTERED","PRE_EXIT","EXITING","EXITED","UNMOUNTED","STATUS","getState","status","startOrEnd","unmounted","getEndStatus","unmountOnExit","getTimeout","timeout","nextTick","transitState","updateState","setState","latestState","timeoutId","onChange","useTransitionState","enter","exit","preEnter","preExit","initialEntered","mountOnEnter","enterTimeout","exitTimeout","toggle","toEnter","enterStage","useMenuState","initialOpen","onMenuChange","toggleMenu","isEnter","isResolved","useMenuStateAndFocus","menuProps","setMenuItemFocus","openMenu","useClick","onToggle","skipOpen","isLegacyReact","Menu","menuButton","instanceRef","stateProps","buttonRef","anchorProps","handleClose","button","buttonProps","renderButton","cloneElement","useImperativeHandle","jsxs","Fragment","withHovering","WrappedComponent","Component","memo","WithHovering","itemRef","useMouseOver","mouseOver","setMouseOver","useItemEffect","SubMenu","disabled","label","openTrigger","_2","itemProps","parentMenuRef","parentDir","parentOverflow","isParentOpen","isPortal","_openMenu","mouseOverStart","mouseOverEnd","timerId","stopTimer","args","setHover","delayOpen","onKeyDownOfRoot","handled","externalItemRef","itemClassName","restItemProps","mergedItemProps","getMenuList","container","useItemState","focusRef","unsetHover","onBlur","keepHover","MenuItem","href","type","checked","restStateProps","radioGroup","isRadio","isCheckBox","isAnchor","isChecked","handleClick","handleKeyDown","mergedProps","menuItemProps","FocusableItem","renderChildren","MenuDivider","MenuHeader","MenuGroup","style","takeOverflow","setOverflowStyle","b","A","DTFLOCALE_CACHE_KEY","_getDtfLocale","cachedDtf","store","session","get","dtfLocale","Intl","DateTimeFormat","resolvedOptions","locale","set","getDtfLocale","mem","initLocales","newLocales","navigator","languages","includes","unshift","locales","createLocale","language","Locale","langPart","parts","split","regionPart","pop","fallbackLocale","region","toString","lang","middle","length","join","reg","_DateTimeFormat","opts","appLocale","userRegion","loc","userRegionLocale","matchedLocale","localeMatch","replace","undefined","niceDateTime","date","dtfOpts","Date","hideTime","formatOpts","forceOpts","currentYear","getFullYear","year","month","day","hour","minute","i18n","format","openCompose","url","URL","parse","location","screenWidth","screenHeight","screen","left","Math","max","min","winUID","uid","random","newWin","open","__COMPOSE__","alert","_i18n","isSafari","test","userAgent","openOSK","fauxEl","document","createElement","opacity","body","appendChild","focus","removeChild","documentElement","getComputedStyle","defaultBoundingBoxPadding","safeAreaInsets","getSafeAreaInsets","safeAreaInsetTop","getPropertyValue","safeAreaInsetRight","safeAreaInsetBottom","safeAreaInsetLeft","parseInt","requestAnimationFrame","safeBoundingBoxPadding","paddings","map","CSS","supports","addEventListener","passive","TOAST_DURATION","showCompose","states","composerState","minimized","duration","template","PARAGRAPH_END_RE","LIST_ITEM_END_RE","MULTIPLE_LINE_BREAKS_RE","getHTMLText","html","preProcess","truncateLinks","innerHTML","content","brElements","querySelectorAll","replaceWith","invisibleElements","remove","ellipsisElements","append","textContent","childNodes","innerText","trim","statusPeek","spoilerText","poll","mediaAttachments","quote","hasQuote","quotedStatus","dom","reContainer","querySelector","multiple","title","image","gifv","video","audio","unknown","quotePeek","SIZES","xs","xl","xxl","INVALID_ID_CHARS_REGEX","Icon","icon","size","alt","class","loadIcon","isIconLoaded","useIconSprite","iconSize","iconBlock","ICONS","console","rotate","flip","rtl","isArray","sanitizedTitle","loaded","role","titleID","_jsx","Icon$1","prevProps","nextProps","Link","routerLocation","useLocation","hash","to","parsedHash","origin","searchParams","searchParamsStr","Array","from","encodeURIComponent","pathname","isActive","decodeURIComponent","currentTarget","parentNode","closest","stopPropagation","prevLocation","MenuLink","closeMenu","detail","RTF","RelativeTimeFormat","isValidDate","isNaN","getTime","rtfFromNow","rtf","seconds","now","absSeconds","abs","floor","twitterFromNow","values","0","RelativeTime","datetime","renderCount","rerender","dateStr","dt","str","dateStyle","toISOString","toLocaleString","raf","rafRerender","scheduleRerender","clearTimeout","cancelAnimationFrame","SubMenu2","setComputedDirection","computedShift","setComputedShift","offsetWidth","viewportWidth","innerWidth","pointerType","useCloseWatcher","watcher","CloseWatcher","useCloseWatcher$1","$modalContainer","getElementById","getBackdropThemeColor","Modal","modalRef","focusElement","supportsCloseWatcher","escRef","useHotkeys","enabled","keydown","keyup","useKey","ignoreEventWhen","metaKey","ctrlKey","altKey","shiftKey","$deckContainers","page","tabIndex","forEach","$deckContainer","setAttribute","removeAttribute","$meta","metaColor","local","backdropColor","colorScheme","log","removeProperty","Modal2","xxxl","alphaCache","canvas","OffscreenCanvas","ctx","getContext","willReadFrequently","imageSmoothingEnabled","MISSING_IMAGE_PATH_REGEX","Avatar","staticUrl","squircle","avatarRef","isMissing","_jsxs","srcset","media","src","loading","decoding","fetchPriority","crossOrigin","onError","onLoad","dataset","drawImage","allPixels","getImageData","hasAlpha","data","filter","pixel","classList","add","clearRect","Avatar$1","IS_RTL","observer","MutationObserver","mutations","mutation","dir","isRTL","observe","useWindowSize","setSize","handleResize","innerHeight","removeEventListener","Menu2","_instanceRef","rtlAlign","MenuConfirm","subMenu","confirm","confirmLabel","menuItemClassName","menuFooter","menuExtras","lib","stream","schema","result","parent","partSchema","conditional","conditionFunc","loop","continueFunc","arr","lastStreamPos","newParent","uint8","buildStream","uint8Data","readByte","peekByte","readBytes","peekBytes","readString","readUnsigned","littleEndian","bytes","readArray","byteSize","totalOrFunc","total","parser","subBitsTotal","bits","startIndex","readBits","_byte","res","def","exports","require$$0","_uint","require$$1","subBlocksSchema","terminator","chunks","streamSize","availableSize","gceSchema","codes","imageSchema","textSchema","applicationSchema","commentSchema","nextCode","_default","deinterlace_1","deinterlace","pixels","newPixels","rows","cpRow","toRow","fromRow","fromPixels","offsets","steps","pass","lzw_1","lzw","minCodeSize","pixelCount","MAX_STACK_SIZE","nullCode","npix","available","clear","code_mask","code_size","end_of_information","in_code","old_code","code","datum","data_size","first","bi","pi","dstPixels","prefix","suffix","pixelStack","_gif","_interopRequireDefault","_jsBinarySchemaParser","require$$2","_deinterlace","require$$3","_lzw","require$$4","obj","parseGIF","arrayBuffer","byteData","generatePatch","totalPixels","patchData","pos","colorIndex","color","decompressFrame","frame","gct","buildImagePatch","resultImage","decompressFrames","parsedGif","buildImagePatches","getGifFirstFrame","gifUrl","buffer","fetch","gif","frames","dims","patch","imageData","ImageData","putImageData","blob","Promise","resolve","toBlob","createObjectURL","CustomEmoji","isLarger","naturalWidth","naturalHeight","fetchQueue","PQueue","concurrency","interval","intervalCap","throttledFetch","signal","SHORTCODES_REGEX","shortcodesRegexp","shortcodes","RegExp","resolvedEmojisCache","Map","MAX_CACHE_SIZE","resolveEmojis","resolverURL","has","emojiTags","headers","accept","referrerPolicy","json","tag","emojis","all","emoji","shortcode","mediaType","firstKey","keys","next","delete","renderEmojiText","allEmojis","staticEmoji","elements","regex","word","EmojiText","resolvedEmojis","setResolvedEmojis","setLoading","matches","match","hasUnresolved","some","slice","emojis2","resolved","RolesTags","roles","accountId","accountUrl","hideSelf","isSelf","getCurrentAccountID","parsedAccountInstance","getDomain","_Fragment","nameCollator","sensitivity","Collator","ACCT_REGEX","SPACES_REGEX","NON_ALPHA_NUMERIC_REGEX","NameText","account","showAvatar","showAcct","short","external","useLingui","acct","avatar","avatarStatic","displayName","bot","username","acct1","acct2","api","trimmedUsername","toLowerCase","trimmedDisplayName","shortenedDisplayName","shortenedAlphaNumericDisplayName","hideUsername","compare","preventDefault","which","internalURL","showAccount","codeMappings","zh_HANT","IntlDN","DisplayNames","_localeCode2Text","fallback","of","anotherText","yetAnotherText","translangLanguagesNative","localeCode2Text","translationTargetLanguages","Object","tl","localeTargetLanguages","getTranslateTargetLanguage","fromSettings","contentTranslationTargetLanguage","BYTES_UNITS","prettyBytes","unitIndex","log2","number","unit","unitDisplay","maximumFractionDigits","supportsNativeQuote","getAPIVersions","mastodon","getPostQuoteApprovalPolicy","quoteApproval","currentUser","ESCAPE_REGEX","HTML_ESCAPE_MAP","HTML_ESCAPE_REGEX","escapeRegex","escapeHTML","char","emojifyText","emojiMap","pattern","sc","escapedShortcode","HTML_CHARS_REGEX","HTML_ENTITIES","fauxDiv","whitelistLinkClasses","LINK_REGEX","HTTP_LINK_REGEX","MENTION_REGEX","HASHTAG_REGEX","CODE_BLOCK_REGEX","CODE_BLOCK_START_REGEX","CODE_BLOCK_END_REGEX","INLINE_CODE_REGEX","TWITTER_DOMAIN_REGEX","TWITTER_MENTION_REGEX","TWITTER_MENTION_CAPTURE_REGEX","CODE_INLINE_CAPTURE_REGEX","createDOM","isDocumentFragment","tpl","_enhanceContent","returnDOM","postEnhanceDOM","enhancedContent","hasLink","hasCodeBlock","noTargetBlankLinks","link","links","shortenLink","usernames","hasChildren","atSymbol","domain","push","hashSymbol","textNodes","extractTextNodes","nodeValue","blocks","pre","br","codeBlocks","nextParagraphs","currentBlock","nextElementSibling","tagName","codeText","replaceAll","rejectFilter","prevIndex","hashtagStuffedParagraphs","hashtagCount","nodeType","Node","TEXT_NODE","linkText","startsWith","imgs","img","getAttribute","setProperty","span","replaceChild","queueMicrotask","enhanceContent","defaultRejectFilter","defaultRejectFilterMap","fromEntries","nodeName","URL_PREFIX_REGEX","URL_DISPLAY_LENGTH","displayURL","cutoff","rejectFilterMap","assign","reduce","acc","cur","walk","createTreeWalker","NodeFilter","SHOW_TEXT","acceptNode","FILTER_REJECT","FILTER_ACCEPT","nextNode","supportsHover","matchMedia","handleContentLinks","mentions","previewMode","statusURL","kindaLargeRatio","showMediaModal","description","contains","prevText","previousSibling","textBeforeLinkIsAt","endsWith","textStartsWithAt","targetText","mention","find","textBeforeLinkIsHash","hashURL","unfurledLinks","hostname","containsDomain","shortenNumber","num","notation","roundingMode","containPixelfed","notContainPixelfed","containPleroma","containAkkoma","platformFeatures","supportsCache","semverExtract","atSoftwareSlashMatch","feature","getCurrentInstance","softwareName","getCurrentNodeInfo","software","featureMatch","range","features","doesSoftwareMatch","satisfiesRange","satisfies","includePrerelease","loose","AccountBlock","skeleton","avatarSize","useAvatarStatic","internal","showActivity","showStats","accountInstance","hideDisplayName","relationship","excludeRelationshipAttrs","_useLingui","statusesCount","lastStatusAt","fields","note","group","followersCount","createdAt","locked","verifiedField","verifiedAt","excludedRelationship","hasRelationship","following","followedBy","requested","_t","_Trans","dangerouslySetInnerHTML","__html","components","fetchRelationships","accounts","relationshipsMap","masto","currentAccount","uniqueAccountIds","v1","relationships","i18nDuration","objectToString","isError","errorMessages","isNetworkError","error","message","stack","validateRetries","retries","validateNumberOption","allowInfinity","AbortError","calculateDelay","retriesConsumed","attempt","calculateRemainingTime","start","onAttemptFailure","attemptNumber","startTime","normalizedError","retriesLeft","maxRetryTime","context","consumeRetry","remainingTime","delayTime","finalDelay","reject","onAbort","timeoutToken","pRetry","input","supportsLanguageDetector","supportsBrowserTranslator","langDetector","availability","LanguageDetector","originalSource","detect","detectedSourceLanguage","groupLabel","translatorCapabilities","groupCollapsed","targetLanguage","translator","Translator","sourceLanguage","__defProp","__defNormalProp","__publicField","observerMap","RootIds","rootId","unsupportedValue","getRootId","optionsToId","createObserver","thresholds","entry","_a2","inView","threshold","callback","fallbackInView","bounds","callbacks","isPlainChildren","InView","React.Component","previousInView","rootMargin","trackVisibility","as","triggerOnce","skip","initialInView","React.createElement","_a","_b","useSyncEffect","React3.useInsertionEffect","React3.useLayoutEffect","React3.useEffect","useOnInView","onIntersectionChange","onIntersectionChangeRef","React3.useRef","observedElementRef","observerCleanupRef","lastInViewRef","React3.useCallback","cleanupExisting","cleanup","destroyed","destroyObserver","stopObserving","TOP","shazamIDs","LazyShazam","visibleStart","setVisibleStart","onInView","hidden","getBoundingClientRect","bottom","sourceLanguages","sl","PHANPY_TRANSLANG_INSTANCES","import","TRANSLANG_INSTANCES","translationQueue","TRANSLATED_MAX_AGE","currentTranslangInstance","_translangTranslate","fetchCall","fetchPromise","method","priority","JSON","then","ok","provider","translated_text","detected_language","pronunciation","onFailedAttempt","translangTranslate","pmem","expires","forceTranslate","onTranslate","mini","autoDetected","setUIState","targetLang","uiState","setTranslatedContent","pronunciationContent","setPronunciationContent","detailsRef","translatedContent","abortControllerRef","setDetectedLang","sourceLangText","apiSourceLang","throttledBrowserTranslate","throttledTranslangTranslate","translate","detectedLangText","AbortController","detectedLang","targetLangText","common","showCommon","native","Loader","abrupt","TranslationBlock$1","TranslationBlock","promisifyRequest","request","createStore","dbName","storeName","dbp","getDB","db","txMode","defaultGetStoreFunc","defaultGetStore","customStore","getMany","del","delMany","eachCursor","cursor","initDB","val","drafts","catchup","yearInPosts","EditHistoryContext","supportsViewTransition","startViewTransition","EditHistoryProvider","statusID","editHistoryRef","editHistoryMode","setEditHistoryMode","editedAtIndex","_setEditedAtIndex","setEditedAtIndex","fetchEditHistory","history","statuses","$select","list","sort","initEditHistory","exitEditHistory","prevEditedAt","nextEditedAt","useEditHistory","FilterContext","_isFiltered","filtered","filterContext","appliedFilters","hasContext","expiresAt","filterAction","action","every","filterTitles","titles","titlesStr","isFiltered","filteredItem","currentAccountID","filterState","filteredItems","htmlContentLength","supportsTTS","speak","speechSynthesis","speaking","cancel","utterance","SpeechSynthesisUtterance","useResolvedElement","subscriber","refOrElement","lastReportRef","refOrElementRef","cbElementRef","evaluateSubscription","cbElement","extractSize","boxProp","sizeType","useResizeObserver","onResize","onResizeRef","round","resizeObserverRef","_useState","didUnmount","previous","refCallback","reportedWidth","reportedHeight","newWidth","newHeight","newSize","useThrottledResizeObserver","useThrottledCallback","useTruncated","box","scrollHeight","truncated","_height","computedHeight","visibilityIconsMap","public","unlisted","private","direct","visibilityText","DELIMITERS_PATTERNS","DELIMITERS_REGEX","cleanDOMForTemml","START_DELIMITERS","startRegex","walker","textNode","startMatch","endDelimiter","nodesToCombine","currentNode","foundEnd","combinedText","nextSibling","ELEMENT_NODE","MathBlock","contentRef","onRevert","lastIndex","mathRendered","setMathRendered","toggleMathRendering","temml","__vitePreload","__vite_default__","default","originalContentRefHTML","renderMathInElement","fences","annotate","throwOnError","errorCallback","err","hasMath","htmlChanged","digitLookup","decode83","end","pow","PI","PI2","sRGBToLinear","linearTosRGB","signSqr","fastCos","cos","getBlurHashAverageColor","blurHash","decodeBlurHash","punch","sizeFlag","numX","numY","basis","basisY","pixelIndex","maximumValue","colors","averageColor","cosinesY","cosinesX","bytesPerRow","styleRoot","styleChild","styles","isSsr","isTouch","make3dTransformValue","scale","getOffsetBounds","containerDimension","childDimension","centerContained","diff","classnames","base","other","sqrt","isMac","isDragInteraction","isZoomInteraction","isZoomGesture","wheelEvent","cancelEvent","getDistance","calculateScale","startTouches","endTouches","startDistance","endDistance","isCloseTo","expected","swing","getPointByPageCoordinates","touch","getPageCoordinatesByTouches","touches","sum","getVectorAvg","vectors","clamp","shouldInterceptWheel","getElementSize","offsetHeight","calculateVelocity","startPoint","endPoint","comparePoints","p1","p2","noup","zeroPoint","PinchZoom","_super","__extends","_this","__assign","createRef","clickEvent","touchEndEvent","touchStartEvent","touchMoveEvent","pageX","pageY","deltaY","deltaMode","scaleDelta","likeTouchEvent","center","dScale","inertiaFriction","inertia","renderFrame","prevOffset","currentCoordinates","prevPoint","newScale","touchCenter","needZoomOut","zoomFactor","startZoomFactor","updateProgress","progress","elWidth","elHeight","minOffsetX","maxOffsetX","_c","minOffsetY","maxOffsetY","__x","__y","animated","startOffset","containerCenter","diffZoomFactor","diffOffset","updateFrame","originalZoomFactor","lastCenter","sanitizedOffset","targetOffset","scaleFactor","offsetLeft","offsetTop","_document","_html","_body","scrollTop","scrollLeft","posTop","posLeft","frameFn","timeFn","frameTime","div","xZoomFactor","yZoomFactor","eventName","_i","newInteraction","interaction","fingers","time","mouseEvent","isEnd","isStart","nonce","child","Children","React","any","object","func","bool","string","formatDuration","hours","minutes","padStart","dataAltLabel","AltBadge","showMediaAlt","MEDIA_CAPTION_LIMIT","MEDIA_CAPTION_LIMIT_LONGER","isMediaCaptionLong","caption","Media","showOriginal","autoAnimate","showCaption","allowLongerCaption","altIndex","checkAspectRatio","blurhash","meta","previewRemoteUrl","previewUrl","remoteUrl","mediaVTN","getSafeViewTransitionName","original","small","mediaURL","remoteMediaURL","hasPreviewDimensions","orientation","rgbAverageColor","videoRef","focalPosition","toFixed","mediaRef","onUpdate","touchAction","pinchZoomEnabled","setPinchZoomEnabled","quickPinchZoomProps","draggableUnZoomed","tapZoomFactor","doubleTapToggleZoom","mediaLoadError","setMediaLoadError","Parent","remoteMediaURLObj","getURLObj","isVideoMaybe","isAudioMaybe","isImage","isPreviewVideoMaybe","parentRef","imageSmallerThanParent","setImageSmallerThanParent","smaller","maxAspectHeight","averageColorStyle","mediaStyles","aspectRatio","longDesc","showInlineDesc","Figure","postViewState","interceptOnClick","isOnPostPage","el","viewTransitioned","viewTransitionName","backgroundImage","backgroundSize","mediaImage","$media","clientWidth","clientHeight","minDimension","displayNaturalHeight","almostSimilarHeight","$mediaParent","hasDuration","shortDuration","isGIF","loopable","formattedDuration","hoverAnimate","autoGIFAnimate","showProgress","videoHTML","QuickPinchZoom","gifHTML","poster","preload","playsinline","muted","onTimeUpdate","percentage","currentTime","disablePictureInPicture","formattedDuration2","background","controls","controlsList","autoPlay","playsInline","inputString","safeName","Media$1","oldProps","newProps","oldMedia","newMedia","MediaFirstContainer","postID","moreThanOne","carouselRef","currentIndex","setCurrentIndex","scrollTo","behavior","MultipleMediaFigure","captionChildren","Poll","readOnly","refresh","votePoll","expired","ownVotes","voted","votersCount","votesCount","expiresAtDate","pollVotesCount","roundPrecision","showResults","setShowResults","optionsHaveVoteCounts","option","optionVotesCount","ratio","isLeading","onSubmit","form","formData","FormData","choices","1","HTTP_REGEX","PostContent","post","snapStates","useSnapshot","sKey","statusKey","quotes","statusQuotes","divRef","replaceChildren","cloneNode","originalURL","addIndentation_1","splittedHtml","level","opened","indented","elTag","newIndented","removeEmptyLines","nonFormattedString","toLines","markup","splittedMarkup","mergedLines","currentElement","line","addIndentation","mergeAttributesWithElements","splitted","generateHTMLCode","accountURL","accountEmojis","editedAt","uniqueQuotes","findIndex","q2","quoteStatusesHTML","createdAtDate","contentHTML","sourceMediaURL","previewMediaURL","sourceMediaURLObj","isVideo","isAudio","mediaHTML","htmlCode","prettify","PostEmbedModal","readonly","select","clipboard","writeText","download","TruncatedLink","FETCH_DELAY","BATCH_LIMIT","QuoteChainModal","statusId","posts","setPosts","nextPostID","setNextPostID","fetchQuoteChain","fetchCount","currentPostID","aborted","fullStatus","getStatus","cached","prev","quotedStatusId","tabindex","_t2","postEl","dispatchEvent","clientX","clientY","Status","showCommentCount","showQuoteCount","QuoteSettingsSheet","currentPolicy","selectedPolicy","setSelectedPolicy","handleFormSubmit","quoteApprovalPolicy","newStatus","interactionPolicy","update","quote_approval_policy","saveStatus","skipThreading","skipUnfurling","LIMIT","QuotesModal","showMore","setShowMore","quotesIterator","firstLoad","loadQuotes","isFirstLoad","limit","done","post2","StatusButton","extraCount","otherProps","buttonTitle","setButtonTitle","iconAlt","setIconAlt","LiteYTEmbed","shadowDom","oldVal","newVal","eleNoScript","isIntersectionObserver","autoplay","autoPause","wantsNoCookie","embedTarget","iframeHTML","oEmbedUrl","response","thumbnailUrl","videoIdMatch","extractedVideoId","videoId","posterUrlWebp","posterUrlJpeg","webpUrl","kind","linkElem","Byline","authors","author","isCardPost","StatusCard","card","selfReferential","selfAuthor","providerName","providerUrl","authorName","authorUrl","imageDescription","embedUrl","publishedAt","hasText","cardStatusURL","setCardStatusURL","isMastodonLinkMaybe","abortController","unfurlMastodonLink","abort","hasIframeHTML","showEmbedModal","blurhashImage","setBlurhashImage","blurhashPixels","createImageData","convertToBlob","toDataURL","isPost","rel","videoID","videoid","StatusCompact","statusReply","sensitive","visibility","srKey","statusPeekText","getCurrentAccID","filterInfo","filterTitleStr","ThreadCountContext","ThreadIcon","ThreadBadge","showIcon","showText","hasIndex","hasTotal","SHOW_COMMENT_COUNT_LIMIT","INLINE_TRANSLATE_LIMIT","accountQueue","fetchAccount","memFetchAccount","isIOS","ontouchstart","REACTIONS_LIMIT","getPollText","getPostText","maskCustomEmojis","maskURLs","hideInlineQuote","htmlTextOpts","emojisRegex","forgivingQSA","selectors","selector","getHTMLTextForDetectLang","isTranslateble","SIZE_CLASS","detectLang","langs","detectedLanguage","groupEnd","lang2","detectAll","readMoreText","DIFFERENT_LANG_CHECK","diffLangCheckCacheKey","hls","contentTranslationHideLanguages","checkDifferentLanguage","cacheKey","different","quoteMessages","quotePrivate","requestQuote","quoteManualReview","quoteFollowersOnly","quoteCannot","quoteApprovalPolicyMessages","followers","nobody","QUESTION_REGEX","DEV","__vite_import_meta_env__","contentTextWeight","enableCommentHint","withinContext","enableTranslate","allowFilters","onMediaClick","quoted","quoteDomain","onStatusLinkClick","allowContextMenu","showFollowedTags","showActionsBar","showReplyParent","mediaFirst","forceShowCommentCount","ghost","inReplyToAccountId2","inReplyToAccountId","ghostAccount","authenticated","currentInstance","sameInstance","eStatus","repliesCount","reblogged","reblogsCount","favourited","favouritesCount","quotesCount","bookmarked","inReplyToId","reblog","uri","tags","_pinned","emojiReactions","languageAutoDetected","_language","detected","setLanguageAutoDetected","hasMediaAttachments","debugHover","FilteredStatus","onMouseEnter","inReplyToAccountRef","setInReplyToAccount","inReplyToAccount","account2","mentionSelf","prefs","getPreferences","readingExpandSpoilers","showSpoiler","showSpoilerMedia","readingExpandMedia","FollowedTagsParent","StatusParent","contentTranslation","contentLength","setForceTranslate","_forceTranslate","isSizeLarge","contentTranslationAutoInline","inlineTranslate","showQuotes","setShowQuotes","showQuoteChain","setShowQuoteChain","spoilerContentRef","mediaContainerRef","setShowEdited","statusRef","setShowEmbed","showQuoteSettings","setShowQuoteSettings","unauthInteractionErrorMessage","textWeight","reloadPostContent","isPublic","canBoost","quoteDisabled","createdDateText","quoteText","editedDateText","isMineAndPrivate","isMine","isQuoteAutomaticallyAccepted","isQuoteManuallyAccepted","isQuoteFollowersOnly","quoteMetaText","automatic","replyStatus","replyMode","postQuoteApprovalPolicy","mediaNoDesc","attachment","replyToStatus","confirmBoostStatus","favouriteStatus","bookmarkStatus","bookmarkStatusNotify","differentLanguage","setDifferentLanguage","reblogIterator","fetchBoostedLikedByAccounts","reblogResults","favouriteResults","favouriteIterator","_types","isQuotingMyPost","statusMonthsAgo","tooManyMentions","mentionsCount","ReplyMenuContent","replyModeMenuItems","StatusMenuItems","quoteStatus","draftStatus","canQuote","showGenericAccounts","fetchAccounts","postText","nicePostURL","maxWidth","share","isPinnable","pinned","editStatus","cachedStatus","_deleted","reloadStatusPage","contextMenuRef","isContextMenuOpen","setIsContextMenuOpen","contextMenuProps","setContextMenuProps","showReportModal","bindLongPressContext","showContextMenu","rRef","handler","favouriteStatusNotify","hotkeysEnabled","captureEvent","cancelOnMovement","fRef","xRef","activeStatus","spoilerButton","spoilerMediaButton","showMultipleMediaCaptions","displayedMediaAttachments","attachments","indices","isThread","showCommentHint","forceShowQuoteCount","dRef","nodeRef","bRef","containsQuestion","qRef","selection","anchorNode","actionsRef","statusThreadNumber","newPoll","pollResponse","reloadPostContentCount","polls","catch","fallbackQuote","editedAtDate","me","url2","emojiReaction","isShortCode","showEdited","showEmbed","EditedAtModal","fetchStatusHistory","urlObj","host","restPath","path","handledUnfulfilledStates","revealableUnfulfilledStates","filterHidden","deleted","unauthorized","rejected","revoked","unfulfilledState","isStaticQuote","quotedAccountAcct","isRevealable","unfulfilledText","quoteKey","revealedQuotes","originalDomain","collapsed","QuoteStatuses","QuoteStatus","ShallowQuote","editHistory","setEditHistory","second","_t3","isReblog","setShowPeek","isFollowedTags","ssKey","actualStatusID","onContextMenu","bindLongPressPeek","showPeek","statusPeekRef","restNewProps","shallowEqual","restOldProps","IDX","HEX","len","getTag","INFINITY","baseToString","isString","isNumber","isBoolean","isObjectLike","isObject","isDefined","isBlank","INCORRECT_INDEX_TYPE","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","PATTERN_LENGTH_TOO_LARGE","MISSING_KEY_PROPERTY","INVALID_KEY_WEIGHT_VALUE","hasOwn","KeyStore","totalWeight","createKey","keyId","weight","getFn","createKeyPath","createKeyId","deepGet","MatchOptions","BasicOptions","FuzzyOptions","AdvancedOptions","Config","SPACE","norm","mantissa","cache","numTokens","FuseIndex","fieldNormWeight","docs","records","idx","doc","docIndex","record","keyIndex","subRecords","nestedArrIndex","subRecord","createIndex","myIndex","parseIndex","computeScore$1","errors","currentLocation","expectedLocation","distance","ignoreLocation","accuracy","proximity","convertMaskToIndices","matchmask","minMatchCharLength","MAX_BITS","search","patternAlphabet","findAllMatches","includeMatches","patternLen","textLen","currentThreshold","bestLocation","computeMatches","matchMask","score","lastBitArr","finalScore","binMax","mask","binMin","binMid","finish","bitArr","charMatch","createPatternAlphabet","stripDiacritics","BitapSearch","isCaseSensitive","ignoreDiacritics","addChunk","remainder","allIndices","totalScore","hasMatches","alphabet","isMatch","BaseMatch","getMatch","exp","ExactMatch","InverseExactMatch","PrefixExactMatch","InversePrefixExactMatch","SuffixExactMatch","InverseSuffixExactMatch","FuzzyMatch","IncludeMatch","searchers","searchersLen","SPACE_RE","OR_TOKEN","parseQuery","query","results","queryItem","found","searcher","token","MultiMatchSet","ExtendedSearch","numMatches","qLen","pLen","registeredSearchers","register","createSearcher","searcherClass","LogicalOperator","KeyType","isExpression","isPath","isLeaf","convertToExplicit","auto","isQueryPath","computeScore","ignoreFieldNorm","transformMatches","transformScore","includeScore","transformers","transformer","Fuse","predicate","shouldSort","sortFn","expression","evaluate","resultMap","expResults","MIN_SCHEDULED_AT","MAX_SCHEDULED_AT","ScheduledAtField","scheduledAt","setScheduledAt","minStr","setMinStr","timezoneOffset","setMaxStr","updateMinStr","updateMaxStr","intervalId","defaultValue","maxStr","required","getLocalTimezoneName","formatter","formatToParts","part"],"ignoreList":[0,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,60,61,62,63,64,65,71,85,86,88,91,98,104,105,106,107,108,115,116,117,123,130,131],"sources":["../../node_modules/react-hotkeys-hook/packages/react-hotkeys-hook/dist/index.js","../../node_modules/toastify-js/src/toastify.js","../../src/utils/show-toast.js","../../src/utils/useInterval.js","../../node_modules/@szhsin/react-menu/dist/esm/utils/utils.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useBEM.mjs","../../node_modules/@szhsin/react-menu/dist/esm/utils/constants.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/MenuContainer.mjs","../../node_modules/@szhsin/react-menu/dist/esm/utils/submenuCtx.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useItems.mjs","../../node_modules/@szhsin/react-menu/dist/esm/positionUtils/getNormalizedClientRect.mjs","../../node_modules/@szhsin/react-menu/dist/esm/positionUtils/getPositionHelpers.mjs","../../node_modules/@szhsin/react-menu/dist/esm/positionUtils/placeArrowVertical.mjs","../../node_modules/@szhsin/react-menu/dist/esm/positionUtils/placeLeftorRight.mjs","../../node_modules/@szhsin/react-menu/dist/esm/positionUtils/placeArrowHorizontal.mjs","../../node_modules/@szhsin/react-menu/dist/esm/positionUtils/placeToporBottom.mjs","../../node_modules/@szhsin/react-menu/dist/esm/positionUtils/positionMenu.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useIsomorphicLayoutEffect.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useCombinedRef.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/MenuList.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/ControlledMenu.mjs","../../node_modules/react-transition-state/dist/esm/hooks/utils.mjs","../../node_modules/react-transition-state/dist/esm/hooks/useTransitionState.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useMenuState.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useMenuStateAndFocus.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useClick.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/Menu.mjs","../../node_modules/@szhsin/react-menu/dist/esm/utils/withHovering.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useMouseOver.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useItemEffect.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/SubMenu.mjs","../../node_modules/@szhsin/react-menu/dist/esm/hooks/useItemState.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/MenuItem.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/FocusableItem.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/MenuDivider.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/MenuHeader.mjs","../../node_modules/@szhsin/react-menu/dist/esm/components/MenuGroup.mjs","../../node_modules/use-long-press/index.mjs","../../src/utils/dtf-locale.js","../../src/utils/date-time-format.js","../../src/utils/nice-date-time.js","../../src/utils/open-compose.js","../../src/utils/open-osk.js","../../src/utils/safe-bounding-box-padding.js","../../src/utils/show-compose.js","../../src/utils/getHTMLText.js","../../src/utils/status-peek.js","../../src/components/icon.jsx","../../src/components/link.jsx","../../src/components/menu-link.jsx","../../src/utils/relative-time-format.js","../../src/components/relative-time.jsx","../../src/components/submenu2.jsx","../../src/utils/useCloseWatcher.js","../../src/components/modal.jsx","../../src/components/avatar.jsx","../../src/utils/is-rtl.js","../../src/utils/useWindowSize.js","../../src/components/menu2.jsx","../../src/components/menu-confirm.jsx","../../node_modules/js-binary-schema-parser/lib/index.js","../../node_modules/js-binary-schema-parser/lib/parsers/uint8.js","../../node_modules/js-binary-schema-parser/lib/schemas/gif.js","../../node_modules/gifuct-js/lib/deinterlace.js","../../node_modules/gifuct-js/lib/lzw.js","../../node_modules/gifuct-js/lib/index.js","../../src/utils/get-gif-first-frame.js","../../src/components/custom-emoji.jsx","../../src/components/emoji-text.jsx","../../src/components/roles-tags.jsx","../../src/components/name-text.jsx","../../node_modules/use-debounce/dist/index.module.js","../../src/utils/localeCode2Text.js","../../src/utils/get-translate-target-language.js","../../src/utils/pretty-bytes.js","../../src/utils/quote-utils.js","../../src/utils/emojify-text.js","../../src/utils/escape-html.js","../../src/utils/enhance-content.js","../../src/utils/handle-content-links.js","../../src/utils/shorten-number.js","../../src/utils/supports.js","../../src/components/account-block.jsx","../../src/utils/relationships.js","../../src/utils/i18n-duration.js","../../node_modules/is-network-error/index.js","../../node_modules/p-retry/index.js","../../src/utils/browser-translator.js","../../node_modules/react-intersection-observer/dist/index.mjs","../../src/components/lazy-shazam.jsx","../../src/components/translation-block.jsx","../../node_modules/idb-keyval/dist/index.js","../../src/utils/db.js","../../src/utils/edit-history-context.jsx","../../src/utils/filter-context.js","../../src/utils/filters.js","../../src/utils/html-content-length.js","../../src/utils/speech.js","../../node_modules/use-resize-observer/dist/bundle.esm.js","../../src/utils/useThrottledResizeObserver.js","../../src/utils/useTruncated.js","../../src/utils/visibility-icons-map.js","../../src/utils/visibility-text.jsx","../../src/components/math-block.jsx","../../node_modules/fast-blurhash/index.js","../../node_modules/react-quick-pinch-zoom/esm/PinchZoom/styles.css.js","../../node_modules/react-quick-pinch-zoom/esm/utils.js","../../node_modules/react-quick-pinch-zoom/esm/PinchZoom/getOffsetBounds.js","../../node_modules/react-quick-pinch-zoom/esm/PinchZoom/component.js","../../src/utils/format-duration.js","../../src/components/media.jsx","../../src/components/media-first-container.jsx","../../src/components/multiple-media-figure.jsx","../../src/components/poll.jsx","../../src/components/post-content.jsx","../../node_modules/html-prettify/src/utils/addIndentation.js","../../node_modules/html-prettify/src/utils/toLines.js","../../node_modules/html-prettify/src/index.js","../../src/components/post-embed-modal.jsx","../../src/components/quote-chain-modal.jsx","../../src/components/quote-settings-sheet.jsx","../../src/components/quotes-modal.jsx","../../src/components/status-button.jsx","../../node_modules/@justinribeiro/lite-youtube/lite-youtube.js","../../src/components/byline.jsx","../../src/components/status-card.jsx","../../src/components/status-compact.jsx","../../src/utils/thread-count-context.js","../../src/components/thread-badge.jsx","../../src/components/status.jsx","../../node_modules/uid/single/index.mjs","../../node_modules/fuse.js/dist/fuse.mjs","../../src/components/ScheduledAtField.jsx"],"sourcesContent":["import { createContext as T, useContext as M, useState as A, useCallback as w, useRef as S, useLayoutEffect as z, useEffect as J } from \"react\";\nimport { jsx as b } from \"react/jsx-runtime\";\nconst j = [\"shift\", \"alt\", \"meta\", \"mod\", \"ctrl\", \"control\"], Q = {\n  esc: \"escape\",\n  return: \"enter\",\n  left: \"arrowleft\",\n  right: \"arrowright\",\n  up: \"arrowup\",\n  down: \"arrowdown\",\n  ShiftLeft: \"shift\",\n  ShiftRight: \"shift\",\n  AltLeft: \"alt\",\n  AltRight: \"alt\",\n  MetaLeft: \"meta\",\n  MetaRight: \"meta\",\n  OSLeft: \"meta\",\n  OSRight: \"meta\",\n  ControlLeft: \"ctrl\",\n  ControlRight: \"ctrl\"\n};\nfunction K(e) {\n  return (Q[e.trim()] || e.trim()).toLowerCase().replace(/key|digit|numpad/, \"\");\n}\nfunction D(e) {\n  return j.includes(e);\n}\nfunction H(e, r = \",\") {\n  return e.toLowerCase().split(r);\n}\nfunction P(e, r = \"+\", o = \">\", i = !1, u) {\n  let n = [], c = !1;\n  e = e.trim(), e.includes(o) ? (c = !0, n = e.toLocaleLowerCase().split(o).map((f) => K(f))) : n = e.toLocaleLowerCase().split(r).map((f) => K(f));\n  const y = {\n    alt: n.includes(\"alt\"),\n    ctrl: n.includes(\"ctrl\") || n.includes(\"control\"),\n    shift: n.includes(\"shift\"),\n    meta: n.includes(\"meta\"),\n    mod: n.includes(\"mod\"),\n    useKey: i\n  }, d = n.filter((f) => !j.includes(f));\n  return {\n    ...y,\n    keys: d,\n    description: u,\n    isSequence: c,\n    hotkey: e\n  };\n}\ntypeof document < \"u\" && (document.addEventListener(\"keydown\", (e) => {\n  e.code !== void 0 && I([K(e.code)]);\n}), document.addEventListener(\"keyup\", (e) => {\n  e.code !== void 0 && _([K(e.code)]);\n})), typeof window < \"u\" && (window.addEventListener(\"blur\", () => {\n  L.clear();\n}), window.addEventListener(\"contextmenu\", () => {\n  setTimeout(() => {\n    L.clear();\n  }, 0);\n}));\nconst L = /* @__PURE__ */ new Set();\nfunction R(e) {\n  return Array.isArray(e);\n}\nfunction U(e, r = \",\") {\n  return (R(e) ? e : e.split(r)).every((i) => L.has(i.trim().toLowerCase()));\n}\nfunction I(e) {\n  const r = Array.isArray(e) ? e : [e];\n  L.has(\"meta\") && L.forEach((o) => !D(o) && L.delete(o.toLowerCase())), r.forEach((o) => L.add(o.toLowerCase()));\n}\nfunction _(e) {\n  const r = Array.isArray(e) ? e : [e];\n  e === \"meta\" ? L.clear() : r.forEach((o) => L.delete(o.toLowerCase()));\n}\nfunction V(e, r, o) {\n  (typeof o == \"function\" && o(e, r) || o === !0) && e.preventDefault();\n}\nfunction X(e, r, o) {\n  return typeof o == \"function\" ? o(e, r) : o === !0 || o === void 0;\n}\nconst Y = [\n  \"input\",\n  \"textarea\",\n  \"select\",\n  \"searchbox\",\n  \"slider\",\n  \"spinbutton\",\n  \"menuitem\",\n  \"menuitemcheckbox\",\n  \"menuitemradio\",\n  \"option\",\n  \"radio\",\n  \"textbox\"\n];\nfunction Z(e) {\n  return F(e, Y);\n}\nfunction F(e, r = !1) {\n  const { target: o, composed: i } = e;\n  let u, n;\n  return ee(o) && i ? (u = e.composedPath()[0] && e.composedPath()[0].tagName, n = e.composedPath()[0] && e.composedPath()[0].role) : (u = o && o.tagName, n = o && o.role), R(r) ? !!(u && r && r.some((c) => c.toLowerCase() === u.toLowerCase() || c === n)) : !!(u && r && r);\n}\nfunction ee(e) {\n  return !!e.tagName && !e.tagName.startsWith(\"-\") && e.tagName.includes(\"-\");\n}\nfunction te(e, r) {\n  return e.length === 0 && r ? (console.warn(\n    'A hotkey has the \"scopes\" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'\n  ), !0) : r ? e.some((o) => r.includes(o)) || e.includes(\"*\") : !0;\n}\nconst re = (e, r, o = !1) => {\n  const { alt: i, meta: u, mod: n, shift: c, ctrl: y, keys: d, useKey: f } = r, { code: p, key: t, ctrlKey: a, metaKey: l, shiftKey: g, altKey: k } = e, m = K(p);\n  if (f && d?.length === 1 && d.includes(t))\n    return !0;\n  if (!d?.includes(m) && ![\"ctrl\", \"control\", \"unknown\", \"meta\", \"alt\", \"shift\", \"os\"].includes(m))\n    return !1;\n  if (!o) {\n    if (i !== k && m !== \"alt\" || c !== g && m !== \"shift\")\n      return !1;\n    if (n) {\n      if (!l && !a)\n        return !1;\n    } else if (u !== l && m !== \"meta\" && m !== \"os\" || y !== a && m !== \"ctrl\" && m !== \"control\")\n      return !1;\n  }\n  return d && d.length === 1 && d.includes(m) ? !0 : d ? U(d) : !d;\n}, $ = T(void 0), oe = () => M($);\nfunction ne({ addHotkey: e, removeHotkey: r, children: o }) {\n  return /* @__PURE__ */ b($.Provider, { value: { addHotkey: e, removeHotkey: r }, children: o });\n}\nfunction x(e, r) {\n  return e && r && typeof e == \"object\" && typeof r == \"object\" ? Object.keys(e).length === Object.keys(r).length && // @ts-expect-error TS7053\n  Object.keys(e).reduce((o, i) => o && x(e[i], r[i]), !0) : e === r;\n}\nconst W = T({\n  hotkeys: [],\n  activeScopes: [],\n  // This array has to be empty instead of containing '*' as default, to check if the provider is set or not\n  toggleScope: () => {\n  },\n  enableScope: () => {\n  },\n  disableScope: () => {\n  }\n}), se = () => M(W), de = ({ initiallyActiveScopes: e = [\"*\"], children: r }) => {\n  const [o, i] = A(e), [u, n] = A([]), c = w((t) => {\n    i((a) => a.includes(\"*\") ? [t] : Array.from(/* @__PURE__ */ new Set([...a, t])));\n  }, []), y = w((t) => {\n    i((a) => a.filter((l) => l !== t));\n  }, []), d = w((t) => {\n    i((a) => a.includes(t) ? a.filter((l) => l !== t) : a.includes(\"*\") ? [t] : Array.from(/* @__PURE__ */ new Set([...a, t])));\n  }, []), f = w((t) => {\n    n((a) => [...a, t]);\n  }, []), p = w((t) => {\n    n((a) => a.filter((l) => !x(l, t)));\n  }, []);\n  return /* @__PURE__ */ b(\n    W.Provider,\n    {\n      value: { activeScopes: o, hotkeys: u, enableScope: c, disableScope: y, toggleScope: d },\n      children: /* @__PURE__ */ b(ne, { addHotkey: f, removeHotkey: p, children: r })\n    }\n  );\n};\nfunction ie(e) {\n  const r = S(void 0);\n  return x(r.current, e) || (r.current = e), r.current;\n}\nconst N = (e) => {\n  e.stopPropagation(), e.preventDefault(), e.stopImmediatePropagation();\n}, ue = typeof window < \"u\" ? z : J;\nfunction fe(e, r, o, i) {\n  const u = S(null), n = S(!1), c = Array.isArray(o) ? Array.isArray(i) ? void 0 : i : o, y = R(e) ? e.join(c?.delimiter) : e, d = Array.isArray(o) ? o : Array.isArray(i) ? i : void 0, f = w(r, d ?? []), p = S(f);\n  d ? p.current = f : p.current = r;\n  const t = ie(c), { activeScopes: a } = se(), l = oe();\n  return ue(() => {\n    if (t?.enabled === !1 || !te(a, t?.scopes))\n      return;\n    let g = [], k;\n    const m = (s, B = !1) => {\n      if (!(Z(s) && !F(s, t?.enableOnFormTags))) {\n        if (u.current !== null) {\n          const v = u.current.getRootNode();\n          if ((v instanceof Document || v instanceof ShadowRoot) && v.activeElement !== u.current && !u.current.contains(v.activeElement)) {\n            N(s);\n            return;\n          }\n        }\n        s.target?.isContentEditable && !t?.enableOnContentEditable || H(y, t?.delimiter).forEach((v) => {\n          if (v.includes(t?.splitKey ?? \"+\") && v.includes(t?.sequenceSplitKey ?? \">\")) {\n            console.warn(\n              `Hotkey ${v} contains both ${t?.splitKey ?? \"+\"} and ${t?.sequenceSplitKey ?? \">\"} which is not supported.`\n            );\n            return;\n          }\n          const h = P(\n            v,\n            t?.splitKey,\n            t?.sequenceSplitKey,\n            t?.useKey,\n            t?.description\n          );\n          if (h.isSequence) {\n            k = setTimeout(() => {\n              g = [];\n            }, t?.sequenceTimeoutMs ?? 1e3);\n            const C = h.useKey ? s.key : K(s.code);\n            if (D(C.toLowerCase()))\n              return;\n            g.push(C);\n            const G = h.keys?.[g.length - 1];\n            if (C !== G) {\n              g = [], k && clearTimeout(k);\n              return;\n            }\n            g.length === h.keys?.length && (p.current(s, h), k && clearTimeout(k), g = []);\n          } else if (re(s, h, t?.ignoreModifiers) || h.keys?.includes(\"*\")) {\n            if (t?.ignoreEventWhen?.(s) || B && n.current)\n              return;\n            if (V(s, h, t?.preventDefault), !X(s, h, t?.enabled)) {\n              N(s);\n              return;\n            }\n            p.current(s, h), B || (n.current = !0);\n          }\n        });\n      }\n    }, O = (s) => {\n      s.code !== void 0 && (I(K(s.code)), (t?.keydown === void 0 && t?.keyup !== !0 || t?.keydown) && m(s));\n    }, q = (s) => {\n      s.code !== void 0 && (_(K(s.code)), n.current = !1, t?.keyup && m(s, !0));\n    }, E = u.current || c?.document || document;\n    return E.addEventListener(\"keyup\", q, c?.eventListenerOptions), E.addEventListener(\"keydown\", O, c?.eventListenerOptions), l && H(y, t?.delimiter).forEach(\n      (s) => l.addHotkey(\n        P(\n          s,\n          t?.splitKey,\n          t?.sequenceSplitKey,\n          t?.useKey,\n          t?.description\n        )\n      )\n    ), () => {\n      E.removeEventListener(\"keyup\", q, c?.eventListenerOptions), E.removeEventListener(\"keydown\", O, c?.eventListenerOptions), l && H(y, t?.delimiter).forEach(\n        (s) => l.removeHotkey(\n          P(\n            s,\n            t?.splitKey,\n            t?.sequenceSplitKey,\n            t?.useKey,\n            t?.description\n          )\n        )\n      ), g = [], k && clearTimeout(k);\n    };\n  }, [y, t, a]), u;\n}\nfunction le(e = !1) {\n  const [r, o] = A(/* @__PURE__ */ new Set()), [i, u] = A(!1), n = w(\n    (f) => {\n      f.code !== void 0 && (f.preventDefault(), f.stopPropagation(), o((p) => {\n        const t = new Set(p);\n        return t.add(K(e ? f.key : f.code)), t;\n      }));\n    },\n    [e]\n  ), c = w(() => {\n    typeof document < \"u\" && (document.removeEventListener(\"keydown\", n), u(!1));\n  }, [n]), y = w(() => {\n    o(/* @__PURE__ */ new Set()), typeof document < \"u\" && (c(), document.addEventListener(\"keydown\", n), u(!0));\n  }, [n, c]), d = w(() => {\n    o(/* @__PURE__ */ new Set());\n  }, []);\n  return [r, { start: y, stop: c, resetKeys: d, isRecording: i }];\n}\nexport {\n  de as HotkeysProvider,\n  U as isHotkeyPressed,\n  fe as useHotkeys,\n  se as useHotkeysContext,\n  le as useRecordHotkeys\n};\n","/*!\n * Toastify js 1.12.0\n * https://github.com/apvarun/toastify-js\n * @license MIT licensed\n *\n * Copyright (C) 2018 Varun A P\n */\n(function(root, factory) {\n  if (typeof module === \"object\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.Toastify = factory();\n  }\n})(this, function(global) {\n  // Object initialization\n  var Toastify = function(options) {\n      // Returning a new init object\n      return new Toastify.lib.init(options);\n    },\n    // Library version\n    version = \"1.12.0\";\n\n  // Set the default global options\n  Toastify.defaults = {\n    oldestFirst: true,\n    text: \"Toastify is awesome!\",\n    node: undefined,\n    duration: 3000,\n    selector: undefined,\n    callback: function () {\n    },\n    destination: undefined,\n    newWindow: false,\n    close: false,\n    gravity: \"toastify-top\",\n    positionLeft: false,\n    position: '',\n    backgroundColor: '',\n    avatar: \"\",\n    className: \"\",\n    stopOnFocus: true,\n    onClick: function () {\n    },\n    offset: {x: 0, y: 0},\n    escapeMarkup: true,\n    ariaLive: 'polite',\n    style: {background: ''}\n  };\n\n  // Defining the prototype of the object\n  Toastify.lib = Toastify.prototype = {\n    toastify: version,\n\n    constructor: Toastify,\n\n    // Initializing the object with required parameters\n    init: function(options) {\n      // Verifying and validating the input object\n      if (!options) {\n        options = {};\n      }\n\n      // Creating the options object\n      this.options = {};\n\n      this.toastElement = null;\n\n      // Validating the options\n      this.options.text = options.text || Toastify.defaults.text; // Display message\n      this.options.node = options.node || Toastify.defaults.node;  // Display content as node\n      this.options.duration = options.duration === 0 ? 0 : options.duration || Toastify.defaults.duration; // Display duration\n      this.options.selector = options.selector || Toastify.defaults.selector; // Parent selector\n      this.options.callback = options.callback || Toastify.defaults.callback; // Callback after display\n      this.options.destination = options.destination || Toastify.defaults.destination; // On-click destination\n      this.options.newWindow = options.newWindow || Toastify.defaults.newWindow; // Open destination in new window\n      this.options.close = options.close || Toastify.defaults.close; // Show toast close icon\n      this.options.gravity = options.gravity === \"bottom\" ? \"toastify-bottom\" : Toastify.defaults.gravity; // toast position - top or bottom\n      this.options.positionLeft = options.positionLeft || Toastify.defaults.positionLeft; // toast position - left or right\n      this.options.position = options.position || Toastify.defaults.position; // toast position - left or right\n      this.options.backgroundColor = options.backgroundColor || Toastify.defaults.backgroundColor; // toast background color\n      this.options.avatar = options.avatar || Toastify.defaults.avatar; // img element src - url or a path\n      this.options.className = options.className || Toastify.defaults.className; // additional class names for the toast\n      this.options.stopOnFocus = options.stopOnFocus === undefined ? Toastify.defaults.stopOnFocus : options.stopOnFocus; // stop timeout on focus\n      this.options.onClick = options.onClick || Toastify.defaults.onClick; // Callback after click\n      this.options.offset = options.offset || Toastify.defaults.offset; // toast offset\n      this.options.escapeMarkup = options.escapeMarkup !== undefined ? options.escapeMarkup : Toastify.defaults.escapeMarkup;\n      this.options.ariaLive = options.ariaLive || Toastify.defaults.ariaLive;\n      this.options.style = options.style || Toastify.defaults.style;\n      if(options.backgroundColor) {\n        this.options.style.background = options.backgroundColor;\n      }\n\n      // Returning the current object for chaining functions\n      return this;\n    },\n\n    // Building the DOM element\n    buildToast: function() {\n      // Validating if the options are defined\n      if (!this.options) {\n        throw \"Toastify is not initialized\";\n      }\n\n      // Creating the DOM object\n      var divElement = document.createElement(\"div\");\n      divElement.className = \"toastify on \" + this.options.className;\n\n      // Positioning toast to left or right or center\n      if (!!this.options.position) {\n        divElement.className += \" toastify-\" + this.options.position;\n      } else {\n        // To be depreciated in further versions\n        if (this.options.positionLeft === true) {\n          divElement.className += \" toastify-left\";\n          console.warn('Property `positionLeft` will be depreciated in further versions. Please use `position` instead.')\n        } else {\n          // Default position\n          divElement.className += \" toastify-right\";\n        }\n      }\n\n      // Assigning gravity of element\n      divElement.className += \" \" + this.options.gravity;\n\n      if (this.options.backgroundColor) {\n        // This is being deprecated in favor of using the style HTML DOM property\n        console.warn('DEPRECATION NOTICE: \"backgroundColor\" is being deprecated. Please use the \"style.background\" property.');\n      }\n\n      // Loop through our style object and apply styles to divElement\n      for (var property in this.options.style) {\n        divElement.style[property] = this.options.style[property];\n      }\n\n      // Announce the toast to screen readers\n      if (this.options.ariaLive) {\n        divElement.setAttribute('aria-live', this.options.ariaLive)\n      }\n\n      // Adding the toast message/node\n      if (this.options.node && this.options.node.nodeType === Node.ELEMENT_NODE) {\n        // If we have a valid node, we insert it\n        divElement.appendChild(this.options.node)\n      } else {\n        if (this.options.escapeMarkup) {\n          divElement.innerText = this.options.text;\n        } else {\n          divElement.innerHTML = this.options.text;\n        }\n\n        if (this.options.avatar !== \"\") {\n          var avatarElement = document.createElement(\"img\");\n          avatarElement.src = this.options.avatar;\n\n          avatarElement.className = \"toastify-avatar\";\n\n          if (this.options.position == \"left\" || this.options.positionLeft === true) {\n            // Adding close icon on the left of content\n            divElement.appendChild(avatarElement);\n          } else {\n            // Adding close icon on the right of content\n            divElement.insertAdjacentElement(\"afterbegin\", avatarElement);\n          }\n        }\n      }\n\n      // Adding a close icon to the toast\n      if (this.options.close === true) {\n        // Create a span for close element\n        var closeElement = document.createElement(\"button\");\n        closeElement.type = \"button\";\n        closeElement.setAttribute(\"aria-label\", \"Close\");\n        closeElement.className = \"toast-close\";\n        closeElement.innerHTML = \"&#10006;\";\n\n        // Triggering the removal of toast from DOM on close click\n        closeElement.addEventListener(\n          \"click\",\n          function(event) {\n            event.stopPropagation();\n            this.removeElement(this.toastElement);\n            window.clearTimeout(this.toastElement.timeOutValue);\n          }.bind(this)\n        );\n\n        //Calculating screen width\n        var width = window.innerWidth > 0 ? window.innerWidth : screen.width;\n\n        // Adding the close icon to the toast element\n        // Display on the right if screen width is less than or equal to 360px\n        if ((this.options.position == \"left\" || this.options.positionLeft === true) && width > 360) {\n          // Adding close icon on the left of content\n          divElement.insertAdjacentElement(\"afterbegin\", closeElement);\n        } else {\n          // Adding close icon on the right of content\n          divElement.appendChild(closeElement);\n        }\n      }\n\n      // Clear timeout while toast is focused\n      if (this.options.stopOnFocus && this.options.duration > 0) {\n        var self = this;\n        // stop countdown\n        divElement.addEventListener(\n          \"mouseover\",\n          function(event) {\n            window.clearTimeout(divElement.timeOutValue);\n          }\n        )\n        // add back the timeout\n        divElement.addEventListener(\n          \"mouseleave\",\n          function() {\n            divElement.timeOutValue = window.setTimeout(\n              function() {\n                // Remove the toast from DOM\n                self.removeElement(divElement);\n              },\n              self.options.duration\n            )\n          }\n        )\n      }\n\n      // Adding an on-click destination path\n      if (typeof this.options.destination !== \"undefined\") {\n        divElement.addEventListener(\n          \"click\",\n          function(event) {\n            event.stopPropagation();\n            if (this.options.newWindow === true) {\n              window.open(this.options.destination, \"_blank\");\n            } else {\n              window.location = this.options.destination;\n            }\n          }.bind(this)\n        );\n      }\n\n      if (typeof this.options.onClick === \"function\" && typeof this.options.destination === \"undefined\") {\n        divElement.addEventListener(\n          \"click\",\n          function(event) {\n            event.stopPropagation();\n            this.options.onClick();\n          }.bind(this)\n        );\n      }\n\n      // Adding offset\n      if(typeof this.options.offset === \"object\") {\n\n        var x = getAxisOffsetAValue(\"x\", this.options);\n        var y = getAxisOffsetAValue(\"y\", this.options);\n\n        var xOffset = this.options.position == \"left\" ? x : \"-\" + x;\n        var yOffset = this.options.gravity == \"toastify-top\" ? y : \"-\" + y;\n\n        divElement.style.transform = \"translate(\" + xOffset + \",\" + yOffset + \")\";\n\n      }\n\n      // Returning the generated element\n      return divElement;\n    },\n\n    // Displaying the toast\n    showToast: function() {\n      // Creating the DOM object for the toast\n      this.toastElement = this.buildToast();\n\n      // Getting the root element to with the toast needs to be added\n      var rootElement;\n      if (typeof this.options.selector === \"string\") {\n        rootElement = document.getElementById(this.options.selector);\n      } else if (this.options.selector instanceof HTMLElement || (typeof ShadowRoot !== 'undefined' && this.options.selector instanceof ShadowRoot)) {\n        rootElement = this.options.selector;\n      } else {\n        rootElement = document.body;\n      }\n\n      // Validating if root element is present in DOM\n      if (!rootElement) {\n        throw \"Root element is not defined\";\n      }\n\n      // Adding the DOM element\n      var elementToInsert = Toastify.defaults.oldestFirst ? rootElement.firstChild : rootElement.lastChild;\n      rootElement.insertBefore(this.toastElement, elementToInsert);\n\n      // Repositioning the toasts in case multiple toasts are present\n      Toastify.reposition();\n\n      if (this.options.duration > 0) {\n        this.toastElement.timeOutValue = window.setTimeout(\n          function() {\n            // Remove the toast from DOM\n            this.removeElement(this.toastElement);\n          }.bind(this),\n          this.options.duration\n        ); // Binding `this` for function invocation\n      }\n\n      // Supporting function chaining\n      return this;\n    },\n\n    hideToast: function() {\n      if (this.toastElement.timeOutValue) {\n        clearTimeout(this.toastElement.timeOutValue);\n      }\n      this.removeElement(this.toastElement);\n    },\n\n    // Removing the element from the DOM\n    removeElement: function(toastElement) {\n      // Hiding the element\n      // toastElement.classList.remove(\"on\");\n      toastElement.className = toastElement.className.replace(\" on\", \"\");\n\n      // Removing the element from DOM after transition end\n      window.setTimeout(\n        function() {\n          // remove options node if any\n          if (this.options.node && this.options.node.parentNode) {\n            this.options.node.parentNode.removeChild(this.options.node);\n          }\n\n          // Remove the element from the DOM, only when the parent node was not removed before.\n          if (toastElement.parentNode) {\n            toastElement.parentNode.removeChild(toastElement);\n          }\n\n          // Calling the callback function\n          this.options.callback.call(toastElement);\n\n          // Repositioning the toasts again\n          Toastify.reposition();\n        }.bind(this),\n        400\n      ); // Binding `this` for function invocation\n    },\n  };\n\n  // Positioning the toasts on the DOM\n  Toastify.reposition = function() {\n\n    // Top margins with gravity\n    var topLeftOffsetSize = {\n      top: 15,\n      bottom: 15,\n    };\n    var topRightOffsetSize = {\n      top: 15,\n      bottom: 15,\n    };\n    var offsetSize = {\n      top: 15,\n      bottom: 15,\n    };\n\n    // Get all toast messages on the DOM\n    var allToasts = document.getElementsByClassName(\"toastify\");\n\n    var classUsed;\n\n    // Modifying the position of each toast element\n    for (var i = 0; i < allToasts.length; i++) {\n      // Getting the applied gravity\n      if (containsClass(allToasts[i], \"toastify-top\") === true) {\n        classUsed = \"toastify-top\";\n      } else {\n        classUsed = \"toastify-bottom\";\n      }\n\n      var height = allToasts[i].offsetHeight;\n      classUsed = classUsed.substr(9, classUsed.length-1)\n      // Spacing between toasts\n      var offset = 15;\n\n      var width = window.innerWidth > 0 ? window.innerWidth : screen.width;\n\n      // Show toast in center if screen with less than or equal to 360px\n      if (width <= 360) {\n        // Setting the position\n        allToasts[i].style[classUsed] = offsetSize[classUsed] + \"px\";\n\n        offsetSize[classUsed] += height + offset;\n      } else {\n        if (containsClass(allToasts[i], \"toastify-left\") === true) {\n          // Setting the position\n          allToasts[i].style[classUsed] = topLeftOffsetSize[classUsed] + \"px\";\n\n          topLeftOffsetSize[classUsed] += height + offset;\n        } else {\n          // Setting the position\n          allToasts[i].style[classUsed] = topRightOffsetSize[classUsed] + \"px\";\n\n          topRightOffsetSize[classUsed] += height + offset;\n        }\n      }\n    }\n\n    // Supporting function chaining\n    return this;\n  };\n\n  // Helper function to get offset.\n  function getAxisOffsetAValue(axis, options) {\n\n    if(options.offset[axis]) {\n      if(isNaN(options.offset[axis])) {\n        return options.offset[axis];\n      }\n      else {\n        return options.offset[axis] + 'px';\n      }\n    }\n\n    return '0px';\n\n  }\n\n  function containsClass(elem, yourClass) {\n    if (!elem || typeof yourClass !== \"string\") {\n      return false;\n    } else if (\n      elem.className &&\n      elem.className\n        .trim()\n        .split(/\\s+/gi)\n        .indexOf(yourClass) > -1\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // Setting up the prototype for the init object\n  Toastify.lib.init.prototype = Toastify.lib;\n\n  // Returning the Toastify function to be assigned to the window object/module\n  return Toastify;\n});\n","import Toastify from 'toastify-js';\n\nwindow._showToast = showToast;\n\nfunction showToast(props) {\n  if (typeof props === 'string') {\n    props = { text: props };\n  }\n  const { onClick, delay, ...rest } = props;\n  const toast = Toastify({\n    className: `${onClick || props.destination ? 'shiny-pill' : ''}`,\n    gravity: 'bottom',\n    position: 'center',\n    ...rest,\n    onClick: () => {\n      onClick?.(toast); // Pass in the object itself!\n    },\n  });\n  if (delay) {\n    setTimeout(() => {\n      toast.showToast();\n    }, delay);\n  } else {\n    toast.showToast();\n  }\n  return toast;\n}\n\nexport default showToast;\n","import { useEffect, useRef } from 'preact/hooks';\n\nfunction useInterval(fn, delay, deps, immediate) {\n  const savedCallback = useRef(fn);\n  useEffect(() => {\n    savedCallback.current = fn;\n  }, [fn, deps]);\n\n  useEffect(() => {\n    if (!immediate || delay === null || delay === false) return;\n    savedCallback.current();\n  }, [immediate]);\n\n  useEffect(() => {\n    if (delay === null || delay === false) return;\n    const tick = () => savedCallback.current();\n    const id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n\nexport default useInterval;\n","import { unstable_batchedUpdates } from 'react-dom';\n\nconst isMenuOpen = state => !!state && state[0] === 'o';\nconst batchedUpdates = unstable_batchedUpdates;\nconst getTransition = (transition, name) => transition === true || !!(transition && transition[name]);\nconst safeCall = (fn, arg) => typeof fn === 'function' ? fn(arg) : fn;\nconst internalKey = '_szhsinMenu';\nconst getName = component => component[internalKey];\nconst defineName = (name, component) => Object.defineProperty(component, internalKey, {\n  value: name\n});\nconst mergeProps = (target, source) => {\n  source && Object.keys(source).forEach(key => {\n    const targetProp = target[key];\n    const sourceProp = source[key];\n    if (typeof sourceProp === 'function' && targetProp) {\n      target[key] = (...arg) => {\n        sourceProp(...arg);\n        targetProp(...arg);\n      };\n    } else {\n      target[key] = sourceProp;\n    }\n  });\n  return target;\n};\nconst parsePadding = paddingStr => {\n  if (typeof paddingStr !== 'string') return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n  const padding = paddingStr.trim().split(/\\s+/, 4).map(parseFloat);\n  const top = !isNaN(padding[0]) ? padding[0] : 0;\n  const right = !isNaN(padding[1]) ? padding[1] : top;\n  return {\n    top,\n    right,\n    bottom: !isNaN(padding[2]) ? padding[2] : top,\n    left: !isNaN(padding[3]) ? padding[3] : right\n  };\n};\nconst getScrollAncestor = node => {\n  while (node) {\n    node = node.parentNode;\n    if (!node || node === document.body || !node.parentNode) return;\n    const {\n      overflow,\n      overflowX,\n      overflowY\n    } = getComputedStyle(node);\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) return node;\n  }\n};\nfunction commonProps(isDisabled, isHovering) {\n  return {\n    'aria-disabled': isDisabled || undefined,\n    tabIndex: isHovering ? 0 : -1\n  };\n}\nfunction indexOfNode(nodeList, node) {\n  for (let i = 0; i < nodeList.length; i++) {\n    if (nodeList[i] === node) return i;\n  }\n  return -1;\n}\n\nexport { batchedUpdates, commonProps, defineName, getName, getScrollAncestor, getTransition, indexOfNode, isMenuOpen, mergeProps, parsePadding, safeCall };\n","import { useMemo } from 'react';\n\nconst useBEM = ({\n  block,\n  element,\n  modifiers,\n  className\n}) => useMemo(() => {\n  const blockElement = element ? `${block}__${element}` : block;\n  let classString = blockElement;\n  modifiers && Object.keys(modifiers).forEach(name => {\n    const value = modifiers[name];\n    if (value) classString += ` ${blockElement}--${value === true ? name : `${name}-${value}`}`;\n  });\n  let expandedClassName = typeof className === 'function' ? className(modifiers) : className;\n  if (typeof expandedClassName === 'string') {\n    expandedClassName = expandedClassName.trim();\n    if (expandedClassName) classString += ` ${expandedClassName}`;\n  }\n  return classString;\n}, [block, element, modifiers, className]);\n\nexport { useBEM };\n","import { createContext } from 'react';\n\nconst menuContainerClass = 'szh-menu-container';\nconst menuClass = 'szh-menu';\nconst menuButtonClass = 'szh-menu-button';\nconst menuArrowClass = 'arrow';\nconst menuItemClass = 'item';\nconst menuDividerClass = 'divider';\nconst menuHeaderClass = 'header';\nconst menuGroupClass = 'group';\nconst subMenuClass = 'submenu';\nconst radioGroupClass = 'radio-group';\nconst HoverItemContext = /*#__PURE__*/createContext();\nconst MenuListItemContext = /*#__PURE__*/createContext({});\nconst MenuListContext = /*#__PURE__*/createContext({});\nconst EventHandlersContext = /*#__PURE__*/createContext({});\nconst RadioGroupContext = /*#__PURE__*/createContext({});\nconst SettingsContext = /*#__PURE__*/createContext({});\nconst Keys = /*#__PURE__*/Object.freeze({\n  ENTER: 'Enter',\n  ESC: 'Escape',\n  SPACE: ' ',\n  HOME: 'Home',\n  END: 'End',\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight',\n  UP: 'ArrowUp',\n  DOWN: 'ArrowDown'\n});\nconst HoverActionTypes = /*#__PURE__*/Object.freeze({\n  RESET: 0,\n  SET: 1,\n  UNSET: 2,\n  INCREASE: 3,\n  DECREASE: 4,\n  FIRST: 5,\n  LAST: 6,\n  SET_INDEX: 7\n});\nconst CloseReason = /*#__PURE__*/Object.freeze({\n  CLICK: 'click',\n  CANCEL: 'cancel',\n  BLUR: 'blur',\n  SCROLL: 'scroll'\n});\nconst FocusPositions = /*#__PURE__*/Object.freeze({\n  FIRST: 'first',\n  LAST: 'last'\n});\nconst MenuStateMap = /*#__PURE__*/Object.freeze({\n  entering: 'opening',\n  entered: 'open',\n  exiting: 'closing',\n  exited: 'closed'\n});\nconst positionAbsolute = 'absolute';\nconst roleNone = 'none';\nconst roleMenuitem = 'menuitem';\nconst noScrollFocus = {\n  preventScroll: true\n};\n\nexport { CloseReason, EventHandlersContext, FocusPositions, HoverActionTypes, HoverItemContext, Keys, MenuListContext, MenuListItemContext, MenuStateMap, RadioGroupContext, SettingsContext, menuArrowClass, menuButtonClass, menuClass, menuContainerClass, menuDividerClass, menuGroupClass, menuHeaderClass, menuItemClass, noScrollFocus, positionAbsolute, radioGroupClass, roleMenuitem, roleNone, subMenuClass };\n","import { useMemo } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { mergeProps, getTransition, safeCall } from '../utils/utils.mjs';\nimport { menuContainerClass, CloseReason, Keys } from '../utils/constants.mjs';\n\nconst MenuContainer = ({\n  className,\n  containerRef,\n  containerProps,\n  children,\n  isOpen,\n  theming,\n  transition,\n  onClose\n}) => {\n  const itemTransition = getTransition(transition, 'item');\n  const onKeyDown = ({\n    key\n  }) => {\n    switch (key) {\n      case Keys.ESC:\n        safeCall(onClose, {\n          key,\n          reason: CloseReason.CANCEL\n        });\n        break;\n    }\n  };\n  const onBlur = e => {\n    if (isOpen && !e.currentTarget.contains(e.relatedTarget)) {\n      safeCall(onClose, {\n        reason: CloseReason.BLUR\n      });\n    }\n  };\n  return /*#__PURE__*/jsx(\"div\", {\n    ...mergeProps({\n      onKeyDown,\n      onBlur\n    }, containerProps),\n    className: useBEM({\n      block: menuContainerClass,\n      modifiers: useMemo(() => ({\n        theme: theming,\n        itemTransition\n      }), [theming, itemTransition]),\n      className\n    }),\n    style: {\n      position: 'absolute',\n      ...containerProps?.style\n    },\n    ref: containerRef,\n    children: children\n  });\n};\n\nexport { MenuContainer };\n","const createSubmenuCtx = () => {\n  let timer,\n    count = 0;\n  return {\n    toggle: isOpen => {\n      isOpen ? count++ : count--;\n      count = Math.max(count, 0);\n    },\n    on: (closeDelay, pending, settled) => {\n      if (count) {\n        if (!timer) timer = setTimeout(() => {\n          timer = 0;\n          pending();\n        }, closeDelay);\n      } else {\n        settled?.();\n      }\n    },\n    off: () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = 0;\n      }\n    }\n  };\n};\n\nexport { createSubmenuCtx };\n","import { useState, useRef, useCallback } from 'react';\nimport { noScrollFocus, HoverActionTypes } from '../utils/constants.mjs';\nimport { indexOfNode } from '../utils/utils.mjs';\n\nconst useItems = menuRef => {\n  const [hoverItem, setHoverItem] = useState();\n  const stateRef = useRef({\n    items: [],\n    hoverIndex: -1,\n    sorted: false\n  });\n  const mutableState = stateRef.current;\n  const updateItems = useCallback((item, isMounted) => {\n    const {\n      items\n    } = mutableState;\n    if (!item) {\n      mutableState.items = [];\n    } else if (isMounted) {\n      items.push(item);\n    } else {\n      const index = items.indexOf(item);\n      if (index > -1) {\n        items.splice(index, 1);\n        if (item.contains(document.activeElement)) {\n          menuRef.current.focus(noScrollFocus);\n          setHoverItem();\n        }\n      }\n    }\n    mutableState.hoverIndex = -1;\n    mutableState.sorted = false;\n  }, [mutableState, menuRef]);\n  const dispatch = useCallback((actionType, item, nextIndex) => {\n    const {\n      items,\n      hoverIndex\n    } = mutableState;\n    const sortItems = () => {\n      if (mutableState.sorted) return;\n      const orderedNodes = menuRef.current.querySelectorAll('.szh-menu__item');\n      items.sort((a, b) => indexOfNode(orderedNodes, a) - indexOfNode(orderedNodes, b));\n      mutableState.sorted = true;\n    };\n    let index = -1,\n      newItem = undefined;\n    switch (actionType) {\n      case HoverActionTypes.RESET:\n        break;\n      case HoverActionTypes.SET:\n        newItem = item;\n        break;\n      case HoverActionTypes.UNSET:\n        newItem = prevItem => prevItem === item ? undefined : prevItem;\n        break;\n      case HoverActionTypes.FIRST:\n        sortItems();\n        index = 0;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.LAST:\n        sortItems();\n        index = items.length - 1;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.SET_INDEX:\n        sortItems();\n        index = nextIndex;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.INCREASE:\n        sortItems();\n        index = hoverIndex;\n        if (index < 0) index = items.indexOf(item);\n        index++;\n        if (index >= items.length) index = 0;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.DECREASE:\n        sortItems();\n        index = hoverIndex;\n        if (index < 0) index = items.indexOf(item);\n        index--;\n        if (index < 0) index = items.length - 1;\n        newItem = items[index];\n        break;\n      default:\n        if (process.env.NODE_ENV !== 'production') throw new Error(`[React-Menu] Unknown hover action type: ${actionType}`);\n    }\n    if (!newItem) index = -1;\n    setHoverItem(newItem);\n    mutableState.hoverIndex = index;\n  }, [menuRef, mutableState]);\n  return {\n    hoverItem,\n    dispatch,\n    updateItems\n  };\n};\n\nexport { useItems };\n","const getNativeDimension = (transformed, untransformed) => Math.round(transformed) === untransformed ? transformed : untransformed;\nconst getNormalizedClientRect = element => {\n  const rect = element.getBoundingClientRect();\n  rect.width = getNativeDimension(rect.width, element.offsetWidth);\n  rect.height = getNativeDimension(rect.height, element.offsetHeight);\n  return rect;\n};\n\nexport { getNormalizedClientRect };\n","import { getNormalizedClientRect } from './getNormalizedClientRect.mjs';\nimport { parsePadding } from '../utils/utils.mjs';\n\nconst getPositionHelpers = (containerElt, menuElt, menuScroll, boundingBoxPadding) => {\n  const menuRect = getNormalizedClientRect(menuElt);\n  const containerRect = containerElt.getBoundingClientRect();\n  const boundingRect = menuScroll === window ? {\n    left: 0,\n    top: 0,\n    right: document.documentElement.clientWidth,\n    bottom: window.innerHeight\n  } : menuScroll.getBoundingClientRect();\n  const padding = parsePadding(boundingBoxPadding);\n  const getLeftOverflow = x => x + containerRect.left - boundingRect.left - padding.left;\n  const getRightOverflow = x => x + containerRect.left + menuRect.width - boundingRect.right + padding.right;\n  const getTopOverflow = y => y + containerRect.top - boundingRect.top - padding.top;\n  const getBottomOverflow = y => y + containerRect.top + menuRect.height - boundingRect.bottom + padding.bottom;\n  const confineHorizontally = x => {\n    let leftOverflow = getLeftOverflow(x);\n    if (leftOverflow < 0) {\n      x -= leftOverflow;\n    } else {\n      const rightOverflow = getRightOverflow(x);\n      if (rightOverflow > 0) {\n        x -= rightOverflow;\n        leftOverflow = getLeftOverflow(x);\n        if (leftOverflow < 0) x -= leftOverflow;\n      }\n    }\n    return x;\n  };\n  const confineVertically = y => {\n    let topOverflow = getTopOverflow(y);\n    if (topOverflow < 0) {\n      y -= topOverflow;\n    } else {\n      const bottomOverflow = getBottomOverflow(y);\n      if (bottomOverflow > 0) {\n        y -= bottomOverflow;\n        topOverflow = getTopOverflow(y);\n        if (topOverflow < 0) y -= topOverflow;\n      }\n    }\n    return y;\n  };\n  return {\n    menuRect,\n    containerRect,\n    getLeftOverflow,\n    getRightOverflow,\n    getTopOverflow,\n    getBottomOverflow,\n    confineHorizontally,\n    confineVertically\n  };\n};\n\nexport { getPositionHelpers };\n","const placeArrowVertical = ({\n  arrowRef,\n  menuY,\n  anchorRect,\n  containerRect,\n  menuRect\n}) => {\n  let y = anchorRect.top - containerRect.top - menuY + anchorRect.height / 2;\n  const offset = arrowRef.current.offsetHeight * 1.25;\n  y = Math.max(offset, y);\n  y = Math.min(y, menuRect.height - offset);\n  return y;\n};\n\nexport { placeArrowVertical };\n","import { placeArrowVertical } from './placeArrowVertical.mjs';\n\nconst placeLeftorRight = ({\n  anchorRect,\n  containerRect,\n  menuRect,\n  placeLeftorRightY,\n  placeLeftX,\n  placeRightX,\n  getLeftOverflow,\n  getRightOverflow,\n  confineHorizontally,\n  confineVertically,\n  arrowRef,\n  arrow,\n  direction,\n  position\n}) => {\n  let computedDirection = direction;\n  let y = placeLeftorRightY;\n  if (position !== 'initial') {\n    y = confineVertically(y);\n    if (position === 'anchor') {\n      y = Math.min(y, anchorRect.bottom - containerRect.top);\n      y = Math.max(y, anchorRect.top - containerRect.top - menuRect.height);\n    }\n  }\n  let x, leftOverflow, rightOverflow;\n  if (computedDirection === 'left') {\n    x = placeLeftX;\n    if (position !== 'initial') {\n      leftOverflow = getLeftOverflow(x);\n      if (leftOverflow < 0) {\n        rightOverflow = getRightOverflow(placeRightX);\n        if (rightOverflow <= 0 || -leftOverflow > rightOverflow) {\n          x = placeRightX;\n          computedDirection = 'right';\n        }\n      }\n    }\n  } else {\n    x = placeRightX;\n    if (position !== 'initial') {\n      rightOverflow = getRightOverflow(x);\n      if (rightOverflow > 0) {\n        leftOverflow = getLeftOverflow(placeLeftX);\n        if (leftOverflow >= 0 || -leftOverflow < rightOverflow) {\n          x = placeLeftX;\n          computedDirection = 'left';\n        }\n      }\n    }\n  }\n  if (position === 'auto') x = confineHorizontally(x);\n  const arrowY = arrow ? placeArrowVertical({\n    menuY: y,\n    arrowRef,\n    anchorRect,\n    containerRect,\n    menuRect\n  }) : undefined;\n  return {\n    arrowY,\n    x,\n    y,\n    computedDirection\n  };\n};\n\nexport { placeLeftorRight };\n","const placeArrowHorizontal = ({\n  arrowRef,\n  menuX,\n  anchorRect,\n  containerRect,\n  menuRect\n}) => {\n  let x = anchorRect.left - containerRect.left - menuX + anchorRect.width / 2;\n  const offset = arrowRef.current.offsetWidth * 1.25;\n  x = Math.max(offset, x);\n  x = Math.min(x, menuRect.width - offset);\n  return x;\n};\n\nexport { placeArrowHorizontal };\n","import { placeArrowHorizontal } from './placeArrowHorizontal.mjs';\n\nconst placeToporBottom = ({\n  anchorRect,\n  containerRect,\n  menuRect,\n  placeToporBottomX,\n  placeTopY,\n  placeBottomY,\n  getTopOverflow,\n  getBottomOverflow,\n  confineHorizontally,\n  confineVertically,\n  arrowRef,\n  arrow,\n  direction,\n  position\n}) => {\n  let computedDirection = direction === 'top' ? 'top' : 'bottom';\n  let x = placeToporBottomX;\n  if (position !== 'initial') {\n    x = confineHorizontally(x);\n    if (position === 'anchor') {\n      x = Math.min(x, anchorRect.right - containerRect.left);\n      x = Math.max(x, anchorRect.left - containerRect.left - menuRect.width);\n    }\n  }\n  let y, topOverflow, bottomOverflow;\n  if (computedDirection === 'top') {\n    y = placeTopY;\n    if (position !== 'initial') {\n      topOverflow = getTopOverflow(y);\n      if (topOverflow < 0) {\n        bottomOverflow = getBottomOverflow(placeBottomY);\n        if (bottomOverflow <= 0 || -topOverflow > bottomOverflow) {\n          y = placeBottomY;\n          computedDirection = 'bottom';\n        }\n      }\n    }\n  } else {\n    y = placeBottomY;\n    if (position !== 'initial') {\n      bottomOverflow = getBottomOverflow(y);\n      if (bottomOverflow > 0) {\n        topOverflow = getTopOverflow(placeTopY);\n        if (topOverflow >= 0 || -topOverflow < bottomOverflow) {\n          y = placeTopY;\n          computedDirection = 'top';\n        }\n      }\n    }\n  }\n  if (position === 'auto') y = confineVertically(y);\n  const arrowX = arrow ? placeArrowHorizontal({\n    menuX: x,\n    arrowRef,\n    anchorRect,\n    containerRect,\n    menuRect\n  }) : undefined;\n  return {\n    arrowX,\n    x,\n    y,\n    computedDirection\n  };\n};\n\nexport { placeToporBottom };\n","import { placeLeftorRight } from './placeLeftorRight.mjs';\nimport { placeToporBottom } from './placeToporBottom.mjs';\n\nconst positionMenu = ({\n  arrow,\n  align,\n  direction,\n  gap,\n  shift,\n  position,\n  anchorRect,\n  arrowRef,\n  positionHelpers\n}) => {\n  const {\n    menuRect,\n    containerRect\n  } = positionHelpers;\n  const isHorizontal = direction === 'left' || direction === 'right';\n  let horizontalOffset = isHorizontal ? gap : shift;\n  let verticalOffset = isHorizontal ? shift : gap;\n  if (arrow) {\n    const arrowElt = arrowRef.current;\n    if (isHorizontal) {\n      horizontalOffset += arrowElt.offsetWidth;\n    } else {\n      verticalOffset += arrowElt.offsetHeight;\n    }\n  }\n  const placeLeftX = anchorRect.left - containerRect.left - menuRect.width - horizontalOffset;\n  const placeRightX = anchorRect.right - containerRect.left + horizontalOffset;\n  const placeTopY = anchorRect.top - containerRect.top - menuRect.height - verticalOffset;\n  const placeBottomY = anchorRect.bottom - containerRect.top + verticalOffset;\n  let placeToporBottomX, placeLeftorRightY;\n  if (align === 'end') {\n    placeToporBottomX = anchorRect.right - containerRect.left - menuRect.width;\n    placeLeftorRightY = anchorRect.bottom - containerRect.top - menuRect.height;\n  } else if (align === 'center') {\n    placeToporBottomX = anchorRect.left - containerRect.left - (menuRect.width - anchorRect.width) / 2;\n    placeLeftorRightY = anchorRect.top - containerRect.top - (menuRect.height - anchorRect.height) / 2;\n  } else {\n    placeToporBottomX = anchorRect.left - containerRect.left;\n    placeLeftorRightY = anchorRect.top - containerRect.top;\n  }\n  placeToporBottomX += horizontalOffset;\n  placeLeftorRightY += verticalOffset;\n  const options = {\n    ...positionHelpers,\n    anchorRect,\n    placeLeftX,\n    placeRightX,\n    placeLeftorRightY,\n    placeTopY,\n    placeBottomY,\n    placeToporBottomX,\n    arrowRef,\n    arrow,\n    direction,\n    position\n  };\n  switch (direction) {\n    case 'left':\n    case 'right':\n      return placeLeftorRight(options);\n    case 'top':\n    case 'bottom':\n    default:\n      return placeToporBottom(options);\n  }\n};\n\nexport { positionMenu };\n","import { useLayoutEffect, useEffect } from 'react';\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect as useLayoutEffect };\n","import { useMemo } from 'react';\n\nfunction setRef(ref, instance) {\n  typeof ref === 'function' ? ref(instance) : ref.current = instance;\n}\nconst useCombinedRef = (refA, refB) => useMemo(() => {\n  if (!refA) return refB;\n  if (!refB) return refA;\n  return instance => {\n    setRef(refA, instance);\n    setRef(refB, instance);\n  };\n}, [refA, refB]);\n\nexport { useCombinedRef };\n","import { useState, useReducer, useContext, useRef, useCallback, useEffect, useMemo } from 'react';\nimport { flushSync } from 'react-dom';\nimport { MenuContainer } from './MenuContainer.mjs';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { createSubmenuCtx } from '../utils/submenuCtx.mjs';\nimport { SettingsContext, MenuListContext, HoverActionTypes, noScrollFocus, menuClass, menuArrowClass, positionAbsolute, MenuListItemContext, HoverItemContext, CloseReason, FocusPositions, Keys } from '../utils/constants.mjs';\nimport { useItems } from '../hooks/useItems.mjs';\nimport { getScrollAncestor, isMenuOpen, batchedUpdates, getTransition, mergeProps, commonProps, safeCall } from '../utils/utils.mjs';\nimport { getPositionHelpers } from '../positionUtils/getPositionHelpers.mjs';\nimport { positionMenu } from '../positionUtils/positionMenu.mjs';\nimport { useLayoutEffect as useIsomorphicLayoutEffect } from '../hooks/useIsomorphicLayoutEffect.mjs';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { useCombinedRef } from '../hooks/useCombinedRef.mjs';\n\nconst offScreen = -9999;\nconst MenuList = ({\n  ariaLabel,\n  menuClassName,\n  menuStyle,\n  arrow,\n  arrowProps = {},\n  anchorPoint,\n  anchorRef,\n  containerRef,\n  containerProps,\n  externalRef,\n  parentScrollingRef,\n  align = 'start',\n  direction = 'bottom',\n  position = 'auto',\n  overflow = 'visible',\n  setDownOverflow,\n  repositionFlag,\n  captureFocus = true,\n  state,\n  endTransition,\n  isDisabled,\n  menuItemFocus,\n  gap = 0,\n  shift = 0,\n  children,\n  onClose,\n  focusProps: _1,\n  ...restProps\n}) => {\n  const [menuPosition, setMenuPosition] = useState({\n    x: offScreen,\n    y: offScreen\n  });\n  const [arrowPosition, setArrowPosition] = useState({});\n  const [overflowData, setOverflowData] = useState();\n  const [expandedDirection, setExpandedDirection] = useState(direction);\n  const [submenuCtx] = useState(createSubmenuCtx);\n  const [reposSubmenu, forceReposSubmenu] = useReducer(c => c + 1, 1);\n  const {\n    transition,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef,\n    rootAnchorRef,\n    scrollNodesRef,\n    reposition,\n    viewScroll,\n    submenuCloseDelay\n  } = useContext(SettingsContext);\n  const {\n    submenuCtx: parentSubmenuCtx,\n    reposSubmenu: reposFlag = repositionFlag\n  } = useContext(MenuListContext);\n  const menuRef = useRef();\n  const arrowRef = useRef();\n  const prevOpen = useRef(false);\n  const {\n    hoverItem,\n    dispatch,\n    updateItems\n  } = useItems(menuRef);\n  const isOpen = isMenuOpen(state);\n  const openTransition = getTransition(transition, 'open');\n  const closeTransition = getTransition(transition, 'close');\n  const scrollNodes = scrollNodesRef.current;\n  const onKeyDown = e => {\n    switch (e.key) {\n      case Keys.HOME:\n        dispatch(HoverActionTypes.FIRST);\n        break;\n      case Keys.END:\n        dispatch(HoverActionTypes.LAST);\n        break;\n      case Keys.UP:\n        dispatch(HoverActionTypes.DECREASE, hoverItem);\n        break;\n      case Keys.DOWN:\n        dispatch(HoverActionTypes.INCREASE, hoverItem);\n        break;\n      case Keys.SPACE:\n        if (e.target && e.target.className.indexOf(menuClass) !== -1) {\n          e.preventDefault();\n        }\n        return;\n      default:\n        return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const onAnimationEnd = () => {\n    if (state === 'closing') {\n      setOverflowData();\n    }\n    safeCall(endTransition);\n  };\n  const onPointerMove = e => {\n    e.stopPropagation();\n    submenuCtx.on(submenuCloseDelay, () => {\n      dispatch(HoverActionTypes.RESET);\n      menuRef.current.focus(noScrollFocus);\n    });\n  };\n  const onPointerLeave = e => {\n    if (e.target === e.currentTarget) submenuCtx.off();\n  };\n  const handlePosition = useCallback(noOverflowCheck => {\n    const menuElt = menuRef.current;\n    const containerElt = containerRef.current;\n    if (!menuElt || !containerElt) return;\n    const anchorRect = anchorRef ? anchorRef.current?.getBoundingClientRect() : anchorPoint ? {\n      left: anchorPoint.x,\n      right: anchorPoint.x,\n      top: anchorPoint.y,\n      bottom: anchorPoint.y,\n      width: 0,\n      height: 0\n    } : null;\n    if (!anchorRect) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('[React-Menu] Menu might not be positioned properly as one of the anchorRef or anchorPoint prop should be provided. If `anchorRef` is provided, the anchor must be mounted before menu is open.');\n      }\n      return;\n    }\n    if (!scrollNodes.menu) {\n      scrollNodes.menu = (boundingBoxRef ? boundingBoxRef.current : getScrollAncestor(rootMenuRef.current)) || window;\n    }\n    const positionHelpers = getPositionHelpers(containerElt, menuElt, scrollNodes.menu, boundingBoxPadding);\n    let {\n      arrowX,\n      arrowY,\n      x,\n      y,\n      computedDirection\n    } = positionMenu({\n      arrow,\n      align,\n      direction,\n      gap,\n      shift,\n      position,\n      anchorRect,\n      arrowRef,\n      positionHelpers\n    });\n    const {\n      menuRect\n    } = positionHelpers;\n    const menuHeight = menuRect.height;\n    if (!noOverflowCheck && overflow !== 'visible') {\n      const {\n        getTopOverflow,\n        getBottomOverflow\n      } = positionHelpers;\n      let height, overflowAmt;\n      const bottomOverflow = getBottomOverflow(y);\n      if (bottomOverflow > 0) {\n        height = menuHeight - bottomOverflow;\n        overflowAmt = bottomOverflow;\n      } else {\n        const topOverflow = getTopOverflow(y);\n        if (topOverflow < 0) {\n          height = menuHeight + topOverflow;\n          overflowAmt = 0 - topOverflow;\n          if (height >= 0) y -= topOverflow;\n        }\n      }\n      if (height >= 0) {\n        setOverflowData({\n          height,\n          overflowAmt\n        });\n      }\n    }\n    if (arrow) setArrowPosition({\n      x: arrowX,\n      y: arrowY\n    });\n    setMenuPosition({\n      x,\n      y\n    });\n    setExpandedDirection(computedDirection);\n  }, [arrow, align, boundingBoxPadding, direction, gap, shift, position, overflow, anchorPoint, anchorRef, containerRef, boundingBoxRef, rootMenuRef, scrollNodes]);\n  useIsomorphicLayoutEffect(() => {\n    if (isOpen) {\n      handlePosition();\n      if (prevOpen.current) forceReposSubmenu();\n    }\n    prevOpen.current = isOpen;\n  }, [isOpen, handlePosition, reposFlag]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowData && !setDownOverflow) menuRef.current.scrollTop = 0;\n  }, [overflowData, setDownOverflow]);\n  useIsomorphicLayoutEffect(() => updateItems, [updateItems]);\n  useEffect(() => {\n    let {\n      menu: menuScroll\n    } = scrollNodes;\n    if (!isOpen || !menuScroll) return;\n    menuScroll = menuScroll.addEventListener ? menuScroll : window;\n    if (!scrollNodes.anchors) {\n      scrollNodes.anchors = [];\n      let anchorScroll = getScrollAncestor(rootAnchorRef && rootAnchorRef.current);\n      while (anchorScroll && anchorScroll !== menuScroll) {\n        scrollNodes.anchors.push(anchorScroll);\n        anchorScroll = getScrollAncestor(anchorScroll);\n      }\n    }\n    let scroll = viewScroll;\n    if (scrollNodes.anchors.length && scroll === 'initial') scroll = 'auto';\n    if (scroll === 'initial') return;\n    const handleScroll = () => {\n      if (scroll === 'auto') {\n        batchedUpdates(() => handlePosition(true));\n      } else {\n        safeCall(onClose, {\n          reason: CloseReason.SCROLL\n        });\n      }\n    };\n    const scrollObservers = scrollNodes.anchors.concat(viewScroll !== 'initial' ? menuScroll : []);\n    scrollObservers.forEach(o => o.addEventListener('scroll', handleScroll));\n    return () => scrollObservers.forEach(o => o.removeEventListener('scroll', handleScroll));\n  }, [rootAnchorRef, scrollNodes, isOpen, onClose, viewScroll, handlePosition]);\n  const hasOverflow = !!overflowData && overflowData.overflowAmt > 0;\n  useEffect(() => {\n    if (hasOverflow || !isOpen || !parentScrollingRef) return;\n    const handleScroll = () => batchedUpdates(handlePosition);\n    const parentScroll = parentScrollingRef.current;\n    parentScroll.addEventListener('scroll', handleScroll);\n    return () => parentScroll.removeEventListener('scroll', handleScroll);\n  }, [isOpen, hasOverflow, parentScrollingRef, handlePosition]);\n  useEffect(() => {\n    if (!isOpen || typeof ResizeObserver !== 'function' || reposition === 'initial') return;\n    const targetList = [];\n    const resizeObserver = new ResizeObserver(entries => entries.forEach(({\n      target\n    }) => {\n      if (targetList.indexOf(target) < 0) {\n        targetList.push(target);\n      } else {\n        flushSync(() => {\n          handlePosition();\n          forceReposSubmenu();\n        });\n      }\n    }));\n    const resizeObserverOptions = {\n      box: 'border-box'\n    };\n    resizeObserver.observe(menuRef.current, resizeObserverOptions);\n    const anchor = anchorRef?.current;\n    anchor && resizeObserver.observe(anchor, resizeObserverOptions);\n    return () => resizeObserver.disconnect();\n  }, [isOpen, reposition, anchorRef, handlePosition]);\n  useEffect(() => {\n    if (!isOpen) {\n      dispatch(HoverActionTypes.RESET);\n      if (!closeTransition) setOverflowData();\n      return;\n    }\n    const {\n      position,\n      alwaysUpdate\n    } = menuItemFocus || {};\n    const setItemFocus = () => {\n      if (position === FocusPositions.FIRST) {\n        dispatch(HoverActionTypes.FIRST);\n      } else if (position === FocusPositions.LAST) {\n        dispatch(HoverActionTypes.LAST);\n      } else if (position >= -1) {\n        dispatch(HoverActionTypes.SET_INDEX, undefined, position);\n      }\n    };\n    if (alwaysUpdate) {\n      setItemFocus();\n    } else if (captureFocus) {\n      const id = setTimeout(() => {\n        const menuElt = menuRef.current;\n        if (menuElt && !menuElt.contains(document.activeElement)) {\n          menuElt.focus(noScrollFocus);\n          setItemFocus();\n        }\n      }, openTransition ? 170 : 100);\n      return () => clearTimeout(id);\n    }\n  }, [isOpen, openTransition, closeTransition, captureFocus, menuItemFocus, dispatch]);\n  const itemContext = useMemo(() => ({\n    isParentOpen: isOpen,\n    submenuCtx,\n    dispatch,\n    updateItems\n  }), [isOpen, submenuCtx, dispatch, updateItems]);\n  let maxHeight, overflowAmt;\n  if (overflowData) {\n    setDownOverflow ? overflowAmt = overflowData.overflowAmt : maxHeight = overflowData.height;\n  }\n  const listContext = useMemo(() => ({\n    reposSubmenu,\n    submenuCtx,\n    overflow,\n    overflowAmt,\n    parentMenuRef: menuRef,\n    parentDir: expandedDirection\n  }), [reposSubmenu, submenuCtx, overflow, overflowAmt, expandedDirection]);\n  const overflowStyle = maxHeight >= 0 ? {\n    maxHeight,\n    overflow\n  } : undefined;\n  const modifiers = useMemo(() => ({\n    state,\n    align,\n    dir: expandedDirection\n  }), [state, align, expandedDirection]);\n  const arrowModifiers = useMemo(() => ({\n    dir: expandedDirection\n  }), [expandedDirection]);\n  const _arrowClassName = useBEM({\n    block: menuClass,\n    element: menuArrowClass,\n    modifiers: arrowModifiers,\n    className: arrowProps.className\n  });\n  const menu = /*#__PURE__*/jsxs(\"ul\", {\n    role: \"menu\",\n    \"aria-label\": ariaLabel,\n    ...commonProps(isDisabled),\n    ...mergeProps({\n      onPointerEnter: parentSubmenuCtx?.off,\n      onPointerMove,\n      onPointerLeave,\n      onKeyDown,\n      onAnimationEnd\n    }, restProps),\n    ref: useCombinedRef(externalRef, menuRef),\n    className: useBEM({\n      block: menuClass,\n      modifiers,\n      className: menuClassName\n    }),\n    style: {\n      ...menuStyle,\n      ...overflowStyle,\n      margin: 0,\n      display: state === 'closed' ? 'none' : undefined,\n      position: positionAbsolute,\n      left: menuPosition.x,\n      top: menuPosition.y\n    },\n    children: [arrow && /*#__PURE__*/jsx(\"li\", {\n      \"aria-hidden\": true,\n      ...arrowProps,\n      className: _arrowClassName,\n      style: {\n        display: 'block',\n        position: positionAbsolute,\n        left: arrowPosition.x,\n        top: arrowPosition.y,\n        ...arrowProps.style\n      },\n      ref: arrowRef\n    }), /*#__PURE__*/jsx(MenuListContext.Provider, {\n      value: listContext,\n      children: /*#__PURE__*/jsx(MenuListItemContext.Provider, {\n        value: itemContext,\n        children: /*#__PURE__*/jsx(HoverItemContext.Provider, {\n          value: hoverItem,\n          children: safeCall(children, modifiers)\n        })\n      })\n    })]\n  });\n  return containerProps ? /*#__PURE__*/jsx(MenuContainer, {\n    ...containerProps,\n    isOpen: isOpen,\n    children: menu\n  }) : menu;\n};\n\nexport { MenuList };\n","import { forwardRef, useRef, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { MenuList } from './MenuList.mjs';\nimport { jsx } from 'react/jsx-runtime';\nimport { SettingsContext, EventHandlersContext, CloseReason, Keys } from '../utils/constants.mjs';\nimport { safeCall } from '../utils/utils.mjs';\n\nconst ControlledMenu = /*#__PURE__*/forwardRef(function ControlledMenu({\n  'aria-label': ariaLabel,\n  className,\n  containerProps,\n  initialMounted,\n  unmountOnClose,\n  transition,\n  transitionTimeout,\n  boundingBoxRef,\n  boundingBoxPadding,\n  reposition = 'auto',\n  submenuOpenDelay = 300,\n  submenuCloseDelay = 150,\n  viewScroll = 'initial',\n  portal,\n  theming,\n  onItemClick,\n  ...restProps\n}, externalRef) {\n  const containerRef = useRef(null);\n  const scrollNodesRef = useRef({});\n  const {\n    anchorRef,\n    state,\n    onClose\n  } = restProps;\n  const settings = useMemo(() => ({\n    initialMounted,\n    unmountOnClose,\n    transition,\n    transitionTimeout,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef: containerRef,\n    rootAnchorRef: anchorRef,\n    scrollNodesRef,\n    reposition,\n    viewScroll,\n    submenuOpenDelay,\n    submenuCloseDelay\n  }), [initialMounted, unmountOnClose, transition, transitionTimeout, anchorRef, boundingBoxRef, boundingBoxPadding, reposition, viewScroll, submenuOpenDelay, submenuCloseDelay]);\n  const eventHandlers = useMemo(() => ({\n    handleClick(event, isCheckorRadio) {\n      if (!event.stopPropagation) safeCall(onItemClick, event);\n      let keepOpen = event.keepOpen;\n      if (keepOpen === undefined) {\n        keepOpen = isCheckorRadio && event.key === Keys.SPACE;\n      }\n      if (!keepOpen) {\n        safeCall(onClose, {\n          value: event.value,\n          key: event.key,\n          reason: CloseReason.CLICK\n        });\n      }\n    },\n    handleClose(key) {\n      safeCall(onClose, {\n        key,\n        reason: CloseReason.CLICK\n      });\n    }\n  }), [onItemClick, onClose]);\n  if (!state) return null;\n  const menuList = /*#__PURE__*/jsx(SettingsContext.Provider, {\n    value: settings,\n    children: /*#__PURE__*/jsx(EventHandlersContext.Provider, {\n      value: eventHandlers,\n      children: /*#__PURE__*/jsx(MenuList, {\n        ...restProps,\n        ariaLabel: ariaLabel || 'Menu',\n        externalRef: externalRef,\n        containerRef: containerRef,\n        containerProps: {\n          className,\n          containerRef,\n          containerProps,\n          theming,\n          transition,\n          onClose\n        }\n      })\n    })\n  });\n  if (portal === true && typeof document !== 'undefined') {\n    return /*#__PURE__*/createPortal(menuList, document.body);\n  } else if (portal) {\n    return portal.target ? /*#__PURE__*/createPortal(menuList, portal.target) : portal.stablePosition ? null : menuList;\n  }\n  return menuList;\n});\n\nexport { ControlledMenu };\n","const PRE_ENTER = 0;\nconst ENTERING = 1;\nconst ENTERED = 2;\nconst PRE_EXIT = 3;\nconst EXITING = 4;\nconst EXITED = 5;\nconst UNMOUNTED = 6;\nconst STATUS = ['preEnter', 'entering', 'entered', 'preExit', 'exiting', 'exited', 'unmounted'];\nconst getState = status => ({\n  _s: status,\n  status: STATUS[status],\n  isEnter: status < PRE_EXIT,\n  isMounted: status !== UNMOUNTED,\n  isResolved: status === ENTERED || status > EXITING\n});\nconst startOrEnd = unmounted => unmounted ? UNMOUNTED : EXITED;\nconst getEndStatus = (status, unmountOnExit) => {\n  switch (status) {\n    case ENTERING:\n    case PRE_ENTER:\n      return ENTERED;\n    case EXITING:\n    case PRE_EXIT:\n      return startOrEnd(unmountOnExit);\n  }\n};\nconst getTimeout = timeout => typeof timeout === 'object' ? [timeout.enter, timeout.exit] : [timeout, timeout];\nconst nextTick = (transitState, status) => setTimeout(() => {\n  // Reading document.body.offsetTop can force browser to repaint before transition to the next state\n  isNaN(document.body.offsetTop) || transitState(status + 1);\n}, 0);\n\nexport { ENTERED, ENTERING, EXITED, EXITING, PRE_ENTER, PRE_EXIT, STATUS, UNMOUNTED, getEndStatus, getState, getTimeout, nextTick, startOrEnd };\n","import { useState, useRef, useCallback } from 'react';\nimport { getState, ENTERED, startOrEnd, getTimeout, getEndStatus, PRE_EXIT, nextTick, PRE_ENTER, EXITING, ENTERING } from './utils.mjs';\n\nconst updateState = (status, setState, latestState, timeoutId, onChange) => {\n  clearTimeout(timeoutId.current);\n  const state = getState(status);\n  setState(state);\n  latestState.current = state;\n  onChange && onChange({\n    current: state\n  });\n};\nconst useTransitionState = ({\n  enter = true,\n  exit = true,\n  preEnter,\n  preExit,\n  timeout,\n  initialEntered,\n  mountOnEnter,\n  unmountOnExit,\n  onStateChange: onChange\n} = {}) => {\n  const [state, setState] = useState(() => getState(initialEntered ? ENTERED : startOrEnd(mountOnEnter)));\n  const latestState = useRef(state);\n  const timeoutId = useRef();\n  const [enterTimeout, exitTimeout] = getTimeout(timeout);\n  const endTransition = useCallback(() => {\n    const status = getEndStatus(latestState.current._s, unmountOnExit);\n    status && updateState(status, setState, latestState, timeoutId, onChange);\n  }, [onChange, unmountOnExit]);\n  const toggle = useCallback(toEnter => {\n    const transitState = status => {\n      updateState(status, setState, latestState, timeoutId, onChange);\n      switch (status) {\n        case ENTERING:\n          if (enterTimeout >= 0) timeoutId.current = setTimeout(endTransition, enterTimeout);\n          break;\n        case EXITING:\n          if (exitTimeout >= 0) timeoutId.current = setTimeout(endTransition, exitTimeout);\n          break;\n        case PRE_ENTER:\n        case PRE_EXIT:\n          timeoutId.current = nextTick(transitState, status);\n          break;\n      }\n    };\n    const enterStage = latestState.current.isEnter;\n    if (typeof toEnter !== 'boolean') toEnter = !enterStage;\n    if (toEnter) {\n      !enterStage && transitState(enter ? preEnter ? PRE_ENTER : ENTERING : ENTERED);\n    } else {\n      enterStage && transitState(exit ? preExit ? PRE_EXIT : EXITING : startOrEnd(unmountOnExit));\n    }\n  }, [endTransition, onChange, enter, exit, preEnter, preExit, enterTimeout, exitTimeout, unmountOnExit]);\n  return [state, toggle, endTransition];\n};\n\nexport { useTransitionState };\n","import { useCallback } from 'react';\nimport { useTransitionState } from 'react-transition-state';\nimport { getTransition } from '../utils/utils.mjs';\nimport { MenuStateMap } from '../utils/constants.mjs';\n\nconst useMenuState = ({\n  initialOpen,\n  initialMounted,\n  unmountOnClose,\n  transition,\n  transitionTimeout = 500,\n  onMenuChange\n} = {}) => {\n  const enter = getTransition(transition, 'open');\n  const exit = getTransition(transition, 'close');\n  const [{\n    status\n  }, toggleMenu, endTransition] = useTransitionState({\n    initialEntered: initialOpen,\n    mountOnEnter: !initialMounted,\n    unmountOnExit: unmountOnClose,\n    timeout: transitionTimeout,\n    enter,\n    exit,\n    onStateChange: useCallback(({\n      current: {\n        isEnter,\n        isResolved\n      }\n    }) => {\n      if (!onMenuChange || isEnter && enter && isResolved || !isEnter && exit && isResolved) {\n        return;\n      }\n      onMenuChange({\n        open: isEnter\n      });\n    }, [onMenuChange, enter, exit])\n  });\n  return [{\n    state: MenuStateMap[status],\n    endTransition\n  }, toggleMenu];\n};\n\nexport { useMenuState };\n","import { useState } from 'react';\nimport { useMenuState } from './useMenuState.mjs';\n\nconst useMenuStateAndFocus = options => {\n  const [menuProps, toggleMenu] = useMenuState(options);\n  const [menuItemFocus, setMenuItemFocus] = useState();\n  const openMenu = (position, alwaysUpdate) => {\n    setMenuItemFocus({\n      position,\n      alwaysUpdate\n    });\n    toggleMenu(true);\n  };\n  return [{\n    menuItemFocus,\n    ...menuProps\n  }, toggleMenu, openMenu];\n};\n\nexport { useMenuStateAndFocus };\n","import { useState } from 'react';\n\nconst useClick = (state, onToggle) => {\n  if (process.env.NODE_ENV !== 'production' && typeof onToggle !== 'function') {\n    throw new Error('[React-Menu] useClick/useHover requires a function in the second parameter.');\n  }\n  const [skipOpen] = useState({});\n  return {\n    onMouseDown: () => {\n      skipOpen.v = state && state !== 'closed';\n    },\n    onClick: e => skipOpen.v ? skipOpen.v = false : onToggle(true, e)\n  };\n};\n\nexport { useClick };\n","import { forwardRef, useRef, useCallback, useImperativeHandle, Fragment, cloneElement, version } from 'react';\nimport { ControlledMenu } from './ControlledMenu.mjs';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { useMenuStateAndFocus } from '../hooks/useMenuStateAndFocus.mjs';\nimport { useClick } from '../hooks/useClick.mjs';\nimport { useCombinedRef } from '../hooks/useCombinedRef.mjs';\nimport { safeCall, mergeProps, isMenuOpen, getName } from '../utils/utils.mjs';\nimport { FocusPositions, Keys } from '../utils/constants.mjs';\n\nconst isLegacyReact = parseInt(version) < 19;\nconst Menu = /*#__PURE__*/forwardRef(function Menu({\n  'aria-label': ariaLabel,\n  captureFocus: _,\n  initialOpen: _1,\n  menuButton,\n  instanceRef,\n  onMenuChange,\n  ...restProps\n}, externalRef) {\n  const [stateProps, toggleMenu, openMenu] = useMenuStateAndFocus({\n    ...restProps,\n    onMenuChange\n  });\n  const {\n    state\n  } = stateProps;\n  const isOpen = isMenuOpen(state);\n  const buttonRef = useRef(null);\n  const anchorProps = useClick(state, (_, e) => openMenu(!e.detail ? FocusPositions.FIRST : undefined));\n  const handleClose = useCallback(e => {\n    toggleMenu(false);\n    if (e.key) buttonRef.current.focus();\n  }, [toggleMenu]);\n  const onKeyDown = e => {\n    switch (e.key) {\n      case Keys.UP:\n        openMenu(FocusPositions.LAST);\n        break;\n      case Keys.DOWN:\n        openMenu(FocusPositions.FIRST);\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n  };\n  const button = safeCall(menuButton, {\n    open: isOpen\n  });\n  if (!button || !button.type) throw new Error('Menu requires a menuButton prop.');\n  const buttonProps = {\n    ...mergeProps({\n      onKeyDown,\n      ...anchorProps\n    }, button.props),\n    ref: useCombinedRef(isLegacyReact ? button.ref : button.props.ref, buttonRef)\n  };\n  if (getName(button.type) === 'MenuButton') {\n    buttonProps.isOpen = isOpen;\n  }\n  const renderButton = /*#__PURE__*/cloneElement(button, buttonProps);\n  useImperativeHandle(instanceRef, () => ({\n    openMenu,\n    closeMenu: () => toggleMenu(false)\n  }));\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [renderButton, /*#__PURE__*/jsx(ControlledMenu, {\n      ...restProps,\n      ...stateProps,\n      \"aria-label\": ariaLabel || (typeof button.props.children === 'string' ? button.props.children : 'Menu'),\n      anchorRef: buttonRef,\n      ref: externalRef,\n      onClose: handleClose\n    })]\n  });\n});\n\nexport { Menu };\n","import { forwardRef, useRef, memo, useContext } from 'react';\nimport { HoverItemContext } from './constants.mjs';\nimport { jsx } from 'react/jsx-runtime';\n\nconst withHovering = (name, WrappedComponent) => {\n  const Component = /*#__PURE__*/memo(WrappedComponent);\n  const WithHovering = /*#__PURE__*/forwardRef((props, ref) => {\n    const itemRef = useRef(null);\n    return /*#__PURE__*/jsx(Component, {\n      ...props,\n      itemRef: itemRef,\n      externalRef: ref,\n      isHovering: useContext(HoverItemContext) === itemRef.current\n    });\n  });\n  WithHovering.displayName = `WithHovering(${name})`;\n  return WithHovering;\n};\n\nexport { withHovering };\n","import { useState, useEffect } from 'react';\n\nconst useMouseOver = isHovering => {\n  const [mouseOver, setMouseOver] = useState(false);\n  useEffect(() => {\n    !isHovering && setMouseOver(false);\n  }, [isHovering]);\n  return [mouseOver, () => !mouseOver && setMouseOver(true), () => setMouseOver(false)];\n};\n\nexport { useMouseOver };\n","import { useLayoutEffect as useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.mjs';\n\nconst useItemEffect = (isDisabled, itemRef, updateItems) => {\n  useIsomorphicLayoutEffect(() => {\n    if (process.env.NODE_ENV !== 'production' && !updateItems) {\n      throw new Error(`[React-Menu] This menu item or submenu should be rendered under a menu: ${itemRef.current.outerHTML}`);\n    }\n    if (isDisabled) return;\n    const item = itemRef.current;\n    updateItems(item, true);\n    return () => {\n      updateItems(item);\n    };\n  }, [isDisabled, itemRef, updateItems]);\n};\n\nexport { useItemEffect };\n","import { useContext, useRef, useState, useEffect, useImperativeHandle, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { MenuList } from './MenuList.mjs';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { withHovering } from '../utils/withHovering.mjs';\nimport { useMenuStateAndFocus } from '../hooks/useMenuStateAndFocus.mjs';\nimport { useMouseOver } from '../hooks/useMouseOver.mjs';\nimport { useItemEffect } from '../hooks/useItemEffect.mjs';\nimport { SettingsContext, MenuListContext, MenuListItemContext, roleNone, roleMenuitem, menuClass, menuItemClass, subMenuClass, HoverActionTypes, Keys, FocusPositions } from '../utils/constants.mjs';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { useCombinedRef } from '../hooks/useCombinedRef.mjs';\nimport { isMenuOpen, mergeProps, commonProps, safeCall, batchedUpdates } from '../utils/utils.mjs';\n\nconst SubMenu = /*#__PURE__*/withHovering('SubMenu', function SubMenu({\n  'aria-label': ariaLabel,\n  className,\n  disabled,\n  direction,\n  label,\n  openTrigger,\n  onMenuChange,\n  isHovering,\n  instanceRef,\n  itemRef,\n  captureFocus: _1,\n  repositionFlag: _2,\n  itemProps = {},\n  portal = false,\n  ...restProps\n}) {\n  const settings = useContext(SettingsContext);\n  const {\n    rootMenuRef,\n    submenuOpenDelay,\n    submenuCloseDelay\n  } = settings;\n  const {\n    parentMenuRef,\n    parentDir,\n    overflow: parentOverflow\n  } = useContext(MenuListContext);\n  const {\n    isParentOpen,\n    submenuCtx,\n    dispatch,\n    updateItems\n  } = useContext(MenuListItemContext);\n  const isPortal = portal || parentOverflow !== 'visible';\n  const [stateProps, toggleMenu, _openMenu] = useMenuStateAndFocus({\n    ...settings,\n    onMenuChange\n  });\n  const [mouseOver, mouseOverStart, mouseOverEnd] = useMouseOver(isHovering);\n  const {\n    state\n  } = stateProps;\n  const isDisabled = !!disabled;\n  const isOpen = isMenuOpen(state);\n  const containerRef = useRef(null);\n  const [timerId] = useState({\n    v: 0\n  });\n  const stopTimer = () => {\n    submenuCtx.off();\n    if (timerId.v) {\n      clearTimeout(timerId.v);\n      timerId.v = 0;\n    }\n  };\n  const openMenu = (...args) => {\n    stopTimer();\n    setHover();\n    !isDisabled && _openMenu(...args);\n  };\n  const setHover = () => !isHovering && !isDisabled && dispatch(HoverActionTypes.SET, itemRef.current);\n  const delayOpen = delay => {\n    setHover();\n    if (!openTrigger) timerId.v = setTimeout(() => batchedUpdates(openMenu), Math.max(delay, 0));\n  };\n  const onPointerMove = e => {\n    if (isDisabled) return;\n    e.stopPropagation();\n    mouseOverStart();\n    if (timerId.v || isOpen) return;\n    submenuCtx.on(submenuCloseDelay, () => delayOpen(submenuOpenDelay - submenuCloseDelay), () => delayOpen(submenuOpenDelay));\n  };\n  const onPointerLeave = () => {\n    mouseOverEnd();\n    stopTimer();\n    if (!isOpen) dispatch(HoverActionTypes.UNSET, itemRef.current);\n  };\n  const onKeyDown = e => {\n    if (!isHovering) return;\n    switch (e.key) {\n      case Keys.ENTER:\n        e.preventDefault();\n      case Keys.SPACE:\n      case Keys.RIGHT:\n        openTrigger !== 'none' && openMenu(FocusPositions.FIRST);\n    }\n  };\n  const onKeyDownOfRoot = e => {\n    let handled = false;\n    switch (e.key) {\n      case Keys.LEFT:\n        if (isOpen) {\n          itemRef.current.focus();\n          toggleMenu(false);\n          handled = true;\n        }\n        break;\n      case Keys.RIGHT:\n        if (!isOpen) handled = true;\n        break;\n    }\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n  useItemEffect(isDisabled, itemRef, updateItems);\n  useEffect(() => submenuCtx.toggle(isOpen), [submenuCtx, isOpen]);\n  useEffect(() => () => {\n    clearTimeout(timerId.v);\n    submenuCtx.toggle(false);\n  }, [timerId, submenuCtx]);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      itemRef.current.focus();\n    } else {\n      toggleMenu(false);\n    }\n  }, [isHovering, isParentOpen, toggleMenu, itemRef]);\n  useImperativeHandle(instanceRef, () => ({\n    openMenu: (...args) => {\n      isParentOpen && openMenu(...args);\n    },\n    closeMenu: () => {\n      if (isOpen) {\n        itemRef.current.focus();\n        toggleMenu(false);\n      }\n    }\n  }));\n  const modifiers = useMemo(() => ({\n    open: isOpen,\n    hover: mouseOver || isHovering,\n    disabled: isDisabled,\n    submenu: true\n  }), [isOpen, isHovering, isDisabled, mouseOver]);\n  const {\n    ref: externalItemRef,\n    className: itemClassName,\n    ...restItemProps\n  } = itemProps;\n  const mergedItemProps = mergeProps({\n    onPointerEnter: submenuCtx.off,\n    onPointerMove,\n    onPointerLeave,\n    onKeyDown,\n    onClick: () => openTrigger !== 'none' && openMenu()\n  }, restItemProps);\n  const getMenuList = () => {\n    const menuList = /*#__PURE__*/jsx(MenuList, {\n      ...restProps,\n      ...stateProps,\n      ariaLabel: ariaLabel || (typeof label === 'string' ? label : 'Submenu'),\n      anchorRef: itemRef,\n      containerRef: isPortal ? rootMenuRef : containerRef,\n      direction: direction || (parentDir === 'right' || parentDir === 'left' ? parentDir : 'right'),\n      parentScrollingRef: isPortal && parentMenuRef,\n      isDisabled: isDisabled\n    });\n    const container = rootMenuRef.current;\n    return isPortal && container ? /*#__PURE__*/createPortal(menuList, container) : menuList;\n  };\n  return /*#__PURE__*/jsxs(\"li\", {\n    className: useBEM({\n      block: menuClass,\n      element: subMenuClass,\n      className\n    }),\n    style: {\n      position: 'relative'\n    },\n    role: roleNone,\n    ref: containerRef,\n    onKeyDown: onKeyDownOfRoot,\n    children: [/*#__PURE__*/jsx(\"div\", {\n      role: roleMenuitem,\n      \"aria-haspopup\": true,\n      \"aria-expanded\": isOpen,\n      ...commonProps(isDisabled, isHovering),\n      ...mergedItemProps,\n      ref: useCombinedRef(externalItemRef, itemRef),\n      className: useBEM({\n        block: menuClass,\n        element: menuItemClass,\n        modifiers,\n        className: itemClassName\n      }),\n      children: useMemo(() => safeCall(label, modifiers), [label, modifiers])\n    }), state && getMenuList()]\n  });\n});\n\nexport { SubMenu };\n","import { useContext, useEffect } from 'react';\nimport { useItemEffect } from './useItemEffect.mjs';\nimport { useMouseOver } from './useMouseOver.mjs';\nimport { SettingsContext, MenuListItemContext, HoverActionTypes } from '../utils/constants.mjs';\n\nconst useItemState = (itemRef, focusRef, isHovering, isDisabled) => {\n  const [mouseOver, mouseOverStart, mouseOverEnd] = useMouseOver(isHovering);\n  const {\n    submenuCloseDelay\n  } = useContext(SettingsContext);\n  const {\n    isParentOpen,\n    submenuCtx,\n    dispatch,\n    updateItems\n  } = useContext(MenuListItemContext);\n  const setHover = () => {\n    !isHovering && !isDisabled && dispatch(HoverActionTypes.SET, itemRef.current);\n  };\n  const unsetHover = () => {\n    !isDisabled && dispatch(HoverActionTypes.UNSET, itemRef.current);\n  };\n  const onBlur = e => {\n    if (isHovering && !e.currentTarget.contains(e.relatedTarget)) unsetHover();\n  };\n  const onPointerMove = e => {\n    if (!isDisabled) {\n      e.stopPropagation();\n      mouseOverStart();\n      submenuCtx.on(submenuCloseDelay, setHover, setHover);\n    }\n  };\n  const onPointerLeave = (_, keepHover) => {\n    mouseOverEnd();\n    submenuCtx.off();\n    !keepHover && unsetHover();\n  };\n  useItemEffect(isDisabled, itemRef, updateItems);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      focusRef.current && focusRef.current.focus();\n    }\n  }, [focusRef, isHovering, isParentOpen]);\n  return {\n    mouseOver,\n    setHover,\n    onBlur,\n    onPointerMove,\n    onPointerLeave\n  };\n};\n\nexport { useItemState };\n","import { useContext, useMemo } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useItemState } from '../hooks/useItemState.mjs';\nimport { EventHandlersContext, RadioGroupContext, menuClass, menuItemClass, roleNone, roleMenuitem, Keys } from '../utils/constants.mjs';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { useCombinedRef } from '../hooks/useCombinedRef.mjs';\nimport { withHovering } from '../utils/withHovering.mjs';\nimport { mergeProps, safeCall, commonProps } from '../utils/utils.mjs';\n\nconst MenuItem = /*#__PURE__*/withHovering('MenuItem', function MenuItem({\n  className,\n  value,\n  href,\n  type,\n  checked,\n  disabled,\n  children,\n  onClick,\n  isHovering,\n  itemRef,\n  externalRef,\n  ...restProps\n}) {\n  const isDisabled = !!disabled;\n  const {\n    mouseOver,\n    setHover,\n    ...restStateProps\n  } = useItemState(itemRef, itemRef, isHovering, isDisabled);\n  const eventHandlers = useContext(EventHandlersContext);\n  const radioGroup = useContext(RadioGroupContext);\n  const isRadio = type === 'radio';\n  const isCheckBox = type === 'checkbox';\n  const isAnchor = !!href && !isDisabled && !isRadio && !isCheckBox;\n  const isChecked = isRadio ? radioGroup.value === value : isCheckBox ? !!checked : false;\n  const handleClick = e => {\n    if (isDisabled) {\n      e.stopPropagation();\n      e.preventDefault();\n      return;\n    }\n    const event = {\n      value,\n      syntheticEvent: e\n    };\n    if (e.key !== undefined) event.key = e.key;\n    if (isCheckBox) event.checked = !isChecked;\n    if (isRadio) event.name = radioGroup.name;\n    safeCall(onClick, event);\n    if (isRadio) safeCall(radioGroup.onRadioChange, event);\n    eventHandlers.handleClick(event, isCheckBox || isRadio);\n  };\n  const handleKeyDown = e => {\n    if (!isHovering) return;\n    switch (e.key) {\n      case Keys.ENTER:\n        e.preventDefault();\n      case Keys.SPACE:\n        isAnchor ? itemRef.current.click() : handleClick(e);\n    }\n  };\n  const modifiers = useMemo(() => ({\n    type,\n    disabled: isDisabled,\n    hover: mouseOver || isHovering,\n    checked: isChecked,\n    anchor: isAnchor\n  }), [type, isDisabled, mouseOver, isHovering, isChecked, isAnchor]);\n  const mergedProps = mergeProps({\n    ...restStateProps,\n    onPointerDown: setHover,\n    onKeyDown: handleKeyDown,\n    onClick: handleClick\n  }, restProps);\n  const menuItemProps = {\n    role: isRadio ? 'menuitemradio' : isCheckBox ? 'menuitemcheckbox' : roleMenuitem,\n    'aria-checked': isRadio || isCheckBox ? isChecked : undefined,\n    ...commonProps(isDisabled, isHovering),\n    ...mergedProps,\n    ref: useCombinedRef(externalRef, itemRef),\n    className: useBEM({\n      block: menuClass,\n      element: menuItemClass,\n      modifiers,\n      className\n    }),\n    children: useMemo(() => safeCall(children, modifiers), [children, modifiers])\n  };\n  return isAnchor ? /*#__PURE__*/jsx(\"li\", {\n    role: roleNone,\n    children: /*#__PURE__*/jsx(\"a\", {\n      href: href,\n      ...menuItemProps\n    })\n  }) : /*#__PURE__*/jsx(\"li\", {\n    ...menuItemProps\n  });\n});\n\nexport { MenuItem };\n","import { useRef, useContext, useMemo } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useItemState } from '../hooks/useItemState.mjs';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { useCombinedRef } from '../hooks/useCombinedRef.mjs';\nimport { withHovering } from '../utils/withHovering.mjs';\nimport { EventHandlersContext, roleMenuitem, menuClass, menuItemClass } from '../utils/constants.mjs';\nimport { safeCall, mergeProps, commonProps } from '../utils/utils.mjs';\n\nconst FocusableItem = /*#__PURE__*/withHovering('FocusableItem', function FocusableItem({\n  className,\n  disabled,\n  children,\n  isHovering,\n  itemRef,\n  externalRef,\n  ...restProps\n}) {\n  const isDisabled = !!disabled;\n  const ref = useRef(null);\n  const {\n    mouseOver,\n    setHover,\n    onPointerLeave,\n    ...restStateProps\n  } = useItemState(itemRef, ref, isHovering, isDisabled);\n  const {\n    handleClose\n  } = useContext(EventHandlersContext);\n  const modifiers = useMemo(() => ({\n    disabled: isDisabled,\n    hover: mouseOver || isHovering,\n    focusable: true\n  }), [isDisabled, isHovering, mouseOver]);\n  const renderChildren = useMemo(() => safeCall(children, {\n    ...modifiers,\n    ref,\n    closeMenu: handleClose\n  }), [children, modifiers, handleClose]);\n  const mergedProps = mergeProps({\n    ...restStateProps,\n    onPointerLeave: e => onPointerLeave(e, true),\n    onFocus: setHover\n  }, restProps);\n  return /*#__PURE__*/jsx(\"li\", {\n    role: roleMenuitem,\n    ...commonProps(isDisabled),\n    ...mergedProps,\n    ref: useCombinedRef(externalRef, itemRef),\n    className: useBEM({\n      block: menuClass,\n      element: menuItemClass,\n      modifiers,\n      className\n    }),\n    children: renderChildren\n  });\n});\n\nexport { FocusableItem };\n","import { memo, forwardRef } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { menuClass, menuDividerClass } from '../utils/constants.mjs';\n\nconst MenuDivider = /*#__PURE__*/memo(/*#__PURE__*/forwardRef(function MenuDivider({\n  className,\n  ...restProps\n}, externalRef) {\n  return /*#__PURE__*/jsx(\"li\", {\n    role: \"separator\",\n    ...restProps,\n    ref: externalRef,\n    className: useBEM({\n      block: menuClass,\n      element: menuDividerClass,\n      className\n    })\n  });\n}));\n\nexport { MenuDivider };\n","import { memo, forwardRef } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { roleNone, menuClass, menuHeaderClass } from '../utils/constants.mjs';\n\nconst MenuHeader = /*#__PURE__*/memo(/*#__PURE__*/forwardRef(function MenuHeader({\n  className,\n  ...restProps\n}, externalRef) {\n  return /*#__PURE__*/jsx(\"li\", {\n    role: roleNone,\n    ...restProps,\n    ref: externalRef,\n    className: useBEM({\n      block: menuClass,\n      element: menuHeaderClass,\n      className\n    })\n  });\n}));\n\nexport { MenuHeader };\n","import { forwardRef, useRef, useState, useContext } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useLayoutEffect as useIsomorphicLayoutEffect } from '../hooks/useIsomorphicLayoutEffect.mjs';\nimport { getNormalizedClientRect } from '../positionUtils/getNormalizedClientRect.mjs';\nimport { useBEM } from '../hooks/useBEM.mjs';\nimport { useCombinedRef } from '../hooks/useCombinedRef.mjs';\nimport { MenuListContext, menuClass, menuGroupClass } from '../utils/constants.mjs';\n\nconst MenuGroup = /*#__PURE__*/forwardRef(function MenuGroup({\n  className,\n  style,\n  takeOverflow,\n  ...restProps\n}, externalRef) {\n  const ref = useRef(null);\n  const [overflowStyle, setOverflowStyle] = useState();\n  const {\n    overflow,\n    overflowAmt\n  } = useContext(MenuListContext);\n  useIsomorphicLayoutEffect(() => {\n    let maxHeight;\n    if (takeOverflow && overflowAmt >= 0) {\n      maxHeight = getNormalizedClientRect(ref.current).height - overflowAmt;\n      if (maxHeight < 0) maxHeight = 0;\n    }\n    setOverflowStyle(maxHeight >= 0 ? {\n      maxHeight,\n      overflow\n    } : undefined);\n  }, [takeOverflow, overflow, overflowAmt]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowStyle) ref.current.scrollTop = 0;\n  }, [overflowStyle]);\n  return /*#__PURE__*/jsx(\"div\", {\n    ...restProps,\n    ref: useCombinedRef(externalRef, ref),\n    className: useBEM({\n      block: menuClass,\n      element: menuGroupClass,\n      className\n    }),\n    style: {\n      ...style,\n      ...overflowStyle\n    }\n  });\n});\n\nexport { MenuGroup };\n","import { useRef as i, useCallback as P, useEffect as C } from \"react\";\nvar f = /* @__PURE__ */ ((e) => (e.Mouse = \"mouse\", e.Touch = \"touch\", e.Pointer = \"pointer\", e))(f || {}), l = /* @__PURE__ */ ((e) => (e.CancelledByMovement = \"cancelled-by-movement\", e.CancelledByRelease = \"cancelled-by-release\", e.CancelledOutsideElement = \"cancelled-outside-element\", e))(l || {});\nconst b = [\n  \"mousedown\",\n  \"mousemove\",\n  \"mouseup\",\n  \"mouseleave\",\n  \"mouseout\"\n], q = [\n  \"touchstart\",\n  \"touchmove\",\n  \"touchend\",\n  \"touchcancel\"\n], z = [\n  \"pointerdown\",\n  \"pointermove\",\n  \"pointerup\",\n  \"pointerleave\",\n  \"pointerout\"\n];\nfunction G(e) {\n  return typeof e == \"object\" && e !== null && \"pageX\" in e && typeof e.pageX == \"number\" && \"pageY\" in e && typeof e.pageY == \"number\";\n}\nfunction J(e) {\n  var u;\n  return b.includes((u = e == null ? void 0 : e.nativeEvent) == null ? void 0 : u.type);\n}\nfunction U(e) {\n  var u;\n  return q.includes((u = e == null ? void 0 : e.nativeEvent) == null ? void 0 : u.type) || \"touches\" in e;\n}\nfunction K(e) {\n  const { nativeEvent: u } = e;\n  return u ? z.includes(u == null ? void 0 : u.type) || \"pointerId\" in u : !1;\n}\nfunction D(e) {\n  return J(e) || U(e) || K(e);\n}\nfunction A(e) {\n  var s;\n  const u = U(e) ? (s = e == null ? void 0 : e.touches) == null ? void 0 : s[0] : e;\n  return G(u) ? {\n    x: u.pageX,\n    y: u.pageY\n  } : null;\n}\nfunction N(e) {\n  return {\n    target: e.target,\n    currentTarget: e.currentTarget,\n    nativeEvent: e,\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    persist: () => {\n    }\n  };\n}\nfunction V(e, {\n  threshold: u = 400,\n  captureEvent: s = !1,\n  detect: R = f.Pointer,\n  cancelOnMovement: p = !1,\n  cancelOutsideElement: T = !0,\n  filterEvents: M,\n  onStart: m,\n  onMove: w,\n  onFinish: g,\n  onCancel: h\n} = {}) {\n  const L = i(!1), c = i(!1), H = i(), d = i(), B = i(e), a = i(null), y = P(\n    (r) => (t) => {\n      c.current || D(t) && (M !== void 0 && !M(t) || (s && t.persist(), m == null || m(t, { context: r }), a.current = A(t), c.current = !0, H.current = t.currentTarget, d.current = setTimeout(() => {\n        B.current && (B.current(t, { context: r }), L.current = !0);\n      }, u)));\n    },\n    [s, M, m, u]\n  ), o = P(\n    (r) => (t, n) => {\n      D(t) && c.current && (a.current = null, s && t.persist(), L.current ? g == null || g(t, { context: r }) : c.current && (h == null || h(t, { context: r, reason: n ?? l.CancelledByRelease })), L.current = !1, c.current = !1, d.current !== void 0 && clearTimeout(d.current));\n    },\n    [s, g, h]\n  ), E = P(\n    (r) => (t) => {\n      if (D(t) && (w == null || w(t, { context: r }), p !== !1 && a.current)) {\n        const n = A(t);\n        if (n) {\n          const X = p === !0 ? 25 : p, Y = {\n            x: Math.abs(n.x - a.current.x),\n            y: Math.abs(n.y - a.current.y)\n          };\n          (Y.x > X || Y.y > X) && o(r)(t, l.CancelledByMovement);\n        }\n      }\n    },\n    [o, p, w]\n  ), I = P(\n    (r) => {\n      if (e === null)\n        return {};\n      switch (R) {\n        case f.Mouse: {\n          const t = {\n            onMouseDown: y(r),\n            onMouseMove: E(r),\n            onMouseUp: o(r)\n          };\n          return T && (t.onMouseLeave = (n) => {\n            o(r)(n, l.CancelledOutsideElement);\n          }), t;\n        }\n        case f.Touch:\n          return {\n            onTouchStart: y(r),\n            onTouchMove: E(r),\n            onTouchEnd: o(r)\n          };\n        case f.Pointer: {\n          const t = {\n            onPointerDown: y(r),\n            onPointerMove: E(r),\n            onPointerUp: o(r)\n          };\n          return T && (t.onPointerLeave = (n) => o(r)(n, l.CancelledOutsideElement)), t;\n        }\n      }\n    },\n    [e, o, T, R, E, y]\n  );\n  return C(() => {\n    function r(t) {\n      const n = N(t);\n      o()(n);\n    }\n    return window.addEventListener(\"mouseup\", r), window.addEventListener(\"touchend\", r), window.addEventListener(\"pointerup\", r), () => {\n      window.removeEventListener(\"mouseup\", r), window.removeEventListener(\"touchend\", r), window.removeEventListener(\"pointerup\", r);\n    };\n  }, [o]), C(\n    () => () => {\n      d.current !== void 0 && clearTimeout(d.current);\n    },\n    []\n  ), C(() => {\n    B.current = e;\n  }, [e]), I;\n}\nexport {\n  l as LongPressCallbackReason,\n  f as LongPressEventType,\n  V as useLongPress\n};\n","import mem from './mem';\nimport store from './store';\n\nconst DTFLOCALE_CACHE_KEY = 'dtflocale';\n\nfunction _getDtfLocale() {\n  try {\n    const cachedDtf = store.session.get(DTFLOCALE_CACHE_KEY);\n    if (cachedDtf) return cachedDtf;\n    const dtfLocale = new Intl.DateTimeFormat().resolvedOptions().locale;\n    store.session.set(DTFLOCALE_CACHE_KEY, dtfLocale);\n    return dtfLocale;\n  } catch (e) {\n    return null;\n  }\n}\nexport const getDtfLocale = mem(_getDtfLocale);\n\nexport function clearDtfLocaleCache() {\n  store.session.del(DTFLOCALE_CACHE_KEY);\n}\n","import { clearDtfLocaleCache, getDtfLocale } from './dtf-locale';\nimport localeMatch from './locale-match';\nimport mem from './mem';\n\nfunction initLocales() {\n  const newLocales = [...navigator.languages];\n  const dtfLocale = getDtfLocale();\n  if (dtfLocale && !newLocales.includes(dtfLocale)) {\n    newLocales.unshift(dtfLocale);\n  }\n  return newLocales;\n}\n\nlet locales = initLocales();\n\n// For testing: refresh locales from current navigator state\nexport function refreshLocales() {\n  clearDtfLocaleCache();\n  locales = initLocales();\n}\n\nconst createLocale = mem((language, options = {}) => {\n  try {\n    return new Intl.Locale(language, options);\n  } catch (e) {\n    // Fallback to simple string splitting\n    // May not work properly due to how complicated this is\n    if (!language) return null;\n\n    // https://www.w3.org/International/articles/language-tags/\n    // Parts: language-extlang-script-region-variant-extension-privateuse\n    const [langPart, ...parts] = language.split('-', 4);\n    const regionPart = parts.pop() || null;\n    const fallbackLocale = {\n      language: langPart,\n      region: regionPart,\n      ...options,\n      toString: () => {\n        const lang = fallbackLocale.language;\n        const middle = parts.length > 0 ? `-${parts.join('-')}-` : '-';\n        const reg = fallbackLocale.region;\n        return reg ? `${lang}${middle}${reg}` : lang;\n      },\n    };\n    return fallbackLocale;\n  }\n});\n\nconst _DateTimeFormat = (locale, opts) => {\n  const options = opts;\n\n  const appLocale = createLocale(locale);\n\n  // Find first user locale with a region\n  let userRegion = null;\n  for (const loc of locales) {\n    const region = createLocale(loc)?.region;\n    if (region) {\n      userRegion = region;\n      break;\n    }\n  }\n\n  const userRegionLocale =\n    userRegion && appLocale && appLocale.region !== userRegion\n      ? createLocale(appLocale.language, {\n          ...appLocale,\n          region: userRegion,\n        })?.toString()\n      : null;\n\n  const matchedLocale = localeMatch(\n    [userRegionLocale, locale, locale?.replace(/-[a-z]+$/i, '')],\n    locales,\n    locale,\n  );\n\n  try {\n    return new Intl.DateTimeFormat(matchedLocale, options);\n  } catch (e) {\n    return new Intl.DateTimeFormat(undefined, options);\n  }\n};\n\nconst DateTimeFormat = mem(_DateTimeFormat);\n\nexport default DateTimeFormat;\n","import { i18n } from '@lingui/core';\n\nimport DateTimeFormat from './date-time-format';\n\nfunction niceDateTime(date, dtfOpts) {\n  if (!(date instanceof Date)) {\n    date = new Date(date);\n  }\n\n  const { hideTime, formatOpts, forceOpts } = dtfOpts || {};\n  const currentYear = new Date().getFullYear();\n  const options = forceOpts || {\n    // Show year if not current year\n    year: date.getFullYear() === currentYear ? undefined : 'numeric',\n    month: 'short',\n    day: 'numeric',\n    // Hide time if requested\n    hour: hideTime ? undefined : 'numeric',\n    minute: hideTime ? undefined : 'numeric',\n    ...formatOpts,\n  };\n\n  const DTF = DateTimeFormat(i18n.locale, options);\n  const dateText = DTF.format(date);\n  return dateText;\n}\n\nexport default niceDateTime;\n","import { t } from '@lingui/core/macro';\n\nexport default function openCompose(opts) {\n  const url = URL.parse('./compose/', window.location);\n  const { width: screenWidth, height: screenHeight } = window.screen;\n  const left = Math.max(0, (screenWidth - 600) / 2);\n  const top = Math.max(0, (screenHeight - 450) / 2);\n  const width = Math.min(screenWidth, 600);\n  const height = Math.min(screenHeight, 450);\n  const winUID = opts?.uid || Math.random();\n  const newWin = window.open(\n    url,\n    'compose' + winUID,\n    `width=${width},height=${height},left=${left},top=${top}`,\n  );\n\n  if (newWin) {\n    // if (masto) {\n    //   newWin.masto = masto;\n    // }\n\n    newWin.__COMPOSE__ = opts;\n  } else {\n    alert(t`Looks like your browser is blocking popups.`);\n  }\n\n  return newWin;\n}\n","const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); // https://stackoverflow.com/a/23522755\n\nexport default function openOSK() {\n  if (isSafari) {\n    const fauxEl = document.createElement('input');\n    fauxEl.style.position = 'absolute';\n    fauxEl.style.top = '0';\n    fauxEl.style.left = '0';\n    fauxEl.style.opacity = '0';\n    document.body.appendChild(fauxEl);\n    fauxEl.focus();\n    setTimeout(() => {\n      document.body.removeChild(fauxEl);\n    }, 500);\n  }\n}\n","const root = document.documentElement;\nconst style = getComputedStyle(root);\nconst defaultBoundingBoxPadding = 8;\n\nlet safeAreaInsets = [0, 0, 0, 0];\nfunction getSafeAreaInsets() {\n  // Get safe area inset variables from root\n  const safeAreaInsetTop = style.getPropertyValue('--sai-top');\n  const safeAreaInsetRight = style.getPropertyValue('--sai-right');\n  const safeAreaInsetBottom = style.getPropertyValue('--sai-bottom');\n  const safeAreaInsetLeft = style.getPropertyValue('--sai-left');\n  safeAreaInsets = [\n    // top, right, bottom, left (clockwise)\n    Math.max(0, parseInt(safeAreaInsetTop, 10)),\n    Math.max(0, parseInt(safeAreaInsetRight, 10)),\n    Math.max(0, parseInt(safeAreaInsetBottom, 10)),\n    Math.max(0, parseInt(safeAreaInsetLeft, 10)),\n  ];\n}\nrequestAnimationFrame(getSafeAreaInsets);\n\nfunction safeBoundingBoxPadding(paddings = []) {\n  const str = safeAreaInsets\n    .map((v, i) => (v || defaultBoundingBoxPadding) + (paddings[i] || 0))\n    .join(' ');\n  // console.log(str);\n  return str;\n}\n\n// Update safe area insets when orientation or resize\nif (CSS.supports('top: env(safe-area-inset-top)')) {\n  window.addEventListener('resize', getSafeAreaInsets, { passive: true });\n}\n\nexport default safeBoundingBoxPadding;\n","import { t } from '@lingui/core/macro';\n\nimport openOSK from './open-osk';\nimport showToast from './show-toast';\nimport states from './states';\n\nconst TOAST_DURATION = 5_000; // 5 seconds\n\nexport default function showCompose(opts) {\n  if (!opts) opts = true;\n\n  if (states.showCompose) {\n    if (states.composerState.minimized) {\n      showToast({\n        duration: TOAST_DURATION,\n        text: t`A draft post is currently minimized. Post or discard it before creating a new one.`,\n      });\n    } else {\n      showToast({\n        duration: TOAST_DURATION,\n        text: t`A post is currently open. Post or discard it before creating a new one.`,\n      });\n    }\n    return;\n  }\n\n  openOSK();\n  states.showCompose = opts;\n}\n","const template = document.createElement('template');\n\n// Regex patterns for HTML text processing\nconst PARAGRAPH_END_RE = /<\\/p>/g;\nconst LIST_ITEM_END_RE = /<\\/li>/g;\nconst MULTIPLE_LINE_BREAKS_RE = /[\\r\\n]{3,}/g;\nfunction getHTMLText(html, opts) {\n  if (!html) return '';\n  const { preProcess, truncateLinks = true } = opts || {};\n\n  template.innerHTML = html\n    .replace(PARAGRAPH_END_RE, '</p>\\n\\n')\n    .replace(LIST_ITEM_END_RE, '</li>\\n');\n\n  const content = template.content;\n  const brElements = content.querySelectorAll('br');\n  for (let i = 0; i < brElements.length; i++) {\n    brElements[i].replaceWith('\\n');\n  }\n\n  preProcess?.(content);\n\n  if (truncateLinks) {\n    // MASTODON-SPECIFIC classes\n    // Remove .invisible\n    const invisibleElements = content.querySelectorAll('.invisible');\n    for (let i = 0; i < invisibleElements.length; i++) {\n      invisibleElements[i].remove();\n    }\n    // Add  at end of .ellipsis\n    const ellipsisElements = content.querySelectorAll('.ellipsis');\n    for (let i = 0; i < ellipsisElements.length; i++) {\n      ellipsisElements[i].append('');\n    }\n  }\n\n  // Collect innerText from all child nodes since DocumentFragment doesn't have innerText\n  let textContent = '';\n  for (let i = 0; i < content.childNodes.length; i++) {\n    const n = content.childNodes[i];\n    textContent += n.innerText || n.textContent || '';\n  }\n\n  return textContent.replace(MULTIPLE_LINE_BREAKS_RE, '\\n\\n').trim();\n}\n\nexport default getHTMLText;\n","import getHTMLText from './getHTMLText';\n\nfunction statusPeek(status) {\n  const { spoilerText, content, poll, mediaAttachments, quote } = status;\n  let text = '';\n  // Don't need supportsNativeQuote because checking quotedStatus ID is enough\n  const hasQuote = !!quote?.quotedStatus?.id;\n  if (spoilerText?.trim()) {\n    text += spoilerText;\n  } else {\n    text += getHTMLText(content, {\n      preProcess: (dom) => {\n        if (hasQuote) {\n          const reContainer = dom.querySelector('.quote-inline');\n          if (reContainer) {\n            reContainer.remove();\n          }\n        }\n      },\n    });\n  }\n  text = text.trim();\n  if (poll?.options?.length) {\n    text += `\\n\\n:\\n${poll.options\n      .map((o) => `${poll.multiple ? '' : ''} ${o.title}`)\n      .join('\\n')}`;\n  }\n  if (mediaAttachments?.length) {\n    text +=\n      ' ' +\n      mediaAttachments\n        .map(\n          (m) =>\n            ({\n              image: '',\n              gifv: '',\n              video: '',\n              audio: '',\n              unknown: '',\n            })[m.type] || '',\n        )\n        .join('');\n  }\n  if (hasQuote) {\n    const quotePeek = statusPeek(quote.quotedStatus);\n    text += `\\n\\n\\n${quotePeek}\\n`;\n  }\n  return text;\n}\n\nexport default statusPeek;\n","import { memo } from 'preact/compat';\nimport { useEffect } from 'preact/hooks';\n\nimport { ICONS } from './ICONS';\nimport { ICON_NAMESPACE, useIconSprite } from './icon-sprite-manager';\n\nconst SIZES = {\n  xs: 8,\n  s: 12,\n  m: 16,\n  l: 20,\n  xl: 24,\n  xxl: 32,\n};\n\nconst INVALID_ID_CHARS_REGEX = /[^a-zA-Z0-9]/g;\n\nfunction Icon({\n  icon,\n  size = 'm',\n  alt,\n  title,\n  class: className = '',\n  style = {},\n}) {\n  title = title || alt;\n  const { loadIcon, isIconLoaded } = useIconSprite();\n\n  if (!icon) return null;\n\n  const iconSize = SIZES[size];\n  let iconBlock = ICONS[icon];\n  if (!iconBlock) {\n    console.warn(`Icon ${icon} not found`);\n    return null;\n  }\n\n  let rotate,\n    flip,\n    rtl = false;\n  if (Array.isArray(iconBlock)) {\n    [iconBlock, rotate, flip] = iconBlock;\n  } else if (typeof iconBlock === 'object') {\n    ({ rotate, flip, rtl } = iconBlock);\n    iconBlock = iconBlock.module;\n  }\n\n  const sanitizedTitle = title?.replace(INVALID_ID_CHARS_REGEX, '-');\n  const titleID = `${ICON_NAMESPACE}-title-${icon}-${sanitizedTitle}`;\n\n  useEffect(() => {\n    if (!isIconLoaded(icon)) {\n      loadIcon(icon);\n    }\n  }, [icon]);\n\n  const loaded = isIconLoaded(icon);\n\n  return (\n    <span\n      class={`icon ${className} ${rtl ? 'rtl-flip' : ''}`}\n      style={{\n        width: `${iconSize}px`,\n        height: `${iconSize}px`,\n        ...style,\n      }}\n      data-icon={icon}\n      title={loaded ? undefined : title || undefined}\n    >\n      {loaded && (\n        <svg\n          width={iconSize}\n          height={iconSize}\n          role={title ? 'img' : 'presentation'}\n          aria-labelledby={titleID}\n          style={{\n            transform: `${rotate ? `rotate(${rotate})` : ''} ${\n              flip ? `scaleX(-1)` : ''\n            }`,\n          }}\n        >\n          {title ? <title id={titleID}>{title}</title> : null}\n          <use href={`#${ICON_NAMESPACE}-${icon}`} />\n        </svg>\n      )}\n    </span>\n  );\n}\n\nexport default memo(Icon, (prevProps, nextProps) => {\n  return (\n    prevProps.icon === nextProps.icon &&\n    prevProps.title === nextProps.title &&\n    prevProps.alt === nextProps.alt\n  );\n});\n","import { forwardRef } from 'preact/compat';\nimport { useLocation } from 'react-router-dom';\n\nimport states from '../utils/states';\n\n/* NOTES\n   =====\n   Initially this uses <NavLink> from react-router-dom, but it doesn't work:\n   1. It interferes with nested <a> inside <a> and it's difficult to preventDefault/stopPropagation from the nested <a>\n   2. isActive doesn't work properly with the weird routes that's set up in this app, due to the faux \"location\" to make the modals work and prevent unmounting\n   3. Not using <Link state/> because it modifies history.state that *persists* across page reloads. I don't need that, so using valtio's states instead.\n*/\n\nconst Link = forwardRef((props, ref) => {\n  let routerLocation;\n  try {\n    routerLocation = useLocation();\n  } catch (e) {}\n  let hash = (location.hash || '').replace(/^#/, '').trim();\n  if (hash === '') hash = '/';\n  const { to, ...restProps } = props;\n\n  // Handle encodeURIComponent of searchParams values\n  if (!!hash && hash !== '/' && hash.includes('?')) {\n    const parsedHash = URL.parse(hash, location.origin); // Fake base URL\n    if (parsedHash?.searchParams?.size) {\n      const searchParamsStr = Array.from(parsedHash.searchParams.entries())\n        .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n        .join('&');\n      hash = parsedHash.pathname + '?' + searchParamsStr;\n    }\n  }\n\n  const isActive = hash === to || decodeURIComponent(hash) === to;\n  return (\n    <a\n      ref={ref}\n      href={`#${to}`}\n      {...restProps}\n      class={`${props.class || ''} ${isActive ? 'is-active' : ''}`}\n      onClick={(e) => {\n        if (e.currentTarget?.parentNode?.closest('a')) {\n          // If this <a> is nested inside another <a>\n          e.stopPropagation();\n        }\n        if (routerLocation) states.prevLocation = routerLocation;\n        props.onClick?.(e);\n      }}\n    />\n  );\n});\n\nexport default Link;\n","import { FocusableItem } from '@szhsin/react-menu';\n\nimport Link from './link';\n\nfunction MenuLink(props) {\n  const { className, disabled, ...restProps } = props;\n  return (\n    <FocusableItem className={className} disabled={disabled}>\n      {({ ref, closeMenu }) => (\n        <Link\n          {...restProps}\n          ref={ref}\n          onClick={({ detail }) =>\n            closeMenu(detail === 0 ? 'Enter' : undefined)\n          }\n        />\n      )}\n    </FocusableItem>\n  );\n}\n\nexport default MenuLink;\n","import mem from './mem.js';\n\nexport default mem(\n  (locale) => new Intl.RelativeTimeFormat(locale || undefined),\n);\n","import { i18n } from '@lingui/core';\nimport { t } from '@lingui/core/macro';\nimport { useEffect, useMemo, useReducer } from 'preact/hooks';\n\nimport DateTimeFormat from '../utils/date-time-format';\nimport RTF from '../utils/relative-time-format';\n\nfunction isValidDate(value) {\n  if (value instanceof Date) {\n    return !isNaN(value.getTime());\n  } else {\n    const date = new Date(value);\n    return !isNaN(date.getTime());\n  }\n}\n\nconst minute = 60;\nconst hour = 60 * minute;\nconst day = 24 * hour;\n\nconst rtfFromNow = (date) => {\n  // date = Date object\n  const rtf = RTF(i18n.locale);\n  const seconds = (date.getTime() - Date.now()) / 1000;\n  const absSeconds = Math.abs(seconds);\n  if (absSeconds < minute) {\n    return rtf.format(Math.floor(seconds), 'second');\n  } else if (absSeconds < hour) {\n    return rtf.format(Math.floor(seconds / minute), 'minute');\n  } else if (absSeconds < day) {\n    return rtf.format(Math.floor(seconds / hour), 'hour');\n  } else if (absSeconds < 30 * day) {\n    return rtf.format(Math.floor(seconds / day), 'day');\n  } else if (absSeconds < 365 * day) {\n    return rtf.format(Math.floor(seconds / day / 30), 'month');\n  } else {\n    return rtf.format(Math.floor(seconds / day / 365), 'year');\n  }\n};\n\nconst twitterFromNow = (date) => {\n  // date = Date object\n  const seconds = (Date.now() - date.getTime()) / 1000;\n  if (seconds < minute) {\n    return t({\n      comment: 'Relative time in seconds, as short as possible',\n      message: `${seconds < 1 ? 1 : Math.floor(seconds)}s`,\n    });\n  } else if (seconds < hour) {\n    return t({\n      comment: 'Relative time in minutes, as short as possible',\n      message: `${Math.floor(seconds / minute)}m`,\n    });\n  } else {\n    return t({\n      comment: 'Relative time in hours, as short as possible',\n      message: `${Math.floor(seconds / hour)}h`,\n    });\n  }\n};\n\nexport default function RelativeTime({ datetime, format }) {\n  if (!datetime) return null;\n  const [renderCount, rerender] = useReducer((x) => x + 1, 0);\n  const date = useMemo(() => new Date(datetime), [datetime]);\n  const [dateStr, dt, title] = useMemo(() => {\n    if (!isValidDate(date))\n      return ['' + (typeof datetime === 'string' ? datetime : ''), '', ''];\n    let str;\n    if (format === 'micro') {\n      // If date <= 1 day ago or day is within this year\n      const now = new Date();\n      const dayDiff = (now.getTime() - date.getTime()) / 1000 / day;\n      if (dayDiff <= 1) {\n        str = twitterFromNow(date);\n      } else {\n        const sameYear = now.getFullYear() === date.getFullYear();\n        if (sameYear) {\n          str = DateTimeFormat(i18n.locale, {\n            year: undefined,\n            month: 'short',\n            day: 'numeric',\n          }).format(date);\n        } else {\n          str = DateTimeFormat(i18n.locale, {\n            dateStyle: 'short',\n          }).format(date);\n        }\n      }\n    }\n    if (!str) str = rtfFromNow(date);\n    return [str, date.toISOString(), date.toLocaleString()];\n  }, [date, format, renderCount]);\n\n  useEffect(() => {\n    if (!isValidDate(date)) return;\n    let timeout;\n    let raf;\n    function rafRerender() {\n      raf = requestAnimationFrame(() => {\n        rerender();\n        scheduleRerender();\n      });\n    }\n    function scheduleRerender() {\n      // If less than 1 minute, rerender every 10s\n      // If less than 1 hour rerender every 1m\n      // Else, don't need to rerender\n      const seconds = (Date.now() - date.getTime()) / 1000;\n      if (seconds < minute) {\n        timeout = setTimeout(rafRerender, 10_000);\n      } else if (seconds < hour) {\n        timeout = setTimeout(rafRerender, 60_000);\n      }\n    }\n    scheduleRerender();\n    return () => {\n      clearTimeout(timeout);\n      cancelAnimationFrame(raf);\n    };\n  }, []);\n\n  return (\n    <time datetime={dt} title={title}>\n      {dateStr}\n    </time>\n  );\n}\n","import { SubMenu } from '@szhsin/react-menu';\nimport { useLayoutEffect, useRef, useState } from 'preact/hooks';\n\nexport default function SubMenu2(props) {\n  const menuRef = useRef();\n  const itemRef = useRef();\n  const { label, direction, shift, ...restProps } = props;\n  const [computedDirection, setComputedDirection] = useState(direction);\n  const [computedShift, setComputedShift] = useState(shift);\n\n  // If menu item width is >50% of viewport, use bottom direction\n  useLayoutEffect(() => {\n    if (itemRef.current) {\n      const width = itemRef.current.offsetWidth;\n      const viewportWidth = window.innerWidth;\n      if (width > viewportWidth * 0.5) {\n        setComputedDirection('bottom');\n        setComputedShift(shift || 8);\n      } else {\n        setComputedDirection(direction);\n        setComputedShift(shift);\n      }\n    }\n  }, [direction, shift]);\n\n  return (\n    <SubMenu\n      {...restProps}\n      direction={computedDirection}\n      shift={computedShift}\n      label={label}\n      instanceRef={menuRef}\n      // Test fix for bug; submenus not opening on Android\n      itemProps={{\n        ref: itemRef,\n        onPointerMove: (e) => {\n          if (e.pointerType === 'touch') {\n            menuRef.current?.openMenu?.();\n          }\n        },\n        onPointerLeave: (e) => {\n          if (e.pointerType === 'touch') {\n            menuRef.current?.openMenu?.();\n          }\n        },\n        ...props.itemProps,\n      }}\n    />\n  );\n}\n","import { useEffect } from 'preact/hooks';\n\n// NOTE: The order of initialized close watchers is important\n// Last one will intercept first if there are multiple/nested close watchers\n// So if this hook reruns, the previous close watcher will be destroyed, the new one will be created and the order will change\nfunction useCloseWatcher(fn, deps = []) {\n  if (!fn || typeof fn !== 'function') return;\n  useEffect(() => {\n    console.log('useCloseWatcher');\n    const watcher = new CloseWatcher();\n    watcher.addEventListener('close', fn);\n    return () => {\n      watcher.destroy();\n    };\n  }, deps);\n}\n\nexport default window.CloseWatcher ? useCloseWatcher : () => {};\n","import './modal.css';\n\nimport { createPortal } from 'preact/compat';\nimport { useEffect, useLayoutEffect, useRef } from 'preact/hooks';\nimport { useHotkeys } from 'react-hotkeys-hook';\n\nimport store from '../utils/store';\nimport useCloseWatcher from '../utils/useCloseWatcher';\n\nconst $modalContainer = document.getElementById('modal-container');\n\nfunction getBackdropThemeColor() {\n  return getComputedStyle(document.documentElement).getPropertyValue(\n    '--backdrop-theme-color',\n  );\n}\n\nfunction Modal({ children, onClose, onClick, class: className, minimized }) {\n  if (!children) return null;\n\n  const modalRef = useRef();\n  useEffect(() => {\n    let timer = setTimeout(() => {\n      const focusElement = modalRef.current?.querySelector('[tabindex=\"-1\"]');\n      if (focusElement) {\n        focusElement.focus();\n      }\n    }, 100);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const supportsCloseWatcher = window.CloseWatcher;\n  const escRef = useHotkeys(\n    'esc',\n    () => {\n      setTimeout(() => {\n        onClose?.();\n      }, 0);\n    },\n    {\n      enabled: !supportsCloseWatcher && !!onClose,\n      // Using keyup and setTimeout above\n      // This will run \"later\" to prevent clash with esc handlers from other components\n      keydown: false,\n      keyup: true,\n      useKey: true,\n      ignoreEventWhen: (e) => e.metaKey || e.ctrlKey || e.altKey || e.shiftKey,\n    },\n    [onClose],\n  );\n  useCloseWatcher(onClose, [onClose]);\n\n  useEffect(() => {\n    const $deckContainers = document.querySelectorAll('.deck-container');\n    if (minimized) {\n      // Similar to focusDeck in focus-deck.jsx\n      // Focus last deck\n      const page = $deckContainers[$deckContainers.length - 1]; // last one\n      if (page && page.tabIndex === -1) {\n        page.focus();\n      }\n    } else {\n      if (children) {\n        $deckContainers.forEach(($deckContainer) => {\n          $deckContainer.setAttribute('inert', '');\n        });\n      } else {\n        $deckContainers.forEach(($deckContainer) => {\n          $deckContainer.removeAttribute('inert');\n        });\n      }\n    }\n    return () => {\n      $deckContainers.forEach(($deckContainer) => {\n        $deckContainer.removeAttribute('inert');\n      });\n    };\n  }, [children, minimized]);\n\n  const $meta = useRef();\n  const metaColor = useRef();\n  useLayoutEffect(() => {\n    if (children && !minimized) {\n      const theme = store.local.get('theme');\n      if (theme) {\n        const backdropColor = getBackdropThemeColor();\n        console.log({ backdropColor });\n        $meta.current = document.querySelector(\n          `meta[name=\"theme-color\"][data-theme-setting=\"manual\"]`,\n        );\n        if ($meta.current) {\n          metaColor.current = $meta.current.content;\n          $meta.current.content = backdropColor;\n        }\n        document.documentElement.style.setProperty(\n          '--meta-theme-color',\n          backdropColor,\n        );\n      } else {\n        const colorScheme = window.matchMedia('(prefers-color-scheme: dark)')\n          .matches\n          ? 'dark'\n          : 'light';\n        const backdropColor = getBackdropThemeColor();\n        console.log({ backdropColor });\n        $meta.current = document.querySelector(\n          `meta[name=\"theme-color\"][media*=\"${colorScheme}\"]`,\n        );\n        if ($meta.current) {\n          metaColor.current = $meta.current.content;\n          $meta.current.content = backdropColor;\n        }\n        document.documentElement.style.setProperty(\n          '--meta-theme-color',\n          backdropColor,\n        );\n      }\n    } else {\n      // Reset meta color\n      if ($meta.current && metaColor.current) {\n        $meta.current.content = metaColor.current;\n      }\n      document.documentElement.style.removeProperty('--meta-theme-color');\n    }\n    return () => {\n      // Reset meta color\n      if ($meta.current && metaColor.current) {\n        $meta.current.content = metaColor.current;\n      }\n      document.documentElement.style.removeProperty('--meta-theme-color');\n    };\n  }, [children, minimized]);\n\n  const Modal = (\n    <div\n      ref={(node) => {\n        modalRef.current = node;\n        escRef.current = node?.querySelector?.('[tabindex=\"-1\"]') || node;\n      }}\n      className={className}\n      onClick={(e) => {\n        onClick?.(e);\n        if (e.target === e.currentTarget) {\n          onClose?.(e);\n        }\n      }}\n      tabIndex={minimized ? 0 : '-1'}\n      inert={minimized}\n      onFocus={(e) => {\n        try {\n          if (e.target === e.currentTarget) {\n            const focusElement =\n              modalRef.current?.querySelector('[tabindex=\"-1\"]');\n            const isFocusable =\n              !!focusElement &&\n              getComputedStyle(focusElement)?.pointerEvents !== 'none';\n            if (focusElement && isFocusable) {\n              focusElement.focus();\n            }\n          }\n        } catch (err) {\n          console.error(err);\n        }\n      }}\n    >\n      {children}\n    </div>\n  );\n\n  return createPortal(Modal, $modalContainer);\n\n  // return createPortal(children, $modalContainer);\n}\n\nexport default Modal;\n","import './avatar.css';\n\nimport { useRef } from 'preact/hooks';\n\nimport mem from '../utils/mem';\n\nconst SIZES = {\n  s: 16,\n  m: 20,\n  l: 24,\n  xl: 32,\n  xxl: 50,\n  xxxl: 64,\n};\n\nconst alphaCache = {};\n\nconst canvas = window.OffscreenCanvas\n  ? new OffscreenCanvas(1, 1)\n  : document.createElement('canvas');\nconst ctx = canvas.getContext('2d', {\n  willReadFrequently: true,\n});\nctx.imageSmoothingEnabled = false;\n\nconst MISSING_IMAGE_PATH_REGEX = /missing\\.png$/;\n\nfunction Avatar({ url, staticUrl, size, alt = '', squircle, ...props }) {\n  size = SIZES[size] || size || SIZES.m;\n  const avatarRef = useRef();\n  const isMissing = MISSING_IMAGE_PATH_REGEX.test(url);\n  return (\n    <picture\n      ref={avatarRef}\n      class={`avatar ${squircle ? 'squircle' : ''} ${\n        alphaCache[url] ? 'has-alpha' : ''\n      }`}\n      style={{\n        width: size,\n        height: size,\n      }}\n      title={alt}\n      {...props}\n    >\n      {!!staticUrl && (\n        <source srcset={staticUrl} media=\"(prefers-reduced-motion: reduce)\" />\n      )}\n      {!!url && (\n        <img\n          src={url}\n          width={size}\n          height={size}\n          alt={alt}\n          loading=\"lazy\"\n          decoding=\"async\"\n          fetchPriority=\"low\"\n          crossOrigin={\n            alphaCache[url] === undefined && !isMissing\n              ? 'anonymous'\n              : undefined\n          }\n          onError={(e) => {\n            if (e.target.crossOrigin) {\n              e.target.crossOrigin = null;\n              e.target.src = url;\n            }\n          }}\n          onLoad={(e) => {\n            if (avatarRef.current) avatarRef.current.dataset.loaded = true;\n            if (alphaCache[url] !== undefined) return;\n            if (isMissing) return;\n            setTimeout(() => {\n              try {\n                // Check if image has alpha channel\n                const { width, height } = e.target;\n                if (canvas.width !== width) canvas.width = width;\n                if (canvas.height !== height) canvas.height = height;\n                ctx.drawImage(e.target, 0, 0);\n                const allPixels = ctx.getImageData(0, 0, width, height);\n                // At least 10% of pixels have alpha <= 128\n                const hasAlpha =\n                  allPixels.data.filter(\n                    (pixel, i) => i % 4 === 3 && pixel <= 128,\n                  ).length /\n                    (allPixels.data.length / 4) >\n                  0.1;\n                if (hasAlpha) {\n                  // console.log('hasAlpha', hasAlpha, allPixels.data);\n                  avatarRef.current.classList.add('has-alpha');\n                }\n                alphaCache[url] = hasAlpha;\n                ctx.clearRect(0, 0, width, height);\n              } catch (e) {\n                // Silent fail\n                alphaCache[url] = false;\n              }\n            }, 1);\n          }}\n        />\n      )}\n    </picture>\n  );\n}\n\nexport default mem(Avatar);\n","let IS_RTL = false;\n\n// Use MutationObserver to detect RTL\nconst observer = new MutationObserver((mutations) => {\n  mutations.forEach((mutation) => {\n    if (mutation.type === 'attributes') {\n      const { dir } = mutation.target;\n      if (dir === 'rtl') {\n        IS_RTL = true;\n      } else {\n        IS_RTL = false;\n      }\n      console.log({ IS_RTL });\n      // Fire custom event 'dirchange' on document\n      // document.dispatchEvent(new Event('dirchange'));\n    }\n  });\n});\nobserver.observe(document.documentElement, {\n  attributes: true,\n  attributeFilter: ['dir'],\n});\n\nexport default function isRTL() {\n  return IS_RTL;\n  // return document.documentElement.dir === 'rtl';\n}\n","import { useLayoutEffect, useState } from 'preact/hooks';\n\nexport default function useWindowSize() {\n  const [size, setSize] = useState({\n    width: null,\n    height: null,\n  });\n\n  useLayoutEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n\n    handleResize();\n    window.addEventListener('resize', handleResize, {\n      passive: true,\n    });\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return size;\n}\n","import { Menu } from '@szhsin/react-menu';\nimport { useRef } from 'preact/hooks';\n\nimport isRTL from '../utils/is-rtl';\nimport safeBoundingBoxPadding from '../utils/safe-bounding-box-padding';\nimport useWindowSize from '../utils/useWindowSize';\n\n// It's like Menu but with sensible defaults, bug fixes and improvements.\nfunction Menu2(props) {\n  const { containerProps, instanceRef: _instanceRef, align } = props;\n  const size = useWindowSize();\n  const instanceRef = _instanceRef?.current ? _instanceRef : useRef();\n\n  // Values: start, end, center\n  // Note: don't mess with 'center'\n  const rtlAlign = isRTL()\n    ? align === 'end'\n      ? 'start'\n      : align === 'start'\n        ? 'end'\n        : align\n    : align;\n\n  return (\n    <Menu\n      boundingBoxPadding={safeBoundingBoxPadding()}\n      repositionFlag={`${size.width}x${size.height}`}\n      unmountOnClose\n      {...props}\n      align={rtlAlign}\n      instanceRef={instanceRef}\n      containerProps={{\n        onClick: (e) => {\n          if (e.target === e.currentTarget) {\n            instanceRef.current?.closeMenu?.();\n          }\n          containerProps?.onClick?.(e);\n        },\n        ...containerProps,\n      }}\n    />\n  );\n}\n\nexport default Menu2;\n","import { MenuItem } from '@szhsin/react-menu';\nimport { cloneElement } from 'preact';\n\nimport Menu2 from './menu2';\nimport SubMenu2 from './submenu2';\n\nfunction MenuConfirm({\n  subMenu = false,\n  confirm = true,\n  confirmLabel,\n  menuItemClassName,\n  menuFooter,\n  menuExtras,\n  ...props\n}) {\n  const { children, onClick, ...restProps } = props;\n  if (!confirm) {\n    if (subMenu) return <MenuItem {...props} />;\n    if (onClick) {\n      return cloneElement(children, {\n        onClick,\n      });\n    }\n    return children;\n  }\n  const Parent = subMenu ? SubMenu2 : Menu2;\n  return (\n    <Parent\n      openTrigger=\"clickOnly\"\n      direction=\"bottom\"\n      overflow=\"auto\"\n      gap={-8}\n      shift={8}\n      menuClassName=\"menu-emphasized\"\n      {...restProps}\n      menuButton={subMenu ? undefined : children}\n      label={subMenu ? children : undefined}\n    >\n      <MenuItem className={menuItemClassName} onClick={onClick}>\n        {confirmLabel}\n      </MenuItem>\n      {menuExtras}\n      {menuFooter}\n    </Parent>\n  );\n}\n\nexport default MenuConfirm;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loop = exports.conditional = exports.parse = void 0;\n\nvar parse = function parse(stream, schema) {\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : result;\n\n  if (Array.isArray(schema)) {\n    schema.forEach(function (partSchema) {\n      return parse(stream, partSchema, result, parent);\n    });\n  } else if (typeof schema === 'function') {\n    schema(stream, result, parent, parse);\n  } else {\n    var key = Object.keys(schema)[0];\n\n    if (Array.isArray(schema[key])) {\n      parent[key] = {};\n      parse(stream, schema[key], result, parent[key]);\n    } else {\n      parent[key] = schema[key](stream, result, parent, parse);\n    }\n  }\n\n  return result;\n};\n\nexports.parse = parse;\n\nvar conditional = function conditional(schema, conditionFunc) {\n  return function (stream, result, parent, parse) {\n    if (conditionFunc(stream, result, parent)) {\n      parse(stream, schema, result, parent);\n    }\n  };\n};\n\nexports.conditional = conditional;\n\nvar loop = function loop(schema, continueFunc) {\n  return function (stream, result, parent, parse) {\n    var arr = [];\n    var lastStreamPos = stream.pos;\n\n    while (continueFunc(stream, result, parent)) {\n      var newParent = {};\n      parse(stream, schema, result, newParent); // cases when whole file is parsed but no termination is there and stream position is not getting updated as well\n      // it falls into infinite recursion, null check to avoid the same\n\n      if (stream.pos === lastStreamPos) {\n        break;\n      }\n\n      lastStreamPos = stream.pos;\n      arr.push(newParent);\n    }\n\n    return arr;\n  };\n};\n\nexports.loop = loop;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readBits = exports.readArray = exports.readUnsigned = exports.readString = exports.peekBytes = exports.readBytes = exports.peekByte = exports.readByte = exports.buildStream = void 0;\n\n// Default stream and parsers for Uint8TypedArray data type\nvar buildStream = function buildStream(uint8Data) {\n  return {\n    data: uint8Data,\n    pos: 0\n  };\n};\n\nexports.buildStream = buildStream;\n\nvar readByte = function readByte() {\n  return function (stream) {\n    return stream.data[stream.pos++];\n  };\n};\n\nexports.readByte = readByte;\n\nvar peekByte = function peekByte() {\n  var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return function (stream) {\n    return stream.data[stream.pos + offset];\n  };\n};\n\nexports.peekByte = peekByte;\n\nvar readBytes = function readBytes(length) {\n  return function (stream) {\n    return stream.data.subarray(stream.pos, stream.pos += length);\n  };\n};\n\nexports.readBytes = readBytes;\n\nvar peekBytes = function peekBytes(length) {\n  return function (stream) {\n    return stream.data.subarray(stream.pos, stream.pos + length);\n  };\n};\n\nexports.peekBytes = peekBytes;\n\nvar readString = function readString(length) {\n  return function (stream) {\n    return Array.from(readBytes(length)(stream)).map(function (value) {\n      return String.fromCharCode(value);\n    }).join('');\n  };\n};\n\nexports.readString = readString;\n\nvar readUnsigned = function readUnsigned(littleEndian) {\n  return function (stream) {\n    var bytes = readBytes(2)(stream);\n    return littleEndian ? (bytes[1] << 8) + bytes[0] : (bytes[0] << 8) + bytes[1];\n  };\n};\n\nexports.readUnsigned = readUnsigned;\n\nvar readArray = function readArray(byteSize, totalOrFunc) {\n  return function (stream, result, parent) {\n    var total = typeof totalOrFunc === 'function' ? totalOrFunc(stream, result, parent) : totalOrFunc;\n    var parser = readBytes(byteSize);\n    var arr = new Array(total);\n\n    for (var i = 0; i < total; i++) {\n      arr[i] = parser(stream);\n    }\n\n    return arr;\n  };\n};\n\nexports.readArray = readArray;\n\nvar subBitsTotal = function subBitsTotal(bits, startIndex, length) {\n  var result = 0;\n\n  for (var i = 0; i < length; i++) {\n    result += bits[startIndex + i] && Math.pow(2, length - i - 1);\n  }\n\n  return result;\n};\n\nvar readBits = function readBits(schema) {\n  return function (stream) {\n    var _byte = readByte()(stream); // convert the byte to bit array\n\n\n    var bits = new Array(8);\n\n    for (var i = 0; i < 8; i++) {\n      bits[7 - i] = !!(_byte & 1 << i);\n    } // convert the bit array to values based on the schema\n\n\n    return Object.keys(schema).reduce(function (res, key) {\n      var def = schema[key];\n\n      if (def.length) {\n        res[key] = subBitsTotal(bits, def.index, def.length);\n      } else {\n        res[key] = bits[def.index];\n      }\n\n      return res;\n    }, {});\n  };\n};\n\nexports.readBits = readBits;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _ = require(\"../\");\n\nvar _uint = require(\"../parsers/uint8\");\n\n// a set of 0x00 terminated subblocks\nvar subBlocksSchema = {\n  blocks: function blocks(stream) {\n    var terminator = 0x00;\n    var chunks = [];\n    var streamSize = stream.data.length;\n    var total = 0;\n\n    for (var size = (0, _uint.readByte)()(stream); size !== terminator; size = (0, _uint.readByte)()(stream)) {\n      // size becomes undefined for some case when file is corrupted and  terminator is not proper \n      // null check to avoid recursion\n      if (!size) break; // catch corrupted files with no terminator\n\n      if (stream.pos + size >= streamSize) {\n        var availableSize = streamSize - stream.pos;\n        chunks.push((0, _uint.readBytes)(availableSize)(stream));\n        total += availableSize;\n        break;\n      }\n\n      chunks.push((0, _uint.readBytes)(size)(stream));\n      total += size;\n    }\n\n    var result = new Uint8Array(total);\n    var offset = 0;\n\n    for (var i = 0; i < chunks.length; i++) {\n      result.set(chunks[i], offset);\n      offset += chunks[i].length;\n    }\n\n    return result;\n  }\n}; // global control extension\n\nvar gceSchema = (0, _.conditional)({\n  gce: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    byteSize: (0, _uint.readByte)()\n  }, {\n    extras: (0, _uint.readBits)({\n      future: {\n        index: 0,\n        length: 3\n      },\n      disposal: {\n        index: 3,\n        length: 3\n      },\n      userInput: {\n        index: 6\n      },\n      transparentColorGiven: {\n        index: 7\n      }\n    })\n  }, {\n    delay: (0, _uint.readUnsigned)(true)\n  }, {\n    transparentColorIndex: (0, _uint.readByte)()\n  }, {\n    terminator: (0, _uint.readByte)()\n  }]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xf9;\n}); // image pipeline block\n\nvar imageSchema = (0, _.conditional)({\n  image: [{\n    code: (0, _uint.readByte)()\n  }, {\n    descriptor: [{\n      left: (0, _uint.readUnsigned)(true)\n    }, {\n      top: (0, _uint.readUnsigned)(true)\n    }, {\n      width: (0, _uint.readUnsigned)(true)\n    }, {\n      height: (0, _uint.readUnsigned)(true)\n    }, {\n      lct: (0, _uint.readBits)({\n        exists: {\n          index: 0\n        },\n        interlaced: {\n          index: 1\n        },\n        sort: {\n          index: 2\n        },\n        future: {\n          index: 3,\n          length: 2\n        },\n        size: {\n          index: 5,\n          length: 3\n        }\n      })\n    }]\n  }, (0, _.conditional)({\n    lct: (0, _uint.readArray)(3, function (stream, result, parent) {\n      return Math.pow(2, parent.descriptor.lct.size + 1);\n    })\n  }, function (stream, result, parent) {\n    return parent.descriptor.lct.exists;\n  }), {\n    data: [{\n      minCodeSize: (0, _uint.readByte)()\n    }, subBlocksSchema]\n  }]\n}, function (stream) {\n  return (0, _uint.peekByte)()(stream) === 0x2c;\n}); // plain text block\n\nvar textSchema = (0, _.conditional)({\n  text: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    blockSize: (0, _uint.readByte)()\n  }, {\n    preData: function preData(stream, result, parent) {\n      return (0, _uint.readBytes)(parent.text.blockSize)(stream);\n    }\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0x01;\n}); // application block\n\nvar applicationSchema = (0, _.conditional)({\n  application: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    blockSize: (0, _uint.readByte)()\n  }, {\n    id: function id(stream, result, parent) {\n      return (0, _uint.readString)(parent.blockSize)(stream);\n    }\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xff;\n}); // comment block\n\nvar commentSchema = (0, _.conditional)({\n  comment: [{\n    codes: (0, _uint.readBytes)(2)\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xfe;\n});\nvar schema = [{\n  header: [{\n    signature: (0, _uint.readString)(3)\n  }, {\n    version: (0, _uint.readString)(3)\n  }]\n}, {\n  lsd: [{\n    width: (0, _uint.readUnsigned)(true)\n  }, {\n    height: (0, _uint.readUnsigned)(true)\n  }, {\n    gct: (0, _uint.readBits)({\n      exists: {\n        index: 0\n      },\n      resolution: {\n        index: 1,\n        length: 3\n      },\n      sort: {\n        index: 4\n      },\n      size: {\n        index: 5,\n        length: 3\n      }\n    })\n  }, {\n    backgroundColorIndex: (0, _uint.readByte)()\n  }, {\n    pixelAspectRatio: (0, _uint.readByte)()\n  }]\n}, (0, _.conditional)({\n  gct: (0, _uint.readArray)(3, function (stream, result) {\n    return Math.pow(2, result.lsd.gct.size + 1);\n  })\n}, function (stream, result) {\n  return result.lsd.gct.exists;\n}), // content frames\n{\n  frames: (0, _.loop)([gceSchema, applicationSchema, commentSchema, imageSchema, textSchema], function (stream) {\n    var nextCode = (0, _uint.peekByte)()(stream); // rather than check for a terminator, we should check for the existence\n    // of an ext or image block to avoid infinite loops\n    //var terminator = 0x3B;\n    //return nextCode !== terminator;\n\n    return nextCode === 0x21 || nextCode === 0x2c;\n  })\n}];\nvar _default = schema;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deinterlace = void 0;\n\n/**\r\n * Deinterlace function from https://github.com/shachaf/jsgif\r\n */\nvar deinterlace = function deinterlace(pixels, width) {\n  var newPixels = new Array(pixels.length);\n  var rows = pixels.length / width;\n\n  var cpRow = function cpRow(toRow, fromRow) {\n    var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n  }; // See appendix E.\n\n\n  var offsets = [0, 4, 2, 1];\n  var steps = [8, 8, 4, 2];\n  var fromRow = 0;\n\n  for (var pass = 0; pass < 4; pass++) {\n    for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n      cpRow(toRow, fromRow);\n      fromRow++;\n    }\n  }\n\n  return newPixels;\n};\n\nexports.deinterlace = deinterlace;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lzw = void 0;\n\n/**\r\n * javascript port of java LZW decompression\r\n * Original java author url: https://gist.github.com/devunwired/4479231\r\n */\nvar lzw = function lzw(minCodeSize, data, pixelCount) {\n  var MAX_STACK_SIZE = 4096;\n  var nullCode = -1;\n  var npix = pixelCount;\n  var available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, i, datum, data_size, first, top, bi, pi;\n  var dstPixels = new Array(pixelCount);\n  var prefix = new Array(MAX_STACK_SIZE);\n  var suffix = new Array(MAX_STACK_SIZE);\n  var pixelStack = new Array(MAX_STACK_SIZE + 1); // Initialize GIF data stream decoder.\n\n  data_size = minCodeSize;\n  clear = 1 << data_size;\n  end_of_information = clear + 1;\n  available = clear + 2;\n  old_code = nullCode;\n  code_size = data_size + 1;\n  code_mask = (1 << code_size) - 1;\n\n  for (code = 0; code < clear; code++) {\n    prefix[code] = 0;\n    suffix[code] = code;\n  } // Decode GIF pixel stream.\n\n\n  var datum, bits, count, first, top, pi, bi;\n  datum = bits = count = first = top = pi = bi = 0;\n\n  for (i = 0; i < npix;) {\n    if (top === 0) {\n      if (bits < code_size) {\n        // get the next byte\n        datum += data[bi] << bits;\n        bits += 8;\n        bi++;\n        continue;\n      } // Get the next code.\n\n\n      code = datum & code_mask;\n      datum >>= code_size;\n      bits -= code_size; // Interpret the code\n\n      if (code > available || code == end_of_information) {\n        break;\n      }\n\n      if (code == clear) {\n        // Reset decoder.\n        code_size = data_size + 1;\n        code_mask = (1 << code_size) - 1;\n        available = clear + 2;\n        old_code = nullCode;\n        continue;\n      }\n\n      if (old_code == nullCode) {\n        pixelStack[top++] = suffix[code];\n        old_code = code;\n        first = code;\n        continue;\n      }\n\n      in_code = code;\n\n      if (code == available) {\n        pixelStack[top++] = first;\n        code = old_code;\n      }\n\n      while (code > clear) {\n        pixelStack[top++] = suffix[code];\n        code = prefix[code];\n      }\n\n      first = suffix[code] & 0xff;\n      pixelStack[top++] = first; // add a new string to the table, but only if space is available\n      // if not, just continue with current table until a clear code is found\n      // (deferred clear code implementation as per GIF spec)\n\n      if (available < MAX_STACK_SIZE) {\n        prefix[available] = old_code;\n        suffix[available] = first;\n        available++;\n\n        if ((available & code_mask) === 0 && available < MAX_STACK_SIZE) {\n          code_size++;\n          code_mask += available;\n        }\n      }\n\n      old_code = in_code;\n    } // Pop a pixel off the pixel stack.\n\n\n    top--;\n    dstPixels[pi++] = pixelStack[top];\n    i++;\n  }\n\n  for (i = pi; i < npix; i++) {\n    dstPixels[i] = 0; // clear missing pixels\n  }\n\n  return dstPixels;\n};\n\nexports.lzw = lzw;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decompressFrames = exports.decompressFrame = exports.parseGIF = void 0;\n\nvar _gif = _interopRequireDefault(require(\"js-binary-schema-parser/lib/schemas/gif\"));\n\nvar _jsBinarySchemaParser = require(\"js-binary-schema-parser\");\n\nvar _uint = require(\"js-binary-schema-parser/lib/parsers/uint8\");\n\nvar _deinterlace = require(\"./deinterlace\");\n\nvar _lzw = require(\"./lzw\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar parseGIF = function parseGIF(arrayBuffer) {\n  var byteData = new Uint8Array(arrayBuffer);\n  return (0, _jsBinarySchemaParser.parse)((0, _uint.buildStream)(byteData), _gif[\"default\"]);\n};\n\nexports.parseGIF = parseGIF;\n\nvar generatePatch = function generatePatch(image) {\n  var totalPixels = image.pixels.length;\n  var patchData = new Uint8ClampedArray(totalPixels * 4);\n\n  for (var i = 0; i < totalPixels; i++) {\n    var pos = i * 4;\n    var colorIndex = image.pixels[i];\n    var color = image.colorTable[colorIndex] || [0, 0, 0];\n    patchData[pos] = color[0];\n    patchData[pos + 1] = color[1];\n    patchData[pos + 2] = color[2];\n    patchData[pos + 3] = colorIndex !== image.transparentIndex ? 255 : 0;\n  }\n\n  return patchData;\n};\n\nvar decompressFrame = function decompressFrame(frame, gct, buildImagePatch) {\n  if (!frame.image) {\n    console.warn('gif frame does not have associated image.');\n    return;\n  }\n\n  var image = frame.image; // get the number of pixels\n\n  var totalPixels = image.descriptor.width * image.descriptor.height; // do lzw decompression\n\n  var pixels = (0, _lzw.lzw)(image.data.minCodeSize, image.data.blocks, totalPixels); // deal with interlacing if necessary\n\n  if (image.descriptor.lct.interlaced) {\n    pixels = (0, _deinterlace.deinterlace)(pixels, image.descriptor.width);\n  }\n\n  var resultImage = {\n    pixels: pixels,\n    dims: {\n      top: frame.image.descriptor.top,\n      left: frame.image.descriptor.left,\n      width: frame.image.descriptor.width,\n      height: frame.image.descriptor.height\n    }\n  }; // color table\n\n  if (image.descriptor.lct && image.descriptor.lct.exists) {\n    resultImage.colorTable = image.lct;\n  } else {\n    resultImage.colorTable = gct;\n  } // add per frame relevant gce information\n\n\n  if (frame.gce) {\n    resultImage.delay = (frame.gce.delay || 10) * 10; // convert to ms\n\n    resultImage.disposalType = frame.gce.extras.disposal; // transparency\n\n    if (frame.gce.extras.transparentColorGiven) {\n      resultImage.transparentIndex = frame.gce.transparentColorIndex;\n    }\n  } // create canvas usable imagedata if desired\n\n\n  if (buildImagePatch) {\n    resultImage.patch = generatePatch(resultImage);\n  }\n\n  return resultImage;\n};\n\nexports.decompressFrame = decompressFrame;\n\nvar decompressFrames = function decompressFrames(parsedGif, buildImagePatches) {\n  return parsedGif.frames.filter(function (f) {\n    return f.image;\n  }).map(function (f) {\n    return decompressFrame(f, parsedGif.gct, buildImagePatches);\n  });\n};\n\nexports.decompressFrames = decompressFrames;","import { decompressFrames, parseGIF } from 'gifuct-js';\n\nexport async function getGifFirstFrame(gifUrl) {\n  try {\n    const response = await fetch(gifUrl);\n    const buffer = await response.arrayBuffer();\n\n    const gif = parseGIF(buffer);\n    const frames = decompressFrames(gif, true);\n\n    if (!frames?.length) return null;\n\n    const { dims, patch } = frames[0];\n    const { width, height } = dims;\n\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n\n    const imageData = new ImageData(patch, width, height);\n    ctx.putImageData(imageData, 0, 0);\n\n    const blob = await new Promise((resolve) => {\n      canvas.toBlob(resolve, 'image/png');\n    });\n\n    return URL.createObjectURL(blob);\n  } catch (e) {\n    return null;\n  }\n}\n","export default function CustomEmoji({ staticUrl, alt, url }) {\n  return (\n    <picture>\n      {staticUrl && (\n        <source srcset={staticUrl} media=\"(prefers-reduced-motion: reduce)\" />\n      )}\n      <img\n        key={alt || url}\n        src={url}\n        alt={alt}\n        class=\"shortcode-emoji emoji\"\n        width=\"16\"\n        height=\"16\"\n        loading=\"lazy\"\n        decoding=\"async\"\n        fetchPriority=\"low\"\n        onLoad={(e) => {\n          try {\n            e.target.dataset.isLarger =\n              e.target.naturalWidth > e.target.width * 2 ||\n              e.target.naturalHeight > e.target.height * 2;\n          } catch (e) {}\n        }}\n      />\n    </picture>\n  );\n}\n","import PQueue from 'p-queue';\nimport { useEffect, useState } from 'preact/hooks';\n\nimport { getGifFirstFrame } from '../utils/get-gif-first-frame';\nimport mem from '../utils/mem';\n\nimport CustomEmoji from './custom-emoji';\n\nconst fetchQueue = new PQueue({\n  concurrency: 2,\n  interval: 1000,\n  intervalCap: 2,\n});\n\nconst throttledFetch = (signal, ...args) =>\n  fetchQueue.add(() => fetch(...args), { signal });\n\nconst SHORTCODES_REGEX = /(\\:(\\w|\\+|\\-)+\\:)(?=|[\\!\\.\\?]|$)/g;\n\nconst shortcodesRegexp = mem((shortcodes) => {\n  return new RegExp(`:(${shortcodes.join('|')}):`, 'g');\n});\n\nconst resolvedEmojisCache = new Map();\nconst MAX_CACHE_SIZE = 30;\n\nconst resolveEmojis = async (resolverURL) => {\n  if (resolvedEmojisCache.has(resolverURL)) {\n    return resolvedEmojisCache.get(resolverURL);\n  }\n\n  try {\n    const response = await throttledFetch(null, resolverURL, {\n      headers: { accept: 'application/activity+json' },\n      referrerPolicy: 'no-referrer',\n    });\n\n    const data = await response.json();\n    const emojiTags = data.tag?.filter((t) => t.type === 'Emoji') || [];\n\n    const emojis = emojiTags.length\n      ? await Promise.all(\n          emojiTags.map(async (t) => {\n            const emoji = {\n              shortcode: t.name.replace(/^:|:$/g, ''),\n              url: t.icon.url,\n            };\n            if (t.icon?.mediaType === 'image/gif') {\n              const staticUrl = await getGifFirstFrame(emoji.url);\n              if (staticUrl) emoji.staticUrl = staticUrl;\n            }\n            return emoji;\n          }),\n        )\n      : [];\n\n    if (resolvedEmojisCache.size >= MAX_CACHE_SIZE) {\n      const firstKey = resolvedEmojisCache.keys().next().value;\n      resolvedEmojisCache.delete(firstKey);\n    }\n\n    resolvedEmojisCache.set(resolverURL, emojis);\n    return emojis;\n  } catch (error) {\n    console.error('Failed to resolve emojis:', error);\n    return [];\n  }\n};\n\nconst renderEmojiText = mem((text, allEmojis, staticEmoji) => {\n  if (!text) return '';\n  if (!text.includes(':')) return text;\n  if (!allEmojis.length) return text;\n\n  const regex = shortcodesRegexp(allEmojis.map((e) => e.shortcode));\n  const elements = text.split(regex).map((word, index) => {\n    const emoji = allEmojis.find((e) => e.shortcode === word);\n\n    if (emoji) {\n      const { url, staticUrl } = emoji;\n      return (\n        <CustomEmoji\n          key={`${word}-${index}`}\n          staticUrl={staticEmoji ? undefined : staticUrl}\n          url={staticEmoji ? staticUrl || url : url}\n          alt={word}\n        />\n      );\n    }\n\n    return word;\n  });\n\n  return elements;\n});\n\nfunction EmojiText({ text, emojis = [], staticEmoji, resolverURL }) {\n  const [resolvedEmojis, setResolvedEmojis] = useState(\n    () => resolvedEmojisCache.get(resolverURL) || [],\n  );\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!resolverURL || !text?.includes(':')) return;\n\n    const matches = text.match(SHORTCODES_REGEX);\n    if (!matches) return;\n\n    const hasUnresolved = matches.some((match) => {\n      const shortcode = match.slice(1, -1);\n      return !emojis.some((e) => e.shortcode === shortcode);\n    });\n    if (!hasUnresolved) return;\n\n    if (resolvedEmojisCache.has(resolverURL)) return;\n\n    setLoading(true);\n\n    (async () => {\n      const emojis = await resolveEmojis(resolverURL);\n      setResolvedEmojis(emojis);\n      setLoading(false);\n    })();\n  }, [resolverURL, text, emojis?.length]);\n\n  if (!text) return '';\n  if (!text.includes(':')) return text;\n\n  if (resolverURL && loading) {\n    return text.replace(SHORTCODES_REGEX, '');\n  }\n\n  const allEmojis = [\n    ...resolvedEmojis.filter(\n      (resolved) =>\n        !emojis.some((emoji) => emoji.shortcode === resolved.shortcode),\n    ),\n    ...emojis,\n  ];\n\n  return renderEmojiText(text, allEmojis, staticEmoji);\n}\n\nexport default EmojiText;\n","import getDomain from '../utils/get-domain';\nimport { getCurrentAccountID } from '../utils/store-utils';\n\nfunction RolesTags({ roles, accountId, accountUrl, hideSelf = false }) {\n  if (!roles?.length) return null;\n\n  const isSelf = accountId && accountId === getCurrentAccountID();\n  if (!accountId && hideSelf) {\n    console.warn('accountId is required if hideSelf is true');\n  }\n  if (hideSelf && isSelf) return null;\n\n  const parsedAccountInstance = getDomain(accountUrl);\n\n  return roles?.map((role) => (\n    <>\n      {' '}\n      <span class=\"tag collapsed tag-role\">\n        {role.name}\n        {!!parsedAccountInstance && (\n          <>\n            {' '}\n            <span class=\"more-insignificant\">{parsedAccountInstance}</span>\n          </>\n        )}\n      </span>\n    </>\n  ));\n}\n\nexport default RolesTags;\n","import './name-text.css';\n\nimport { useLingui } from '@lingui/react';\n\nimport { api } from '../utils/api';\nimport mem from '../utils/mem';\nimport states from '../utils/states';\n\nimport Avatar from './avatar';\nimport EmojiText from './emoji-text';\nimport RolesTags from './roles-tags';\n\nconst nameCollator = mem((locale) => {\n  const options = {\n    sensitivity: 'base',\n  };\n  try {\n    return new Intl.Collator(locale || undefined, options);\n  } catch (e) {\n    return new Intl.Collator(undefined, options);\n  }\n});\n\nconst ACCT_REGEX = /([^@]+)(@.+)/i;\nconst SHORTCODES_REGEX = /(\\:(\\w|\\+|\\-)+\\:)(?=|[\\!\\.\\?]|$)/g;\nconst SPACES_REGEX = /\\s+/g;\nconst NON_ALPHA_NUMERIC_REGEX = /[^a-z0-9@\\.]/gi;\n\nfunction NameText({\n  account,\n  instance,\n  showAvatar,\n  showAcct,\n  short,\n  external,\n  onClick,\n}) {\n  const { i18n } = useLingui();\n  if (!account) return null;\n  const {\n    acct,\n    avatar,\n    avatarStatic,\n    id,\n    url,\n    displayName,\n    emojis,\n    bot,\n    username,\n    roles,\n  } = account;\n  const [_, acct1, acct2] = acct.match(ACCT_REGEX) || [, acct];\n\n  if (!instance) instance = api().instance;\n\n  const trimmedUsername = username.toLowerCase().trim();\n  const trimmedDisplayName = (displayName || '').toLowerCase().trim();\n  const shortenedDisplayName = trimmedDisplayName\n    .replace(SHORTCODES_REGEX, '') // Remove shortcodes, regex from https://regex101.com/r/iE9uV0/1\n    .replace(SPACES_REGEX, ''); // E.g. \"My name\" === \"myname\"\n  const shortenedAlphaNumericDisplayName = shortenedDisplayName.replace(\n    NON_ALPHA_NUMERIC_REGEX,\n    '',\n  ); // Remove non-alphanumeric characters\n\n  const hideUsername =\n    (!short &&\n      (trimmedUsername === trimmedDisplayName ||\n        trimmedUsername === shortenedDisplayName ||\n        trimmedUsername === shortenedAlphaNumericDisplayName ||\n        nameCollator(i18n.locale).compare(\n          trimmedUsername,\n          shortenedDisplayName,\n        ) === 0)) ||\n    shortenedAlphaNumericDisplayName === acct.toLowerCase();\n\n  return (\n    <a\n      class={`name-text ${showAcct ? 'show-acct' : ''} ${short ? 'short' : ''}`}\n      href={url}\n      target={external ? '_blank' : null}\n      title={\n        displayName\n          ? `${displayName} (${acct2 ? '' : '@'}${acct})`\n          : `${acct2 ? '' : '@'}${acct}`\n      }\n      onClick={(e) => {\n        if (external) return;\n        if (e.shiftKey) return; // Save link? \n        e.preventDefault();\n        e.stopPropagation();\n        if (onClick) return onClick(e);\n        if (e.metaKey || e.ctrlKey || e.shiftKey || e.which === 2) {\n          const internalURL = `#/${instance}/a/${id}`;\n          window.open(internalURL, '_blank');\n          return;\n        }\n        states.showAccount = {\n          account,\n          instance,\n        };\n      }}\n    >\n      {showAvatar && (\n        <>\n          <Avatar url={avatarStatic || avatar} squircle={bot} />{' '}\n        </>\n      )}\n      {displayName && !short ? (\n        <>\n          <b dir=\"auto\">\n            <EmojiText\n              text={displayName}\n              emojis={emojis}\n              resolverURL={account.url}\n              staticEmoji\n            />\n          </b>\n          {!showAcct && !hideUsername && (\n            <>\n              {' '}\n              <i class=\"bidi-isolate\">@{username}</i>\n              <RolesTags\n                roles={roles}\n                accountId={id}\n                accountUrl={url}\n                hideSelf\n              />\n            </>\n          )}\n        </>\n      ) : short ? (\n        <i>{username}</i>\n      ) : (\n        <b>{username}</b>\n      )}\n      {showAcct && (\n        <>\n          <br />\n          <i class=\"bidi-isolate\">\n            {acct2 ? '' : '@'}\n            {acct1}\n            {!!acct2 && <span class=\"ib\">{acct2}</span>}\n          </i>\n          <RolesTags roles={roles} accountUrl={url} />\n        </>\n      )}\n    </a>\n  );\n}\n\nexport default NameText;\n","import{useRef as r,useEffect as n,useMemo as t,useState as e,useCallback as u}from\"react\";function c(e,u,c,i){var a=this,o=r(null),f=r(0),l=r(0),v=r(null),m=r([]),d=r(),g=r(),p=r(e),w=r(!0);p.current=e;var s=\"undefined\"!=typeof window,x=!u&&0!==u&&s;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");u=+u||0;var h=!!(c=c||{}).leading,y=!(\"trailing\"in c)||!!c.trailing,F=\"maxWait\"in c,A=\"debounceOnServer\"in c&&!!c.debounceOnServer,D=F?Math.max(+c.maxWait||0,u):null;n(function(){return w.current=!0,function(){w.current=!1}},[]);var T=t(function(){var r=function(r){var n=m.current,t=d.current;return m.current=d.current=null,f.current=r,l.current=l.current||r,g.current=p.current.apply(t,n)},n=function(r,n){x&&cancelAnimationFrame(v.current),v.current=x?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!w.current)return!1;var n=r-o.current;return!o.current||n>=u||n<0||F&&r-f.current>=D},e=function(n){return v.current=null,y&&m.current?r(n):(m.current=d.current=null,g.current)},c=function r(){var c=Date.now();if(h&&l.current===f.current&&T(),t(c))return e(c);if(w.current){var i=u-(c-o.current),a=F?Math.min(i,D-(c-f.current)):i;n(r,a)}},T=function(){i&&i({})},W=function(){if(s||A){var e=Date.now(),i=t(e);if(m.current=[].slice.call(arguments),d.current=a,o.current=e,i){if(!v.current&&w.current)return f.current=o.current,n(c,u),h?r(o.current):g.current;if(F)return n(c,u),r(o.current)}return v.current||n(c,u),g.current}};return W.cancel=function(){var r=v.current;r&&(x?cancelAnimationFrame(v.current):clearTimeout(v.current)),f.current=0,m.current=o.current=d.current=v.current=null,r&&i&&i({})},W.isPending=function(){return!!v.current},W.flush=function(){return v.current?e(Date.now()):g.current},W},[h,F,u,D,y,x,s,A,i]);return T}function i(r,n){return r===n}function a(n,t,a){var o=a&&a.equalityFn||i,f=r(n),l=e({})[1],v=c(u(function(r){f.current=r,l({})},[l]),t,a,l),m=r(n);return o(m.current,n)||(v(n),m.current=n),[f.current,v]}function o(r,n,t){var e=void 0===t?{}:t,u=e.leading,i=e.trailing;return c(r,n,{maxWait:n,leading:void 0===u||u,trailing:void 0===i||i})}export{a as useDebounce,c as useDebouncedCallback,o as useThrottledCallback};\n//# sourceMappingURL=index.module.js.map\n","import { i18n } from '@lingui/core';\n\nimport translangLanguagesNative from '../data/translang-languages-native';\n\nimport mem from './mem';\n\n// Some codes are not supported by Intl.DisplayNames\n// These are mapped to other codes as fallback\nconst codeMappings = {\n  'zh-YUE': 'YUE',\n  zh_HANT: 'zh-Hant',\n};\n\nconst IntlDN = mem(\n  (locale) =>\n    new Intl.DisplayNames(locale || undefined, {\n      type: 'language',\n    }),\n);\n\nfunction _localeCode2Text(code) {\n  let locale;\n  let fallback;\n  if (typeof code === 'object') {\n    ({ code, locale, fallback } = code);\n  }\n  try {\n    const text = IntlDN(locale || i18n.locale).of(code);\n    if (text !== code) return text;\n    if (!fallback) {\n      const anotherText = IntlDN(code).of(code);\n      if (anotherText !== code) return anotherText;\n      const yetAnotherText = translangLanguagesNative?.[locale];\n      if (yetAnotherText !== code) return yetAnotherText;\n    }\n    return fallback || '';\n  } catch (e) {\n    if (codeMappings[code]) {\n      try {\n        const text = IntlDN(codeMappings[locale] || locale || i18n.locale).of(\n          codeMappings[code],\n        );\n        if (text !== codeMappings[code]) return text;\n        return fallback || '';\n      } catch (e2) {\n        console.warn(code, e2);\n      }\n    }\n    return fallback || '';\n  }\n}\n\nexport default mem(_localeCode2Text);\n","import languages from '../data/translang-languages';\n\nimport { getDtfLocale } from './dtf-locale';\nimport localeMatch from './locale-match';\nimport states from './states';\n\nconst translationTargetLanguages = Object.entries(languages.tl).map(\n  ([code, { name }]) => ({\n    code,\n    name,\n  }),\n);\n\nconst locales = [...navigator.languages];\nconst dtfLocale = getDtfLocale();\nif (dtfLocale && !locales.includes(dtfLocale)) {\n  locales.unshift(dtfLocale);\n}\n\nconst localeTargetLanguages = () =>\n  localeMatch(\n    locales,\n    translationTargetLanguages.map((l) => l.code.replace('_', '-')), // The underscore will fail Intl.Locale inside `match`\n    'en',\n  );\n\nfunction getTranslateTargetLanguage(fromSettings = false) {\n  if (fromSettings) {\n    const { contentTranslationTargetLanguage } = states.settings;\n    if (contentTranslationTargetLanguage) {\n      return contentTranslationTargetLanguage;\n    }\n  }\n  return localeTargetLanguages();\n}\n\nexport default getTranslateTargetLanguage;\n","import { i18n } from '@lingui/core';\n\n// https://tc39.es/ecma402/#table-sanctioned-single-unit-identifiers\nconst BYTES_UNITS = [\n  'byte',\n  'kilobyte',\n  'megabyte',\n  'gigabyte',\n  'terabyte',\n  'petabyte',\n];\nexport default function prettyBytes(bytes) {\n  const unitIndex = Math.min(\n    Math.floor(Math.log2(bytes) / 10),\n    BYTES_UNITS.length - 1,\n  );\n  const value = bytes / 1024 ** unitIndex;\n  return i18n.number(value, {\n    style: 'unit',\n    unit: BYTES_UNITS[unitIndex],\n    unitDisplay: 'narrow',\n    maximumFractionDigits: 0,\n  });\n}\n","import { getAPIVersions } from './store-utils';\n\nexport function supportsNativeQuote() {\n  return getAPIVersions()?.mastodon >= 7;\n}\n\nexport function getPostQuoteApprovalPolicy(quoteApproval) {\n  return quoteApproval?.[quoteApproval?.currentUser]?.[0] || 'nobody';\n}\n","const ESCAPE_REGEX = /[.*+?^${}()|[\\]\\\\]/g;\nconst HTML_ESCAPE_MAP = {\n  '&': '&amp;',\n  '\"': '&quot;',\n  '<': '&lt;',\n  '>': '&gt;',\n};\nconst HTML_ESCAPE_REGEX = /[&\"<>]/g;\n\nfunction escapeRegex(str) {\n  return str.replace(ESCAPE_REGEX, '\\\\$&');\n}\n\nfunction escapeHTML(str) {\n  return str.replace(HTML_ESCAPE_REGEX, (char) => HTML_ESCAPE_MAP[char]);\n}\n\nfunction emojifyText(text, emojis = []) {\n  if (!text) return '';\n  if (!emojis.length) return text;\n  if (!text.includes(':')) return text;\n\n  // Deduplicate emojis by shortcode and filter out invalid entries\n  const emojiMap = new Map();\n  for (let i = 0; i < emojis.length; i++) {\n    const emoji = emojis[i];\n    if (emoji?.shortcode && emoji?.url) {\n      emojiMap.set(emoji.shortcode, emoji);\n    }\n  }\n\n  if (emojiMap.size === 0) return text;\n\n  const shortcodes = Array.from(emojiMap.keys());\n  const pattern = shortcodes.map((sc) => `:${escapeRegex(sc)}:`).join('|');\n  const regex = new RegExp(pattern, 'g');\n\n  return text.replace(regex, (match) => {\n    const shortcode = match.slice(1, -1);\n    const emoji = emojiMap.get(shortcode);\n\n    if (!emoji) return match;\n\n    const { staticUrl, url } = emoji;\n    const escapedShortcode = escapeHTML(match);\n\n    const sourceTag = staticUrl\n      ? `<source srcset=\"${staticUrl}\" media=\"(prefers-reduced-motion: reduce)\"></source>`\n      : '';\n\n    return `<picture>${sourceTag}<img class=\"shortcode-emoji emoji\" src=\"${url}\" alt=\"${escapedShortcode}\" title=\"${shortcode}\" width=\"16\" height=\"16\" loading=\"lazy\" decoding=\"async\" fetchPriority=\"low\" onload=\"try { this.dataset.isLarger = this.naturalWidth > (this.width * 2) || this.naturalHeight > (this.height * 2) } catch (e) {}\" /></picture>`;\n  });\n}\n\nexport default emojifyText;\n","const HTML_CHARS_REGEX = /[&<>\"']/g;\nconst HTML_ENTITIES = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&apos;',\n};\n\nexport default function escapeHTML(text) {\n  return text.replace(HTML_CHARS_REGEX, (c) => HTML_ENTITIES[c]);\n}\n","import emojifyText from './emojify-text';\nimport escapeHTML from './escape-html';\nimport mem from './mem';\n\nconst fauxDiv = document.createElement('div');\nconst whitelistLinkClasses = ['u-url', 'mention', 'hashtag'];\n\nconst LINK_REGEX = /<a/i;\nconst HTTP_LINK_REGEX = /^https?:\\/\\//i;\nconst MENTION_REGEX = /^[@][^@]+(@[^@]+)?$/;\nconst HASHTAG_REGEX = /^[#][^#]+$/;\nconst CODE_BLOCK_REGEX = /^```[^]+```$/;\nconst CODE_BLOCK_START_REGEX = /^```/;\nconst CODE_BLOCK_END_REGEX = /```$/;\nconst INLINE_CODE_REGEX = /`[^`]+`/;\nconst TWITTER_DOMAIN_REGEX = /(twitter|x)\\.com/i;\nconst TWITTER_MENTION_REGEX = /@[a-zA-Z0-9_]+@(twitter|x)\\.com/;\nconst TWITTER_MENTION_CAPTURE_REGEX = /(@([a-zA-Z0-9_]+)@(twitter|x)\\.com)/g;\nconst CODE_INLINE_CAPTURE_REGEX = /(`[^]+?`)/g;\n\nfunction createDOM(html, isDocumentFragment) {\n  if (isDocumentFragment) {\n    const tpl = document.createElement('template');\n    tpl.innerHTML = html;\n    return tpl.content;\n  } else {\n    const tpl = document.createElement('div');\n    tpl.innerHTML = html;\n    return tpl;\n  }\n}\n\nfunction _enhanceContent(content, opts = {}) {\n  if (!content) return '';\n  const { emojis, returnDOM, postEnhanceDOM = () => {} } = opts;\n  let enhancedContent = content;\n  // const dom = document.createElement('div');\n  // dom.innerHTML = enhancedContent;\n  const dom = createDOM(enhancedContent, returnDOM);\n  const hasLink = LINK_REGEX.test(enhancedContent);\n  const hasCodeBlock = enhancedContent.includes('```');\n\n  if (hasLink) {\n    // Add target=\"_blank\" to all links with no target=\"_blank\"\n    // E.g. `note` in `account`\n    const noTargetBlankLinks = dom.querySelectorAll('a:not([target=\"_blank\"])');\n    for (const link of noTargetBlankLinks) {\n      link.setAttribute('target', '_blank');\n    }\n\n    // Remove all classes except `u-url`, `mention`, `hashtag`\n    const links = dom.querySelectorAll('a[class]');\n    for (const link of links) {\n      for (const c of link.classList) {\n        if (!whitelistLinkClasses.includes(c)) {\n          link.classList.remove(c);\n        }\n      }\n    }\n  }\n\n  // Add 'has-url-text' to all links that contains a url\n  if (hasLink) {\n    const links = dom.querySelectorAll('a[href]');\n    for (const link of links) {\n      if (HTTP_LINK_REGEX.test(link.textContent.trim())) {\n        link.classList.add('has-url-text');\n        shortenLink(link);\n      }\n    }\n  }\n\n  // Spanify un-spanned mentions\n  if (hasLink) {\n    const links = dom.querySelectorAll('a[href]');\n    const usernames = [];\n    for (const link of links) {\n      const text = link.innerText.trim();\n      const hasChildren = link.querySelector('*');\n      // If text looks like @username@domain, then it's a mention\n      if (MENTION_REGEX.test(text)) {\n        // Only show @username\n        const atSymbol = text[0]; // Preserve the original @ or \n        const [_, username, domain] = text.split(/[@]/);\n        if (!hasChildren) {\n          if (\n            !usernames.some(([u]) => u === username) ||\n            usernames.some(([u, d]) => u === username && d === domain)\n          ) {\n            link.innerHTML = `${atSymbol}<span>${username}</span>`;\n            usernames.push([username, domain]);\n          } else {\n            link.innerHTML = `${atSymbol}<span>${username}@${domain}</span>`;\n          }\n        }\n        link.classList.add('mention');\n      }\n      // If text looks like #hashtag, then it's a hashtag\n      if (HASHTAG_REGEX.test(text)) {\n        const hashSymbol = text[0]; // Preserve the original # or \n        if (!hasChildren)\n          link.innerHTML = `${hashSymbol}<span>${text.slice(1)}</span>`;\n        link.classList.add('mention', 'hashtag');\n      }\n    }\n  }\n\n  // EMOJIS\n  // ======\n  // Convert :shortcode: to <img />\n  let textNodes;\n  if (enhancedContent.includes(':') && emojis?.length) {\n    textNodes = extractTextNodes(dom);\n    for (const node of textNodes) {\n      let html = escapeHTML(node.nodeValue);\n      html = emojifyText(html, emojis);\n      fauxDiv.innerHTML = html;\n      node.replaceWith(...fauxDiv.childNodes);\n    }\n  }\n\n  // CODE BLOCKS\n  // ===========\n  // Convert ```code``` to <pre><code>code</code></pre>\n  if (hasCodeBlock) {\n    const blocks = [...dom.querySelectorAll('p')].filter((p) =>\n      CODE_BLOCK_REGEX.test(p.innerText.trim()),\n    );\n    for (const block of blocks) {\n      const pre = document.createElement('pre');\n      // Replace <br /> with newlines\n      for (const br of block.querySelectorAll('br')) {\n        br.replaceWith('\\n');\n      }\n      pre.innerHTML = `<code>${block.innerHTML.trim()}</code>`;\n      block.replaceWith(pre);\n    }\n  }\n\n  // Convert multi-paragraph code blocks to <pre><code>code</code></pre>\n  if (hasCodeBlock) {\n    const paragraphs = [...dom.querySelectorAll('p')];\n    // Filter out paragraphs with ``` in beginning only\n    const codeBlocks = paragraphs.filter((p) =>\n      CODE_BLOCK_START_REGEX.test(p.innerText),\n    );\n    // For each codeBlocks, get all paragraphs until the last paragraph with ``` at the end only\n    for (const block of codeBlocks) {\n      const nextParagraphs = [block];\n      let hasCodeBlock = false;\n      let currentBlock = block;\n      while (currentBlock.nextElementSibling) {\n        const next = currentBlock.nextElementSibling;\n        if (next && next.tagName === 'P') {\n          if (CODE_BLOCK_END_REGEX.test(next.innerText)) {\n            nextParagraphs.push(next);\n            hasCodeBlock = true;\n            break;\n          } else {\n            nextParagraphs.push(next);\n          }\n        } else {\n          break;\n        }\n        currentBlock = next;\n      }\n      if (hasCodeBlock) {\n        const pre = document.createElement('pre');\n        for (const p of nextParagraphs) {\n          // Replace <br /> with newlines\n          for (const br of p.querySelectorAll('br')) {\n            br.replaceWith('\\n');\n          }\n        }\n        const codeText = nextParagraphs.map((p) => p.innerHTML).join('\\n\\n');\n        pre.innerHTML = `<code tabindex=\"0\">${codeText}</code>`;\n        block.replaceWith(pre);\n        for (const p of nextParagraphs) {\n          p.remove();\n        }\n      }\n    }\n  }\n\n  // INLINE CODE\n  // ===========\n  // Convert `code` to <code>code</code>\n  if (enhancedContent.includes('`')) {\n    textNodes = extractTextNodes(dom);\n    for (const node of textNodes) {\n      let html = escapeHTML(node.nodeValue);\n      if (INLINE_CODE_REGEX.test(html)) {\n        html = html.replaceAll(CODE_INLINE_CAPTURE_REGEX, '<code>$1</code>');\n      }\n      fauxDiv.innerHTML = html;\n      // const nodes = [...fauxDiv.childNodes];\n      node.replaceWith(...fauxDiv.childNodes);\n    }\n  }\n\n  // TWITTER USERNAMES\n  // =================\n  // Convert @username@twitter.com to <a href=\"https://twitter.com/username\">@username@twitter.com</a>\n  if (TWITTER_DOMAIN_REGEX.test(enhancedContent)) {\n    textNodes = extractTextNodes(dom, {\n      rejectFilter: ['A'],\n    });\n    for (const node of textNodes) {\n      let html = escapeHTML(node.nodeValue);\n      if (TWITTER_MENTION_REGEX.test(html)) {\n        html = html.replaceAll(\n          TWITTER_MENTION_CAPTURE_REGEX,\n          '<a href=\"https://twitter.com/$2\" rel=\"nofollow noopener\" target=\"_blank\">$1</a>',\n        );\n      }\n      fauxDiv.innerHTML = html;\n      // const nodes = [...fauxDiv.childNodes];\n      node.replaceWith(...fauxDiv.childNodes);\n    }\n  }\n\n  // HASHTAG STUFFING\n  // ================\n  // Get the <p> that contains a lot of hashtags, add a class to it\n  if (enhancedContent.includes('#') || enhancedContent.includes('')) {\n    let prevIndex = null;\n    const hashtagStuffedParagraphs = [...dom.querySelectorAll('p')].filter(\n      (p, index) => {\n        let hashtagCount = 0;\n        for (let i = 0; i < p.childNodes.length; i++) {\n          const node = p.childNodes[i];\n\n          if (node.nodeType === Node.TEXT_NODE) {\n            const text = node.textContent.trim();\n            if (text !== '') {\n              return false;\n            }\n          } else if (node.tagName === 'BR') {\n            // Ignore <br />\n          } else if (node.tagName === 'A') {\n            const linkText = node.textContent.trim();\n            if (\n              !linkText ||\n              !(linkText.startsWith('#') || linkText.startsWith(''))\n            ) {\n              return false;\n            } else {\n              hashtagCount++;\n            }\n          } else {\n            return false;\n          }\n        }\n        // Only consider \"stuffing\" if:\n        // - there are more than 3 hashtags\n        // - there are more than 1 hashtag in adjacent paragraphs\n        if (hashtagCount > 3) {\n          prevIndex = index;\n          return true;\n        }\n        if (hashtagCount > 1 && prevIndex && index === prevIndex + 1) {\n          prevIndex = index;\n          return true;\n        }\n      },\n    );\n    if (hashtagStuffedParagraphs?.length) {\n      for (const p of hashtagStuffedParagraphs) {\n        p.classList.add('hashtag-stuffing');\n        p.title = p.innerText;\n      }\n    }\n  }\n\n  // ADD ASPECT RATIO TO ALL IMAGES\n  if (enhancedContent.includes('<img')) {\n    const imgs = dom.querySelectorAll('img');\n    for (let i = 0; i < imgs.length; i++) {\n      const img = imgs[i];\n      const width = img.getAttribute('width') || img.naturalWidth;\n      const height = img.getAttribute('height') || img.naturalHeight;\n      if (width && height) {\n        img.style.setProperty('--original-aspect-ratio', `${width}/${height}`);\n      }\n    }\n  }\n\n  // FIX CLOAK MODE FOR SAFARI\n  // Workaround for Safari so that `text-decoration-thickness` works\n  // Wrap child text nodes in spans\n  for (const node of dom.childNodes) {\n    if (node.nodeType === Node.TEXT_NODE && node.textContent.trim?.()) {\n      const span = document.createElement('span');\n      span.textContent = node.textContent;\n      dom.replaceChild(span, node);\n    }\n  }\n\n  if (postEnhanceDOM) {\n    queueMicrotask(() => postEnhanceDOM(dom));\n    // postEnhanceDOM(dom); // mutate dom\n  }\n\n  return returnDOM ? dom : dom.innerHTML;\n}\nconst enhanceContent = mem(_enhanceContent);\n\nconst defaultRejectFilter = [\n  // Document metadata\n  'STYLE',\n  // Image and multimedia\n  'IMG',\n  'VIDEO',\n  'AUDIO',\n  'AREA',\n  'MAP',\n  'TRACK',\n  // Embedded content\n  'EMBED',\n  'IFRAME',\n  'OBJECT',\n  'PICTURE',\n  'PORTAL',\n  'SOURCE',\n  // SVG and MathML\n  'SVG',\n  'MATH',\n  // Scripting\n  'CANVAS',\n  'NOSCRIPT',\n  'SCRIPT',\n  // Forms\n  'INPUT',\n  'OPTION',\n  'TEXTAREA',\n  // Web Components\n  'SLOT',\n  'TEMPLATE',\n];\nconst defaultRejectFilterMap = Object.fromEntries(\n  defaultRejectFilter.map((nodeName) => [nodeName, true]),\n);\n\nconst URL_PREFIX_REGEX = /^(https?:\\/\\/(www\\.)?|xmpp:)/;\nconst URL_DISPLAY_LENGTH = 30;\n// Similar to https://github.com/mastodon/mastodon/blob/1666b1955992e16f4605b414c6563ca25b3a3f18/app/lib/text_formatter.rb#L54-L69\nfunction shortenLink(link) {\n  if (!link || link.querySelector?.('*')) {\n    return;\n  }\n  try {\n    const url = link.innerText.trim();\n    const prefix = (url.match(URL_PREFIX_REGEX) || [])[0] || '';\n    if (!prefix) return;\n    const displayURL = url.slice(\n      prefix.length,\n      prefix.length + URL_DISPLAY_LENGTH,\n    );\n    const suffix = url.slice(prefix.length + URL_DISPLAY_LENGTH);\n    const cutoff = url.slice(prefix.length).length > URL_DISPLAY_LENGTH;\n    link.innerHTML = `<span class=\"invisible\">${prefix}</span><span class=${\n      cutoff ? 'ellipsis' : ''\n    }>${displayURL}</span><span class=\"invisible\">${suffix}</span>`;\n  } catch (e) {}\n}\n\nfunction extractTextNodes(dom, opts = {}) {\n  const textNodes = [];\n  const rejectFilterMap = Object.assign(\n    {},\n    defaultRejectFilterMap,\n    opts.rejectFilter?.reduce((acc, cur) => {\n      acc[cur] = true;\n      return acc;\n    }, {}),\n  );\n  const walk = document.createTreeWalker(\n    dom,\n    NodeFilter.SHOW_TEXT,\n    {\n      acceptNode(node) {\n        if (rejectFilterMap[node.parentNode.nodeName]) {\n          return NodeFilter.FILTER_REJECT;\n        }\n        return NodeFilter.FILTER_ACCEPT;\n      },\n    },\n    false,\n  );\n  let node;\n  while ((node = walk.nextNode())) {\n    textNodes.push(node);\n  }\n  return textNodes;\n}\n\nexport default enhanceContent;\n","import states from './states';\n\nconst supportsHover = window.matchMedia('(hover: hover)').matches;\n\nfunction handleContentLinks(opts) {\n  const { mentions = [], instance, previewMode, statusURL } = opts || {};\n  return (e) => {\n    // If cmd/ctrl/shift/alt key is pressed or middle-click, let the browser handle it\n    if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || e.which === 2) {\n      return;\n    }\n\n    let { target } = e;\n\n    // Experiment opening custom emoji in a modal\n    // TODO: Rename this function because it's not just for links\n    if (target.closest('.shortcode-emoji')) {\n      const { naturalWidth, naturalHeight, width, height } = target;\n      const kindaLargeRatio = 2;\n      const kindaLarge =\n        naturalWidth > width * kindaLargeRatio ||\n        naturalHeight > height * kindaLargeRatio;\n      if (kindaLarge) {\n        e.preventDefault();\n        e.stopPropagation();\n        states.showMediaModal = {\n          mediaAttachments: [\n            {\n              type: 'image',\n              url: target.src,\n              description: target.title || target.alt,\n            },\n          ],\n        };\n        return;\n      }\n    }\n\n    target = target.closest('a');\n    if (!target) return;\n    // Only handle links inside, not itself or anything outside\n    if (!e.currentTarget.contains(target)) return;\n\n    const { href } = target;\n\n    const prevText = target.previousSibling?.textContent;\n    const textBeforeLinkIsAt =\n      prevText?.endsWith('@') || prevText?.endsWith('');\n    const textStartsWithAt =\n      target.innerText.startsWith('@') || target.innerText.startsWith('');\n    if (\n      ((target.classList.contains('u-url') ||\n        target.classList.contains('mention')) &&\n        textStartsWithAt) ||\n      (textBeforeLinkIsAt && !textStartsWithAt)\n    ) {\n      const targetText = (\n        target.querySelector('span') || target\n      ).innerText.trim();\n      const username = targetText.replace(/^[@]/, '');\n      // Only fallback to acct/username check if url doesn't match\n      const mention =\n        mentions.find((mention) => mention.url === href) ||\n        mentions.find(\n          (mention) =>\n            mention.acct === username || mention.username === username,\n        );\n      console.warn('MENTION', mention, href);\n      if (mention) {\n        e.preventDefault();\n        e.stopPropagation();\n        states.showAccount = {\n          account: mention.acct,\n          instance,\n        };\n        return;\n      } else if (!/^http/i.test(targetText)) {\n        console.log('mention not found', targetText);\n        e.preventDefault();\n        e.stopPropagation();\n        states.showAccount = {\n          account: href,\n          instance,\n        };\n        return;\n      }\n    } else if (!previewMode) {\n      const textBeforeLinkIsHash =\n        prevText?.endsWith('#') || prevText?.endsWith('');\n      if (target.classList.contains('hashtag') || textBeforeLinkIsHash) {\n        e.preventDefault();\n        e.stopPropagation();\n        const tag = target.innerText.replace(/^[#]/, '').trim();\n        const hashURL = instance ? `#/${instance}/t/${tag}` : `#/t/${tag}`;\n        console.log({ hashURL });\n        location.hash = hashURL;\n        return;\n      } else if (states.unfurledLinks[href]?.url && statusURL !== href) {\n        // If unfurled AND not self-referential\n        e.preventDefault();\n        e.stopPropagation();\n        states.prevLocation = {\n          pathname: location.hash.replace(/^#/, ''),\n        };\n        location.hash = `#${states.unfurledLinks[href].url}`;\n        return;\n      }\n    }\n\n    try {\n      const urlObj = URL.parse(href);\n      const domain = urlObj.hostname.replace(/^www\\./i, '');\n      const containsDomain = target.innerText\n        .toLowerCase()\n        .includes(domain.toLowerCase());\n      // Only show this on non-hover devices (touch-only)\n      // Assuming that hover-supported = there's a statusbar to see the URL\n      // Non-hover devices don't have statusbar, so we show this\n      if (!containsDomain && !supportsHover) {\n        e.preventDefault();\n        e.stopPropagation();\n        const linkText = target.innerText.trim();\n        states.showOpenLink = {\n          url: href,\n          linkText,\n        };\n      }\n    } catch (e) {}\n  };\n}\n\nexport default handleContentLinks;\n","import { i18n } from '@lingui/core';\n\nexport default function shortenNumber(num) {\n  try {\n    return i18n.number(num, {\n      notation: 'compact',\n      roundingMode: 'floor',\n    });\n  } catch (e) {\n    return num;\n  }\n}\n","import { satisfies } from 'compare-versions';\n\nimport features from '../data/features.json';\n\nimport { getCurrentInstance, getCurrentNodeInfo } from './store-utils';\n\n// Non-semver(?) UA string detection\nconst containPixelfed = /pixelfed/i;\nconst notContainPixelfed = /^(?!.*pixelfed).*$/i;\nconst containPleroma = /pleroma/i;\nconst containAkkoma = /akkoma/i;\nconst containGTS = /gotosocial/i;\nconst platformFeatures = {\n  '@mastodon/lists': notContainPixelfed,\n  '@mastodon/filters': notContainPixelfed,\n  '@mastodon/mentions': notContainPixelfed,\n  '@mastodon/trending-hashtags': notContainPixelfed,\n  '@mastodon/trending-links': notContainPixelfed,\n  '@mastodon/post-bookmark': notContainPixelfed,\n  '@mastodon/post-edit': notContainPixelfed,\n  '@mastodon/profile-edit': notContainPixelfed,\n  '@mastodon/profile-private-note': notContainPixelfed,\n  '@mastodon/pinned-posts': notContainPixelfed,\n  '@pixelfed/trending': containPixelfed,\n  '@pixelfed/home-include-reblogs': containPixelfed,\n  '@pixelfed/global-feed': containPixelfed,\n  '@pleroma/local-visibility-post': containPleroma,\n  '@akkoma/local-visibility-post': containAkkoma,\n};\n\nconst supportsCache = {};\n\nconst semverExtract = /^\\d+\\.\\d+(\\.\\d+)?/;\nconst atSoftwareSlashMatch = /^@([a-z]+)\\//i;\n\nfunction supports(feature) {\n  try {\n    let { version, domain } = getCurrentInstance();\n    let softwareName = getCurrentNodeInfo()?.software?.name || 'mastodon';\n\n    if (softwareName === 'hometown') {\n      // Hometown is a Mastodon fork and inherits its features\n      softwareName = 'mastodon';\n    }\n\n    const key = `${domain}-${feature}`;\n    if (supportsCache[key]) return supportsCache[key];\n\n    if (platformFeatures[feature]) {\n      return (supportsCache[key] = platformFeatures[feature].test(version));\n    }\n\n    const featureMatch = feature.match(atSoftwareSlashMatch);\n    if (!featureMatch) {\n      // Only software match, e.g. supports('@mastodon')\n      const software = feature.replace(/^@/, '');\n      return (supportsCache[key] = softwareName === software);\n    }\n\n    const range = features[feature];\n    if (!range) return false;\n\n    // '@mastodon/blah' => 'mastodon'\n    const featureSoftware = featureMatch[1];\n\n    const doesSoftwareMatch = featureSoftware === softwareName.toLowerCase();\n    let satisfiesRange = satisfies(version, range, {\n      includePrerelease: true,\n      loose: true,\n    });\n    if (!satisfiesRange) {\n      try {\n        // E.g. \"4.2.1 (compatible; Iceshrimp 2023.12.14-dev-046d237af)\" is invalid semver \n        // This regex extracts numbers with dots out and tries again\n        // Hopefully this doesn't break anything\n        satisfiesRange = satisfies(version.match(semverExtract)?.[0], range, {\n          includePrerelease: true,\n          loose: false,\n        });\n      } catch (e) {\n        // Ignore\n      }\n    }\n    return (supportsCache[key] = doesSoftwareMatch && satisfiesRange);\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default supports;\n","import './account-block.css';\n\nimport { Plural, Trans, useLingui } from '@lingui/react/macro';\n\n// import { useNavigate } from 'react-router-dom';\nimport enhanceContent from '../utils/enhance-content';\nimport niceDateTime from '../utils/nice-date-time';\nimport shortenNumber from '../utils/shorten-number';\nimport states from '../utils/states';\n\nimport Avatar from './avatar';\nimport EmojiText from './emoji-text';\nimport Icon from './icon';\nimport RolesTags from './roles-tags';\n\nfunction AccountBlock({\n  skeleton,\n  account,\n  avatarSize = 'xl',\n  useAvatarStatic = false,\n  instance,\n  external,\n  internal,\n  onClick,\n  showActivity = false,\n  showStats = false,\n  accountInstance,\n  hideDisplayName = false,\n  relationship = {},\n  excludeRelationshipAttrs = [],\n}) {\n  const { t } = useLingui();\n  if (skeleton) {\n    return (\n      <div class=\"account-block skeleton\">\n        <Avatar size={avatarSize} />\n        <span>\n          <b></b>\n          <br />\n          <span class=\"account-block-acct\"></span>\n        </span>\n      </div>\n    );\n  }\n\n  if (!account) {\n    return null;\n  }\n\n  // const navigate = useNavigate();\n\n  const {\n    id,\n    acct,\n    avatar,\n    avatarStatic,\n    displayName,\n    username,\n    emojis,\n    url,\n    statusesCount,\n    lastStatusAt,\n    bot,\n    fields,\n    note,\n    group,\n    followersCount,\n    createdAt,\n    locked,\n    roles,\n  } = account;\n  let [_, acct1, acct2] = acct.match(/([^@]+)(@.+)/i) || [, acct];\n  if (accountInstance) {\n    acct2 = `@${accountInstance}`;\n  }\n\n  const verifiedField = fields?.find((f) => !!f.verifiedAt && !!f.value);\n\n  const excludedRelationship = {};\n  for (const r in relationship) {\n    if (!excludeRelationshipAttrs.includes(r)) {\n      excludedRelationship[r] = relationship[r];\n    }\n  }\n  const hasRelationship =\n    excludedRelationship.following ||\n    excludedRelationship.followedBy ||\n    excludedRelationship.requested;\n\n  return (\n    <a\n      class=\"account-block\"\n      href={url}\n      target={external ? '_blank' : null}\n      title={acct2 ? acct : `@${acct}`}\n      onClick={(e) => {\n        if (external) return;\n        e.preventDefault();\n        if (onClick) return onClick(e);\n        if (internal) {\n          // navigate(`/${instance}/a/${id}`);\n          location.hash = `/${instance}/a/${id}`;\n        } else {\n          states.showAccount = {\n            account,\n            instance,\n          };\n        }\n      }}\n    >\n      <div class=\"avatar-container\">\n        <Avatar\n          url={useAvatarStatic ? avatarStatic : avatar || avatarStatic}\n          staticUrl={useAvatarStatic ? undefined : avatarStatic}\n          size={avatarSize}\n          squircle={bot}\n        />\n      </div>\n      <span class=\"account-block-content\">\n        {!hideDisplayName && (\n          <>\n            {displayName ? (\n              <b>\n                <EmojiText\n                  text={displayName}\n                  emojis={emojis}\n                  resolverURL={url}\n                />\n              </b>\n            ) : (\n              <b>{username}</b>\n            )}\n          </>\n        )}{' '}\n        <span class=\"account-block-acct bidi-isolate\">\n          {acct2 ? '' : '@'}\n          {acct1}\n          <wbr />\n          {acct2}\n          {locked && (\n            <>\n              {' '}\n              <Icon icon=\"lock\" size=\"s\" alt={t`Locked`} />\n            </>\n          )}\n        </span>\n        <RolesTags roles={roles} accountUrl={url} />\n        {showActivity && (\n          <div class=\"account-block-stats\">\n            <Trans>Posts: {shortenNumber(statusesCount)}</Trans>\n            {!!lastStatusAt && (\n              <>\n                {' '}\n                &middot;{' '}\n                <Trans>\n                  Last posted:{' '}\n                  {niceDateTime(lastStatusAt, {\n                    hideTime: true,\n                  })}\n                </Trans>\n              </>\n            )}\n          </div>\n        )}\n        {showStats && (\n          <div class=\"account-block-stats\">\n            {bot && (\n              <>\n                <span class=\"tag collapsed\">\n                  <Icon icon=\"bot\" /> <Trans>Automated</Trans>\n                </span>\n              </>\n            )}\n            {!!group && (\n              <>\n                <span class=\"tag collapsed\">\n                  <Icon icon=\"group\" /> <Trans>Group</Trans>\n                </span>\n              </>\n            )}\n            {hasRelationship && (\n              <div key={relationship.id} class=\"shazam-container-horizontal\">\n                <div class=\"shazam-container-inner\">\n                  {excludedRelationship.following &&\n                  excludedRelationship.followedBy ? (\n                    <span class=\"tag minimal\">\n                      <Trans>Mutual</Trans>\n                    </span>\n                  ) : excludedRelationship.requested ? (\n                    <span class=\"tag minimal\">\n                      <Trans>Requested</Trans>\n                    </span>\n                  ) : excludedRelationship.following ? (\n                    <span class=\"tag minimal\">\n                      <Trans>Following</Trans>\n                    </span>\n                  ) : excludedRelationship.followedBy ? (\n                    <span class=\"tag minimal\">\n                      <Trans>Follows you</Trans>\n                    </span>\n                  ) : null}\n                </div>\n              </div>\n            )}\n            {!!followersCount && (\n              <span class=\"ib\">\n                <Plural\n                  value={followersCount}\n                  one=\"# follower\"\n                  other=\"# followers\"\n                />\n              </span>\n            )}\n            {!!verifiedField && (\n              <span class=\"verified-field\">\n                <Icon icon=\"check-circle\" size=\"s\" alt={t`Verified`} />{' '}\n                <span\n                  dangerouslySetInnerHTML={{\n                    __html: enhanceContent(verifiedField.value, { emojis }),\n                  }}\n                />\n              </span>\n            )}\n            {!bot &&\n              !group &&\n              !hasRelationship &&\n              !followersCount &&\n              !verifiedField &&\n              !!createdAt && (\n                <span class=\"created-at\">\n                  <Trans>\n                    Joined{' '}\n                    <time datetime={createdAt}>\n                      {niceDateTime(createdAt, {\n                        hideTime: true,\n                      })}\n                    </time>\n                  </Trans>\n                </span>\n              )}\n          </div>\n        )}\n      </span>\n    </a>\n  );\n}\n\nexport default AccountBlock;\n","import { api } from './api';\nimport { getCurrentAccountID } from './store-utils';\n\nexport async function fetchRelationships(accounts, relationshipsMap = {}) {\n  if (!accounts?.length) return;\n  const { masto } = api();\n\n  const currentAccount = getCurrentAccountID();\n  const uniqueAccountIds = accounts.reduce((acc, a) => {\n    // 1. Ignore duplicate accounts\n    // 2. Ignore accounts that are already inside relationshipsMap\n    // 3. Ignore currently logged in account\n    if (\n      !acc.includes(a.id) &&\n      !relationshipsMap[a.id] &&\n      a.id !== currentAccount\n    ) {\n      acc.push(a.id);\n    }\n    return acc;\n  }, []);\n  if (!uniqueAccountIds.length) return null;\n\n  try {\n    const relationships = await masto.v1.accounts.relationships.fetch({\n      id: uniqueAccountIds,\n    });\n    const newRelationshipsMap = relationships.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return newRelationshipsMap;\n  } catch (e) {\n    console.error(e);\n    // It's okay to fail\n    return null;\n  }\n}\n","import { i18n } from '@lingui/core';\n\nexport default function i18nDuration(duration, unit) {\n  return () =>\n    i18n.number(duration, {\n      style: 'unit',\n      unit,\n      unitDisplay: 'long',\n    });\n}\n","const objectToString = Object.prototype.toString;\n\nconst isError = value => objectToString.call(value) === '[object Error]';\n\nconst errorMessages = new Set([\n\t'network error', // Chrome\n\t'Failed to fetch', // Chrome\n\t'NetworkError when attempting to fetch resource.', // Firefox\n\t'The Internet connection appears to be offline.', // Safari 16\n\t'Network request failed', // `cross-fetch`\n\t'fetch failed', // Undici (Node.js)\n\t'terminated', // Undici (Node.js)\n\t' A network error occurred.', // Bun (WebKit)\n\t'Network connection lost', // Cloudflare Workers (fetch)\n]);\n\nexport default function isNetworkError(error) {\n\tconst isValid = error\n\t\t&& isError(error)\n\t\t&& error.name === 'TypeError'\n\t\t&& typeof error.message === 'string';\n\n\tif (!isValid) {\n\t\treturn false;\n\t}\n\n\tconst {message, stack} = error;\n\n\t// Safari 17+ has generic message but no stack for network errors\n\tif (message === 'Load failed') {\n\t\treturn stack === undefined\n\t\t\t// Sentry adds its own stack trace to the fetch error, so also check for that\n\t\t\t|| '__sentry_captured__' in error;\n\t}\n\n\t// Deno network errors start with specific text\n\tif (message.startsWith('error sending request for url')) {\n\t\treturn true;\n\t}\n\n\t// Standard network error messages\n\treturn errorMessages.has(message);\n}\n","import isNetworkError from 'is-network-error';\n\nfunction validateRetries(retries) {\n\tif (typeof retries === 'number') {\n\t\tif (retries < 0) {\n\t\t\tthrow new TypeError('Expected `retries` to be a non-negative number.');\n\t\t}\n\n\t\tif (Number.isNaN(retries)) {\n\t\t\tthrow new TypeError('Expected `retries` to be a valid number or Infinity, got NaN.');\n\t\t}\n\t} else if (retries !== undefined) {\n\t\tthrow new TypeError('Expected `retries` to be a number or Infinity.');\n\t}\n}\n\nfunction validateNumberOption(name, value, {min = 0, allowInfinity = false} = {}) {\n\tif (value === undefined) {\n\t\treturn;\n\t}\n\n\tif (typeof value !== 'number' || Number.isNaN(value)) {\n\t\tthrow new TypeError(`Expected \\`${name}\\` to be a number${allowInfinity ? ' or Infinity' : ''}.`);\n\t}\n\n\tif (!allowInfinity && !Number.isFinite(value)) {\n\t\tthrow new TypeError(`Expected \\`${name}\\` to be a finite number.`);\n\t}\n\n\tif (value < min) {\n\t\tthrow new TypeError(`Expected \\`${name}\\` to be \\u2265 ${min}.`);\n\t}\n}\n\nexport class AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\n\t\tif (message instanceof Error) {\n\t\t\tthis.originalError = message;\n\t\t\t({message} = message);\n\t\t} else {\n\t\t\tthis.originalError = new Error(message);\n\t\t\tthis.originalError.stack = this.stack;\n\t\t}\n\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\nfunction calculateDelay(retriesConsumed, options) {\n\tconst attempt = Math.max(1, retriesConsumed + 1);\n\tconst random = options.randomize ? (Math.random() + 1) : 1;\n\n\tlet timeout = Math.round(random * options.minTimeout * (options.factor ** (attempt - 1)));\n\ttimeout = Math.min(timeout, options.maxTimeout);\n\n\treturn timeout;\n}\n\nfunction calculateRemainingTime(start, max) {\n\tif (!Number.isFinite(max)) {\n\t\treturn max;\n\t}\n\n\treturn max - (performance.now() - start);\n}\n\nasync function onAttemptFailure({error, attemptNumber, retriesConsumed, startTime, options}) {\n\tconst normalizedError = error instanceof Error\n\t\t? error\n\t\t: new TypeError(`Non-error was thrown: \"${error}\". You should only throw errors.`);\n\n\tif (normalizedError instanceof AbortError) {\n\t\tthrow normalizedError.originalError;\n\t}\n\n\tconst retriesLeft = Number.isFinite(options.retries)\n\t\t? Math.max(0, options.retries - retriesConsumed)\n\t\t: options.retries;\n\n\tconst maxRetryTime = options.maxRetryTime ?? Number.POSITIVE_INFINITY;\n\n\tconst context = Object.freeze({\n\t\terror: normalizedError,\n\t\tattemptNumber,\n\t\tretriesLeft,\n\t\tretriesConsumed,\n\t});\n\n\tawait options.onFailedAttempt(context);\n\n\tif (calculateRemainingTime(startTime, maxRetryTime) <= 0) {\n\t\tthrow normalizedError;\n\t}\n\n\tconst consumeRetry = await options.shouldConsumeRetry(context);\n\n\tconst remainingTime = calculateRemainingTime(startTime, maxRetryTime);\n\n\tif (remainingTime <= 0 || retriesLeft <= 0) {\n\t\tthrow normalizedError;\n\t}\n\n\tif (normalizedError instanceof TypeError && !isNetworkError(normalizedError)) {\n\t\tif (consumeRetry) {\n\t\t\tthrow normalizedError;\n\t\t}\n\n\t\toptions.signal?.throwIfAborted();\n\t\treturn false;\n\t}\n\n\tif (!await options.shouldRetry(context)) {\n\t\tthrow normalizedError;\n\t}\n\n\tif (!consumeRetry) {\n\t\toptions.signal?.throwIfAborted();\n\t\treturn false;\n\t}\n\n\tconst delayTime = calculateDelay(retriesConsumed, options);\n\tconst finalDelay = Math.min(delayTime, remainingTime);\n\n\toptions.signal?.throwIfAborted();\n\n\tif (finalDelay > 0) {\n\t\tawait new Promise((resolve, reject) => {\n\t\t\tconst onAbort = () => {\n\t\t\t\tclearTimeout(timeoutToken);\n\t\t\t\toptions.signal?.removeEventListener('abort', onAbort);\n\t\t\t\treject(options.signal.reason);\n\t\t\t};\n\n\t\t\tconst timeoutToken = setTimeout(() => {\n\t\t\t\toptions.signal?.removeEventListener('abort', onAbort);\n\t\t\t\tresolve();\n\t\t\t}, finalDelay);\n\n\t\t\tif (options.unref) {\n\t\t\t\ttimeoutToken.unref?.();\n\t\t\t}\n\n\t\t\toptions.signal?.addEventListener('abort', onAbort, {once: true});\n\t\t});\n\t}\n\n\toptions.signal?.throwIfAborted();\n\n\treturn true;\n}\n\nexport default async function pRetry(input, options = {}) {\n\toptions = {...options};\n\n\tvalidateRetries(options.retries);\n\n\tif (Object.hasOwn(options, 'forever')) {\n\t\tthrow new Error('The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.');\n\t}\n\n\toptions.retries ??= 10;\n\toptions.factor ??= 2;\n\toptions.minTimeout ??= 1000;\n\toptions.maxTimeout ??= Number.POSITIVE_INFINITY;\n\toptions.maxRetryTime ??= Number.POSITIVE_INFINITY;\n\toptions.randomize ??= false;\n\toptions.onFailedAttempt ??= () => {};\n\toptions.shouldRetry ??= () => true;\n\toptions.shouldConsumeRetry ??= () => true;\n\n\t// Validate numeric options and normalize edge cases\n\tvalidateNumberOption('factor', options.factor, {min: 0, allowInfinity: false});\n\tvalidateNumberOption('minTimeout', options.minTimeout, {min: 0, allowInfinity: false});\n\tvalidateNumberOption('maxTimeout', options.maxTimeout, {min: 0, allowInfinity: true});\n\tvalidateNumberOption('maxRetryTime', options.maxRetryTime, {min: 0, allowInfinity: true});\n\n\t// Treat non-positive factor as 1 to avoid zero backoff or negative behavior\n\tif (!(options.factor > 0)) {\n\t\toptions.factor = 1;\n\t}\n\n\toptions.signal?.throwIfAborted();\n\n\tlet attemptNumber = 0;\n\tlet retriesConsumed = 0;\n\tconst startTime = performance.now();\n\n\twhile (Number.isFinite(options.retries) ? retriesConsumed <= options.retries : true) {\n\t\tattemptNumber++;\n\n\t\ttry {\n\t\t\toptions.signal?.throwIfAborted();\n\n\t\t\tconst result = await input(attemptNumber);\n\n\t\t\toptions.signal?.throwIfAborted();\n\n\t\t\treturn result;\n\t\t} catch (error) {\n\t\t\tif (await onAttemptFailure({\n\t\t\t\terror,\n\t\t\t\tattemptNumber,\n\t\t\t\tretriesConsumed,\n\t\t\t\tstartTime,\n\t\t\t\toptions,\n\t\t\t})) {\n\t\t\t\tretriesConsumed++;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Should not reach here, but in case it does, throw an error\n\tthrow new Error('Retry attempts exhausted without throwing an error.');\n}\n\nexport function makeRetriable(function_, options) {\n\treturn function (...arguments_) {\n\t\treturn pRetry(() => function_.apply(this, arguments_), options);\n\t};\n}\n","const supportsLanguageDetector = 'LanguageDetector' in self;\nexport const supportsBrowserTranslator =\n  supportsLanguageDetector && 'Translator' in self;\n\n// https://developer.chrome.com/docs/ai/language-detection\nexport let langDetector;\nif (supportsLanguageDetector) {\n  (async () => {\n    try {\n      const availability = await LanguageDetector.availability();\n      if (availability === 'unavailable') {\n        console.log(' Language detector is unavailable');\n        // The language detector isn't usable.\n        return;\n      }\n      if (availability === 'available') {\n        console.log(' Language detector is available');\n        // The language detector can immediately be used.\n        langDetector = await LanguageDetector.create();\n      } else {\n        console.log(` Language detector is ${availability}`);\n        // The language detector can be used after model download.\n        langDetector = await LanguageDetector.create({\n          monitor(m) {\n            m.addEventListener('downloadprogress', (e) => {\n              console.log(\n                ` Language detector: Downloaded ${e.loaded * 100}%`,\n              );\n            });\n          },\n        });\n        await langDetector.ready;\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  })();\n}\n\n// https://developer.chrome.com/docs/ai/translator-api\nexport const translate = async (text, source, target) => {\n  let detectedSourceLanguage;\n  const originalSource = source;\n  if (source === 'auto') {\n    if (!langDetector?.detect) {\n      return {\n        error: 'No language detector',\n      };\n    }\n    try {\n      const results = await langDetector.detect(text);\n      source = results[0].detectedLanguage;\n      detectedSourceLanguage = source;\n    } catch (e) {\n      console.warn(e);\n      return {\n        error: e,\n      };\n    }\n  }\n  const groupLabel = ` BROWSER TRANSLATE ${text}`;\n  console.groupCollapsed(groupLabel);\n  console.log(originalSource, detectedSourceLanguage, target);\n  try {\n    const translatorCapabilities = await Translator.availability({\n      sourceLanguage: source,\n      targetLanguage: target,\n    });\n    // Note: Translator.availability() returns 'unavailable', 'downloadable', 'downloading', or 'available'.\n    if (translatorCapabilities === 'unavailable') {\n      console.groupEnd(groupLabel);\n      return {\n        error: `Unsupported language pair: ${source} -> ${target}`,\n      };\n    }\n    let translator;\n    if (translatorCapabilities === 'available') {\n      translator = await Translator.create({\n        sourceLanguage: source,\n        targetLanguage: target,\n      });\n    } else {\n      translator = await Translator.create({\n        sourceLanguage: source,\n        targetLanguage: target,\n        monitor(m) {\n          m.addEventListener('downloadprogress', (e) => {\n            console.log(\n              `Translate ${source} -> ${target}: Downloaded ${e.loaded * 100}%`,\n            );\n          });\n        },\n      });\n      await translator.ready;\n    }\n\n    const content = await translator.translate(text);\n    console.log(content);\n    console.groupEnd(groupLabel);\n\n    return {\n      content,\n      detectedSourceLanguage,\n      provider: 'browser',\n    };\n  } catch (e) {\n    console.groupEnd(groupLabel);\n    console.error(e);\n    return {\n      error: e,\n    };\n  }\n};\n","\"use client\";\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n// src/InView.tsx\nimport * as React from \"react\";\n\n// src/observe.ts\nvar observerMap = /* @__PURE__ */ new Map();\nvar RootIds = /* @__PURE__ */ new WeakMap();\nvar rootId = 0;\nvar unsupportedValue;\nfunction defaultFallbackInView(inView) {\n  unsupportedValue = inView;\n}\nfunction getRootId(root) {\n  if (!root) return \"0\";\n  if (RootIds.has(root)) return RootIds.get(root);\n  rootId += 1;\n  RootIds.set(root, rootId.toString());\n  return RootIds.get(root);\n}\nfunction optionsToId(options) {\n  return Object.keys(options).sort().filter(\n    (key) => options[key] !== void 0\n  ).map((key) => {\n    return `${key}_${key === \"root\" ? getRootId(options.root) : options[key]}`;\n  }).toString();\n}\nfunction createObserver(options) {\n  const id = optionsToId(options);\n  let instance = observerMap.get(id);\n  if (!instance) {\n    const elements = /* @__PURE__ */ new Map();\n    let thresholds;\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        var _a2;\n        const inView = entry.isIntersecting && thresholds.some((threshold) => entry.intersectionRatio >= threshold);\n        if (options.trackVisibility && typeof entry.isVisible === \"undefined\") {\n          entry.isVisible = inView;\n        }\n        (_a2 = elements.get(entry.target)) == null ? void 0 : _a2.forEach((callback) => {\n          callback(inView, entry);\n        });\n      });\n    }, options);\n    thresholds = observer.thresholds || (Array.isArray(options.threshold) ? options.threshold : [options.threshold || 0]);\n    instance = {\n      id,\n      observer,\n      elements\n    };\n    observerMap.set(id, instance);\n  }\n  return instance;\n}\nfunction observe(element, callback, options = {}, fallbackInView = unsupportedValue) {\n  if (typeof window.IntersectionObserver === \"undefined\" && fallbackInView !== void 0) {\n    const bounds = element.getBoundingClientRect();\n    callback(fallbackInView, {\n      isIntersecting: fallbackInView,\n      target: element,\n      intersectionRatio: typeof options.threshold === \"number\" ? options.threshold : 0,\n      time: 0,\n      boundingClientRect: bounds,\n      intersectionRect: bounds,\n      rootBounds: bounds\n    });\n    return () => {\n    };\n  }\n  const { id, observer, elements } = createObserver(options);\n  const callbacks = elements.get(element) || [];\n  if (!elements.has(element)) {\n    elements.set(element, callbacks);\n  }\n  callbacks.push(callback);\n  observer.observe(element);\n  return function unobserve() {\n    callbacks.splice(callbacks.indexOf(callback), 1);\n    if (callbacks.length === 0) {\n      elements.delete(element);\n      observer.unobserve(element);\n    }\n    if (elements.size === 0) {\n      observer.disconnect();\n      observerMap.delete(id);\n    }\n  };\n}\n\n// src/InView.tsx\nfunction isPlainChildren(props) {\n  return typeof props.children !== \"function\";\n}\nvar InView = class extends React.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"node\", null);\n    __publicField(this, \"_unobserveCb\", null);\n    __publicField(this, \"lastInView\");\n    __publicField(this, \"handleNode\", (node) => {\n      if (this.node) {\n        this.unobserve();\n        if (!node && !this.props.triggerOnce && !this.props.skip) {\n          this.setState({ inView: !!this.props.initialInView, entry: void 0 });\n          this.lastInView = this.props.initialInView;\n        }\n      }\n      this.node = node ? node : null;\n      this.observeNode();\n    });\n    __publicField(this, \"handleChange\", (inView, entry) => {\n      const previousInView = this.lastInView;\n      this.lastInView = inView;\n      if (previousInView === void 0 && !inView) {\n        return;\n      }\n      if (inView && this.props.triggerOnce) {\n        this.unobserve();\n      }\n      if (!isPlainChildren(this.props)) {\n        this.setState({ inView, entry });\n      }\n      if (this.props.onChange) {\n        this.props.onChange(inView, entry);\n      }\n    });\n    this.state = {\n      inView: !!props.initialInView,\n      entry: void 0\n    };\n    this.lastInView = props.initialInView;\n  }\n  componentDidMount() {\n    this.unobserve();\n    this.observeNode();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.rootMargin !== this.props.rootMargin || prevProps.root !== this.props.root || prevProps.threshold !== this.props.threshold || prevProps.skip !== this.props.skip || prevProps.trackVisibility !== this.props.trackVisibility || prevProps.delay !== this.props.delay) {\n      this.unobserve();\n      this.observeNode();\n    }\n  }\n  componentWillUnmount() {\n    this.unobserve();\n  }\n  observeNode() {\n    if (!this.node || this.props.skip) return;\n    const {\n      threshold,\n      root,\n      rootMargin,\n      trackVisibility,\n      delay,\n      fallbackInView\n    } = this.props;\n    if (this.lastInView === void 0) {\n      this.lastInView = this.props.initialInView;\n    }\n    this._unobserveCb = observe(\n      this.node,\n      this.handleChange,\n      {\n        threshold,\n        root,\n        rootMargin,\n        // @ts-expect-error\n        trackVisibility,\n        delay\n      },\n      fallbackInView\n    );\n  }\n  unobserve() {\n    if (this._unobserveCb) {\n      this._unobserveCb();\n      this._unobserveCb = null;\n    }\n  }\n  render() {\n    const { children } = this.props;\n    if (typeof children === \"function\") {\n      const { inView, entry } = this.state;\n      return children({ inView, entry, ref: this.handleNode });\n    }\n    const {\n      as,\n      triggerOnce,\n      threshold,\n      root,\n      rootMargin,\n      onChange,\n      skip,\n      trackVisibility,\n      delay,\n      initialInView,\n      fallbackInView,\n      ...props\n    } = this.props;\n    return React.createElement(\n      as || \"div\",\n      { ref: this.handleNode, ...props },\n      children\n    );\n  }\n};\n\n// src/useInView.tsx\nimport * as React2 from \"react\";\nfunction useInView({\n  threshold,\n  delay,\n  trackVisibility,\n  rootMargin,\n  root,\n  triggerOnce,\n  skip,\n  initialInView,\n  fallbackInView,\n  onChange\n} = {}) {\n  var _a2;\n  const [ref, setRef] = React2.useState(null);\n  const callback = React2.useRef(onChange);\n  const lastInViewRef = React2.useRef(initialInView);\n  const [state, setState] = React2.useState({\n    inView: !!initialInView,\n    entry: void 0\n  });\n  callback.current = onChange;\n  React2.useEffect(\n    () => {\n      if (lastInViewRef.current === void 0) {\n        lastInViewRef.current = initialInView;\n      }\n      if (skip || !ref) return;\n      let unobserve;\n      unobserve = observe(\n        ref,\n        (inView, entry) => {\n          const previousInView = lastInViewRef.current;\n          lastInViewRef.current = inView;\n          if (previousInView === void 0 && !inView) {\n            return;\n          }\n          setState({\n            inView,\n            entry\n          });\n          if (callback.current) callback.current(inView, entry);\n          if (entry.isIntersecting && triggerOnce && unobserve) {\n            unobserve();\n            unobserve = void 0;\n          }\n        },\n        {\n          root,\n          rootMargin,\n          threshold,\n          // @ts-expect-error\n          trackVisibility,\n          delay\n        },\n        fallbackInView\n      );\n      return () => {\n        if (unobserve) {\n          unobserve();\n        }\n      };\n    },\n    // We break the rule here, because we aren't including the actual `threshold` variable\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      // If the threshold is an array, convert it to a string, so it won't change between renders.\n      Array.isArray(threshold) ? threshold.toString() : threshold,\n      ref,\n      root,\n      rootMargin,\n      triggerOnce,\n      skip,\n      trackVisibility,\n      fallbackInView,\n      delay\n    ]\n  );\n  const entryTarget = (_a2 = state.entry) == null ? void 0 : _a2.target;\n  const previousEntryTarget = React2.useRef(void 0);\n  if (!ref && entryTarget && !triggerOnce && !skip && previousEntryTarget.current !== entryTarget) {\n    previousEntryTarget.current = entryTarget;\n    setState({\n      inView: !!initialInView,\n      entry: void 0\n    });\n    lastInViewRef.current = initialInView;\n  }\n  const result = [setRef, state.inView, state.entry];\n  result.ref = result[0];\n  result.inView = result[1];\n  result.entry = result[2];\n  return result;\n}\n\n// src/useOnInView.tsx\nimport * as React3 from \"react\";\nvar _a, _b;\nvar useSyncEffect = (_b = (_a = React3.useInsertionEffect) != null ? _a : React3.useLayoutEffect) != null ? _b : React3.useEffect;\nvar useOnInView = (onIntersectionChange, {\n  threshold,\n  root,\n  rootMargin,\n  trackVisibility,\n  delay,\n  triggerOnce,\n  skip\n} = {}) => {\n  const onIntersectionChangeRef = React3.useRef(onIntersectionChange);\n  const observedElementRef = React3.useRef(null);\n  const observerCleanupRef = React3.useRef(void 0);\n  const lastInViewRef = React3.useRef(void 0);\n  useSyncEffect(() => {\n    onIntersectionChangeRef.current = onIntersectionChange;\n  }, [onIntersectionChange]);\n  return React3.useCallback(\n    (element) => {\n      const cleanupExisting = () => {\n        if (observerCleanupRef.current) {\n          const cleanup = observerCleanupRef.current;\n          observerCleanupRef.current = void 0;\n          cleanup();\n        }\n      };\n      if (element === observedElementRef.current) {\n        return observerCleanupRef.current;\n      }\n      if (!element || skip) {\n        cleanupExisting();\n        observedElementRef.current = null;\n        lastInViewRef.current = void 0;\n        return;\n      }\n      cleanupExisting();\n      observedElementRef.current = element;\n      let destroyed = false;\n      const destroyObserver = observe(\n        element,\n        (inView, entry) => {\n          const previousInView = lastInViewRef.current;\n          lastInViewRef.current = inView;\n          if (previousInView === void 0 && !inView) {\n            return;\n          }\n          onIntersectionChangeRef.current(\n            inView,\n            entry\n          );\n          if (triggerOnce && inView) {\n            stopObserving();\n          }\n        },\n        {\n          threshold,\n          root,\n          rootMargin,\n          trackVisibility,\n          delay\n        }\n      );\n      function stopObserving() {\n        if (destroyed) return;\n        destroyed = true;\n        destroyObserver();\n        observedElementRef.current = null;\n        observerCleanupRef.current = void 0;\n        lastInViewRef.current = void 0;\n      }\n      observerCleanupRef.current = stopObserving;\n      return observerCleanupRef.current;\n    },\n    [\n      Array.isArray(threshold) ? threshold.toString() : threshold,\n      root,\n      rootMargin,\n      trackVisibility,\n      delay,\n      triggerOnce,\n      skip\n    ]\n  );\n};\nexport {\n  InView,\n  defaultFallbackInView,\n  observe,\n  useInView,\n  useOnInView\n};\n//# sourceMappingURL=index.mjs.map","/*\n  Rendered but hidden. Only show when visible\n*/\nimport { useCallback, useLayoutEffect, useRef, useState } from 'preact/hooks';\nimport { useOnInView } from 'react-intersection-observer';\n\n// The sticky header, usually at the top\nconst TOP = 48;\n\nconst shazamIDs = {};\n\nexport default function LazyShazam({ id, children }) {\n  const containerRef = useRef();\n  const [visibleStart, setVisibleStart] = useState(!!shazamIDs[id]);\n\n  const onInView = useCallback(\n    (inView) => {\n      if (inView && containerRef.current) {\n        containerRef.current.hidden = false;\n        if (id) shazamIDs[id] = true;\n      }\n    },\n    [id],\n  );\n\n  const ref = useOnInView(onInView, {\n    rootMargin: `-${TOP}px 0px 0px 0px`,\n    trackVisibility: true,\n    delay: 1000,\n    triggerOnce: true,\n    skip: visibleStart,\n  });\n\n  useLayoutEffect(() => {\n    if (!containerRef.current) return;\n    const rect = containerRef.current.getBoundingClientRect();\n    if (rect.bottom > TOP) {\n      if (rect.top < window.innerHeight) {\n        containerRef.current.hidden = false;\n      } else {\n        setVisibleStart(true);\n      }\n      if (id) shazamIDs[id] = true;\n    }\n  }, []);\n\n  if (visibleStart) return children;\n\n  return (\n    <div ref={containerRef} class=\"shazam-container no-animation\" hidden>\n      <div ref={ref} class=\"shazam-container-inner\">\n        {children}\n      </div>\n    </div>\n  );\n}\n","import './translation-block.css';\n\nimport { Trans, useLingui } from '@lingui/react/macro';\nimport PQueue from 'p-queue';\nimport pRetry from 'p-retry';\nimport { useEffect, useRef, useState } from 'preact/hooks';\n\nimport languages from '../data/translang-languages';\nimport {\n  translate as browserTranslate,\n  supportsBrowserTranslator,\n} from '../utils/browser-translator';\nimport getTranslateTargetLanguage from '../utils/get-translate-target-language';\nimport localeCode2Text from '../utils/localeCode2Text';\nimport pmem from '../utils/pmem';\n\nimport Icon from './icon';\nimport LazyShazam from './lazy-shazam';\nimport Loader from './loader';\n\nconst sourceLanguages = Object.entries(languages.sl).map(([code, name]) => ({\n  code,\n  name,\n}));\n\nconst { PHANPY_TRANSLANG_INSTANCES } = import.meta.env;\nconst TRANSLANG_INSTANCES = PHANPY_TRANSLANG_INSTANCES\n  ? PHANPY_TRANSLANG_INSTANCES.split(/\\s+/)\n  : [];\n\nconst translationQueue = new PQueue({\n  concurrency: 1,\n  interval: 2000,\n  intervalCap: 1,\n});\n\nconst TRANSLATED_MAX_AGE = 1000 * 60 * 60; // 1 hour\nlet currentTranslangInstance = 0;\n\nfunction _translangTranslate(text, source, target) {\n  console.log('TRANSLATE', text, source, target);\n  const fetchCall = () => {\n    let instance = TRANSLANG_INSTANCES[currentTranslangInstance];\n    const tooLong = text.length > 2000;\n    let fetchPromise;\n    if (tooLong) {\n      // POST\n      fetchPromise = fetch(`https://${instance}/api/v1/translate`, {\n        method: 'POST',\n        priority: 'low',\n        referrerPolicy: 'no-referrer',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          sl: source,\n          tl: target,\n          text,\n        }),\n      });\n    } else {\n      // GET\n      fetchPromise = fetch(\n        `https://${instance}/api/v1/translate?sl=${encodeURIComponent(\n          source,\n        )}&tl=${encodeURIComponent(target)}&text=${encodeURIComponent(text)}`,\n        {\n          priority: 'low',\n          referrerPolicy: 'no-referrer',\n        },\n      );\n    }\n    return fetchPromise\n      .then((res) => {\n        if (!res.ok) throw new Error(res.statusText);\n        return res.json();\n      })\n      .then((res) => {\n        return {\n          provider: 'translang',\n          content: res.translated_text,\n          detectedSourceLanguage: res.detected_language,\n          pronunciation: res.pronunciation,\n        };\n      });\n  };\n  return pRetry(fetchCall, {\n    retries: 3,\n    onFailedAttempt: (e) => {\n      currentTranslangInstance =\n        (currentTranslangInstance + 1) % TRANSLANG_INSTANCES.length;\n      console.log(\n        'Retrying translation with another instance',\n        currentTranslangInstance,\n      );\n    },\n  });\n}\nconst translangTranslate = pmem(_translangTranslate, {\n  expires: TRANSLATED_MAX_AGE,\n});\nconst throttledTranslangTranslate = pmem(\n  ({ signal, text, source, target }) =>\n    translationQueue.add(() => translangTranslate(text, source, target), {\n      signal,\n    }),\n  {\n    // I know, this is double-layered memoization\n    expires: TRANSLATED_MAX_AGE,\n  },\n);\n\nconst throttledBrowserTranslate = ({ text, source, target, signal }) =>\n  translationQueue.add(() => browserTranslate(text, source, target), {\n    signal,\n  });\n\nfunction TranslationBlock({\n  forceTranslate,\n  sourceLanguage,\n  onTranslate,\n  text = '',\n  mini,\n  autoDetected,\n}) {\n  const { t } = useLingui();\n  const targetLang = getTranslateTargetLanguage(true);\n  const [uiState, setUIState] = useState('default');\n  const [pronunciationContent, setPronunciationContent] = useState(null);\n  const [translatedContent, setTranslatedContent] = useState(null);\n  const [detectedLang, setDetectedLang] = useState(null);\n  const detailsRef = useRef();\n  const abortControllerRef = useRef();\n\n  const sourceLangText = sourceLanguage\n    ? localeCode2Text(sourceLanguage)\n    : null;\n  const targetLangText = localeCode2Text(targetLang);\n  const apiSourceLang = useRef('auto');\n\n  if (!onTranslate) {\n    onTranslate = async ({ text, source, target, signal }) => {\n      if (supportsBrowserTranslator) {\n        const result = await throttledBrowserTranslate({\n          text,\n          source,\n          target,\n          signal,\n        });\n        if (result && !result.error) {\n          return result;\n        }\n      }\n      return mini\n        ? await throttledTranslangTranslate({ signal, text, source, target })\n        : await translangTranslate(text, source, target);\n    };\n  }\n\n  const translate = async () => {\n    setUIState('loading');\n    try {\n      const { content, detectedSourceLanguage, provider, error, ...props } =\n        await onTranslate({\n          text,\n          source: apiSourceLang.current,\n          target: targetLang,\n          signal: abortControllerRef.current?.signal,\n        });\n      if (content) {\n        if (detectedSourceLanguage) {\n          const detectedLangText = localeCode2Text(detectedSourceLanguage);\n          setDetectedLang(detectedLangText);\n        }\n        if (provider === 'translang') {\n          const pronunciation = props?.pronunciation;\n          if (pronunciation) {\n            setPronunciationContent(pronunciation);\n          }\n        }\n        setTranslatedContent(content);\n        setUIState('default');\n        if (!mini && content.trim() !== text.trim() && detailsRef.current) {\n          detailsRef.current.open = true;\n          detailsRef.current.scrollIntoView({\n            behavior: 'smooth',\n            block: 'nearest',\n          });\n        }\n      } else {\n        if (error) console.error(error);\n        setUIState('error');\n      }\n    } catch (e) {\n      if (e.name !== 'AbortError') {\n        console.error(e);\n        setUIState('error');\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (forceTranslate) {\n      translate();\n    }\n  }, [forceTranslate]);\n\n  useEffect(() => {\n    abortControllerRef.current = new AbortController();\n    return () => {\n      abortControllerRef.current.abort();\n    };\n  }, []);\n\n  if (mini) {\n    if (\n      !!translatedContent &&\n      translatedContent.trim() !== text.trim() &&\n      detectedLang !== targetLangText\n    ) {\n      return (\n        <LazyShazam>\n          <div class=\"status-translation-block-mini\">\n            <Icon\n              icon=\"translate\"\n              alt={t`Auto-translated from ${sourceLangText}`}\n            />\n            <output\n              lang={targetLang}\n              dir=\"auto\"\n              title={pronunciationContent || ''}\n            >\n              {translatedContent}\n            </output>\n          </div>\n        </LazyShazam>\n      );\n    }\n    return null;\n  }\n\n  return (\n    <div\n      class=\"status-translation-block\"\n      onClick={(e) => {\n        e.preventDefault();\n      }}\n    >\n      <details ref={detailsRef}>\n        <summary>\n          <button\n            type=\"button\"\n            class={uiState === 'loading' ? 'loading-mask' : ''}\n            onClick={async (e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              detailsRef.current.open = !detailsRef.current.open;\n              if (uiState === 'loading') return;\n              if (!translatedContent) translate();\n            }}\n          >\n            <Icon icon=\"translate\" />{' '}\n            <span>\n              {uiState === 'loading'\n                ? t`Translating`\n                : sourceLanguage && sourceLangText && !detectedLang\n                  ? autoDetected\n                    ? t`Translate from ${sourceLangText} (auto-detected)`\n                    : t`Translate from ${sourceLangText}`\n                  : t`Translate`}\n            </span>\n          </button>\n        </summary>\n        <div class=\"translated-block\">\n          <div class=\"translation-info insignificant\">\n            <select\n              class=\"translated-source-select\"\n              disabled={uiState === 'loading'}\n              onChange={(e) => {\n                apiSourceLang.current = e.target.value;\n                translate();\n              }}\n            >\n              {sourceLanguages.map((l) => {\n                const common = localeCode2Text({\n                  code: l.code,\n                  fallback: l.name,\n                });\n                const native = localeCode2Text({\n                  code: l.code,\n                  locale: l.code,\n                });\n                const showCommon = native && common !== native;\n                return (\n                  <option value={l.code}>\n                    {l.code === 'auto'\n                      ? t`Auto (${detectedLang ?? ''})`\n                      : showCommon\n                        ? `${native} - ${common}`\n                        : common}\n                  </option>\n                );\n              })}\n            </select>{' '}\n            <span> {targetLangText}</span>\n            <Loader abrupt hidden={uiState !== 'loading'} />\n          </div>\n          {uiState === 'error' ? (\n            <p class=\"ui-state\">\n              <Trans>Failed to translate</Trans>\n            </p>\n          ) : (\n            !!translatedContent && (\n              <>\n                <output class=\"translated-content\" lang={targetLang} dir=\"auto\">\n                  {translatedContent}\n                </output>\n                {!!pronunciationContent && (\n                  <output\n                    class=\"translated-pronunciation-content\"\n                    tabIndex={-1}\n                    onClick={(e) => {\n                      e.target.classList.toggle('expand');\n                    }}\n                  >\n                    {pronunciationContent}\n                  </output>\n                )}\n              </>\n            )\n          )}\n        </div>\n      </details>\n    </div>\n  );\n}\n\nexport default TRANSLANG_INSTANCES?.length ? TranslationBlock : () => null;\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    let dbp;\n    const getDB = () => {\n        if (dbp)\n            return dbp;\n        const request = indexedDB.open(dbName);\n        request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n        dbp = promisifyRequest(request);\n        dbp.then((db) => {\n            // It seems like Safari sometimes likes to just close the connection.\n            // It's supposed to fire this event when that happens. Let's hope it does!\n            db.onclose = () => (dbp = undefined);\n        }, () => { });\n        return dbp;\n    };\n    return (txMode, callback) => getDB().then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic  if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import {\n  clear,\n  createStore,\n  del,\n  delMany,\n  get,\n  getMany,\n  keys,\n  set,\n} from 'idb-keyval';\n\nfunction initDB(dbName, storeName) {\n  const store = createStore(dbName, storeName);\n  return {\n    set: (key, val) => set(key, val, store),\n    get: (key) => get(key, store),\n    getMany: (keys) => getMany(keys, store),\n    del: (key) => del(key, store),\n    delMany: (keys) => delMany(keys, store),\n    clear: () => clear(store),\n    keys: () => keys(store),\n  };\n}\n\nexport default {\n  drafts: initDB('drafts-db', 'drafts-store'),\n  catchup: initDB('catchup-db', 'catchup-store'),\n  yearInPosts: initDB('year-in-posts-db', 'year-in-posts-store'),\n};\n","import { createContext } from 'preact';\nimport { useContext, useRef, useState } from 'preact/hooks';\n\nimport { api } from '../utils/api';\n\nconst EditHistoryContext = createContext({});\n\nconst supportsViewTransition = !!document.startViewTransition;\n\nexport function EditHistoryProvider({ children, statusID }) {\n  const editHistoryRef = useRef([]);\n  const [editHistoryMode, setEditHistoryMode] = useState(false);\n  // 0 is latest\n  const [editedAtIndex, _setEditedAtIndex] = useState(0);\n\n  // setEditedAtIndex, with View Transitions API\n  function setEditedAtIndex(i) {\n    if (i === editedAtIndex) return;\n    if (supportsViewTransition) {\n      document.startViewTransition(() => {\n        _setEditedAtIndex(i);\n      });\n    } else {\n      _setEditedAtIndex(i);\n    }\n  }\n\n  async function fetchEditHistory() {\n    const { masto } = api();\n    const history = await masto.v1.statuses.$select(statusID).history.list();\n    // sort latest first\n    history.sort((a, b) => Date.parse(b.createdAt) - Date.parse(a.createdAt));\n    editHistoryRef.current = history;\n  }\n\n  async function initEditHistory() {\n    console.log('initEditHistory', statusID);\n    try {\n      await fetchEditHistory();\n      setEditHistoryMode(true);\n      setEditedAtIndex(0);\n    } catch (e) {\n      console.error(e);\n      setEditHistoryMode(false);\n    }\n  }\n\n  function exitEditHistory() {\n    editHistoryRef.current = [];\n    setEditHistoryMode(false);\n    setEditedAtIndex(0);\n  }\n\n  function prevEditedAt() {\n    setEditedAtIndex((i) => Math.min(i + 1, editHistoryRef.current.length - 1));\n  }\n\n  function nextEditedAt() {\n    setEditedAtIndex((i) => Math.max(i - 1, 0));\n  }\n\n  return (\n    <EditHistoryContext.Provider\n      value={{\n        editHistoryRef,\n        initEditHistory,\n        exitEditHistory,\n        editHistoryMode,\n        editedAtIndex,\n        prevEditedAt,\n        nextEditedAt,\n      }}\n    >\n      {children}\n    </EditHistoryContext.Provider>\n  );\n}\n\nexport function useEditHistory() {\n  return useContext(EditHistoryContext);\n}\n","import { createContext } from 'preact';\n\nconst FilterContext = createContext();\nexport default FilterContext;\n","import mem from './mem';\nimport { getCurrentAccountID } from './store-utils';\n\nfunction _isFiltered(filtered, filterContext) {\n  if (!filtered?.length) return false;\n  const appliedFilters = filtered.filter((f) => {\n    const { filter } = f;\n    const hasContext = filter.context.includes(filterContext);\n    if (!hasContext) return false;\n    if (!filter.expiresAt) return hasContext;\n    return Date.parse(filter.expiresAt) > Date.now();\n  });\n  if (!appliedFilters.length) return false;\n  const isHidden = appliedFilters.some((f) => f.filter.filterAction === 'hide');\n  if (isHidden)\n    return {\n      action: 'hide',\n    };\n  const isBlur = appliedFilters.every((f) => f.filter.filterAction === 'blur');\n  if (isBlur) {\n    const filterTitles = appliedFilters.map((f) => f.filter.title);\n    return {\n      action: 'blur',\n      titles: filterTitles,\n      titlesStr: filterTitles.join('  '),\n    };\n  }\n  // const isWarn = appliedFilters.some((f) => f.filter.filterAction === 'warn');\n  const isWarn = appliedFilters.some((f) => !!f.filter.filterAction);\n  // Re: spec; unknown values for filter_action should be treated as warn.\n  if (isWarn) {\n    const filterTitles = appliedFilters.map((f) => f.filter.title);\n    return {\n      action: 'warn',\n      titles: filterTitles,\n      titlesStr: filterTitles.join('  '),\n    };\n  }\n  return false;\n}\nexport const isFiltered = mem(_isFiltered);\n\nexport function filteredItem(item, filterContext, currentAccountID) {\n  const { filtered } = item;\n  if (!filtered?.length) return true;\n  const isSelf = currentAccountID && item.account?.id === currentAccountID;\n  if (isSelf) return true;\n  const filterState = isFiltered(filtered, filterContext);\n  if (!filterState) return true;\n  if (filterState.action === 'hide') return false;\n  // item._filtered = filterState;\n  return true;\n}\nexport function filteredItems(items, filterContext) {\n  if (!items?.length) return [];\n  if (!filterContext) return items;\n  const currentAccountID = getCurrentAccountID();\n  return items.filter((item) =>\n    filteredItem(item, filterContext, currentAccountID),\n  );\n}\n","const template = document.createElement('template');\nexport default function htmlContentLength(html) {\n  if (!html) return 0;\n  template.innerHTML = html;\n  // .invisible spans for links\n  // e.g. <span class=\"invisible\">https://</span>mastodon.social\n  const invisibleElements = template.content.querySelectorAll('.invisible');\n  for (let i = 0; i < invisibleElements.length; i++) {\n    invisibleElements[i].remove();\n  }\n  // Collect innerText from all child nodes since DocumentFragment doesn't have innerText\n  let textContent = '';\n  for (let i = 0; i < template.content.childNodes.length; i++) {\n    const n = template.content.childNodes[i];\n    textContent += n.innerText || n.textContent || '';\n  }\n  return textContent.length;\n}\n","export const supportsTTS = 'speechSynthesis' in window;\n\nexport function speak(text, lang) {\n  if (!supportsTTS) return;\n  try {\n    if (speechSynthesis.speaking) {\n      speechSynthesis.cancel();\n    }\n    const utterance = new SpeechSynthesisUtterance(text);\n    if (lang) utterance.lang = lang;\n    speechSynthesis.speak(utterance);\n  } catch (e) {\n    alert(e);\n  }\n}\n","import { useRef, useEffect, useCallback, useState, useMemo } from 'react';\n\n// This could've been more streamlined with internal state instead of abusing\n// refs to such extent, but then composing hooks and components could not opt out of unnecessary renders.\nfunction useResolvedElement(subscriber, refOrElement) {\n  var lastReportRef = useRef(null);\n  var refOrElementRef = useRef(null);\n  refOrElementRef.current = refOrElement;\n  var cbElementRef = useRef(null); // Calling re-evaluation after each render without using a dep array,\n  // as the ref object's current value could've changed since the last render.\n\n  useEffect(function () {\n    evaluateSubscription();\n  });\n  var evaluateSubscription = useCallback(function () {\n    var cbElement = cbElementRef.current;\n    var refOrElement = refOrElementRef.current; // Ugly ternary. But smaller than an if-else block.\n\n    var element = cbElement ? cbElement : refOrElement ? refOrElement instanceof Element ? refOrElement : refOrElement.current : null;\n\n    if (lastReportRef.current && lastReportRef.current.element === element && lastReportRef.current.subscriber === subscriber) {\n      return;\n    }\n\n    if (lastReportRef.current && lastReportRef.current.cleanup) {\n      lastReportRef.current.cleanup();\n    }\n\n    lastReportRef.current = {\n      element: element,\n      subscriber: subscriber,\n      // Only calling the subscriber, if there's an actual element to report.\n      // Setting cleanup to undefined unless a subscriber returns one, as an existing cleanup function would've been just called.\n      cleanup: element ? subscriber(element) : undefined\n    };\n  }, [subscriber]); // making sure we call the cleanup function on unmount\n\n  useEffect(function () {\n    return function () {\n      if (lastReportRef.current && lastReportRef.current.cleanup) {\n        lastReportRef.current.cleanup();\n        lastReportRef.current = null;\n      }\n    };\n  }, []);\n  return useCallback(function (element) {\n    cbElementRef.current = element;\n    evaluateSubscription();\n  }, [evaluateSubscription]);\n}\n\n// We're only using the first element of the size sequences, until future versions of the spec solidify on how\n// exactly it'll be used for fragments in multi-column scenarios:\n// From the spec:\n// > The box size properties are exposed as FrozenArray in order to support elements that have multiple fragments,\n// > which occur in multi-column scenarios. However the current definitions of content rect and border box do not\n// > mention how those boxes are affected by multi-column layout. In this spec, there will only be a single\n// > ResizeObserverSize returned in the FrozenArray, which will correspond to the dimensions of the first column.\n// > A future version of this spec will extend the returned FrozenArray to contain the per-fragment size information.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-entry-interface)\n//\n// Also, testing these new box options revealed that in both Chrome and FF everything is returned in the callback,\n// regardless of the \"box\" option.\n// The spec states the following on this:\n// > This does not have any impact on which box dimensions are returned to the defined callback when the event\n// > is fired, it solely defines which box the author wishes to observe layout changes on.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-interface)\n// I'm not exactly clear on what this means, especially when you consider a later section stating the following:\n// > This section is non-normative. An author may desire to observe more than one CSS box.\n// > In this case, author will need to use multiple ResizeObservers.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-interface)\n// Which is clearly not how current browser implementations behave, and seems to contradict the previous quote.\n// For this reason I decided to only return the requested size,\n// even though it seems we have access to results for all box types.\n// This also means that we get to keep the current api, being able to return a simple { width, height } pair,\n// regardless of box option.\nfunction extractSize(entry, boxProp, sizeType) {\n  if (!entry[boxProp]) {\n    if (boxProp === \"contentBoxSize\") {\n      // The dimensions in `contentBoxSize` and `contentRect` are equivalent according to the spec.\n      // See the 6th step in the description for the RO algorithm:\n      // https://drafts.csswg.org/resize-observer/#create-and-populate-resizeobserverentry-h\n      // > Set this.contentRect to logical this.contentBoxSize given target and observedBox of \"content-box\".\n      // In real browser implementations of course these objects differ, but the width/height values should be equivalent.\n      return entry.contentRect[sizeType === \"inlineSize\" ? \"width\" : \"height\"];\n    }\n\n    return undefined;\n  } // A couple bytes smaller than calling Array.isArray() and just as effective here.\n\n\n  return entry[boxProp][0] ? entry[boxProp][0][sizeType] : // TS complains about this, because the RO entry type follows the spec and does not reflect Firefox's current\n  // behaviour of returning objects instead of arrays for `borderBoxSize` and `contentBoxSize`.\n  // @ts-ignore\n  entry[boxProp][sizeType];\n}\n\nfunction useResizeObserver(opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  // Saving the callback as a ref. With this, I don't need to put onResize in the\n  // effect dep array, and just passing in an anonymous function without memoising\n  // will not reinstantiate the hook's ResizeObserver.\n  var onResize = opts.onResize;\n  var onResizeRef = useRef(undefined);\n  onResizeRef.current = onResize;\n  var round = opts.round || Math.round; // Using a single instance throughout the hook's lifetime\n\n  var resizeObserverRef = useRef();\n\n  var _useState = useState({\n    width: undefined,\n    height: undefined\n  }),\n      size = _useState[0],\n      setSize = _useState[1]; // In certain edge cases the RO might want to report a size change just after\n  // the component unmounted.\n\n\n  var didUnmount = useRef(false);\n  useEffect(function () {\n    didUnmount.current = false;\n    return function () {\n      didUnmount.current = true;\n    };\n  }, []); // Using a ref to track the previous width / height to avoid unnecessary renders.\n\n  var previous = useRef({\n    width: undefined,\n    height: undefined\n  }); // This block is kinda like a useEffect, only it's called whenever a new\n  // element could be resolved based on the ref option. It also has a cleanup\n  // function.\n\n  var refCallback = useResolvedElement(useCallback(function (element) {\n    // We only use a single Resize Observer instance, and we're instantiating it on demand, only once there's something to observe.\n    // This instance is also recreated when the `box` option changes, so that a new observation is fired if there was a previously observed element with a different box option.\n    if (!resizeObserverRef.current || resizeObserverRef.current.box !== opts.box || resizeObserverRef.current.round !== round) {\n      resizeObserverRef.current = {\n        box: opts.box,\n        round: round,\n        instance: new ResizeObserver(function (entries) {\n          var entry = entries[0];\n          var boxProp = opts.box === \"border-box\" ? \"borderBoxSize\" : opts.box === \"device-pixel-content-box\" ? \"devicePixelContentBoxSize\" : \"contentBoxSize\";\n          var reportedWidth = extractSize(entry, boxProp, \"inlineSize\");\n          var reportedHeight = extractSize(entry, boxProp, \"blockSize\");\n          var newWidth = reportedWidth ? round(reportedWidth) : undefined;\n          var newHeight = reportedHeight ? round(reportedHeight) : undefined;\n\n          if (previous.current.width !== newWidth || previous.current.height !== newHeight) {\n            var newSize = {\n              width: newWidth,\n              height: newHeight\n            };\n            previous.current.width = newWidth;\n            previous.current.height = newHeight;\n\n            if (onResizeRef.current) {\n              onResizeRef.current(newSize);\n            } else {\n              if (!didUnmount.current) {\n                setSize(newSize);\n              }\n            }\n          }\n        })\n      };\n    }\n\n    resizeObserverRef.current.instance.observe(element, {\n      box: opts.box\n    });\n    return function () {\n      if (resizeObserverRef.current) {\n        resizeObserverRef.current.instance.unobserve(element);\n      }\n    };\n  }, [opts.box, round]), opts.ref);\n  return useMemo(function () {\n    return {\n      ref: refCallback,\n      width: size.width,\n      height: size.height\n    };\n  }, [refCallback, size.width, size.height]);\n}\n\nexport { useResizeObserver as default };\n","import { useThrottledCallback } from 'use-debounce';\nimport useResizeObserver from 'use-resize-observer';\n\nexport default function useThrottledResizeObserver(opts = {}) {\n  const onResize = useThrottledCallback(opts.onResize, 300);\n  return useResizeObserver({\n    ...opts,\n    onResize,\n  });\n}\n","import { useRef } from 'preact/hooks';\n\nimport useThrottledResizeObserver from './useThrottledResizeObserver';\n\nexport default function useTruncated({ className = 'truncated' } = {}) {\n  const ref = useRef();\n  const onResize = ({ height }) => {\n    if (ref.current) {\n      const { scrollHeight } = ref.current;\n      let truncated = scrollHeight > height;\n      if (truncated) {\n        const { height: _height, maxHeight } = getComputedStyle(ref.current);\n        const computedHeight = parseInt(maxHeight || _height, 10);\n        truncated = scrollHeight > computedHeight;\n      }\n      ref.current.classList.toggle(className, truncated);\n    }\n  };\n  useThrottledResizeObserver({\n    ref,\n    box: 'border-box',\n    onResize,\n  });\n  return ref;\n}\n","export default {\n  public: 'earth',\n  unlisted: 'moon',\n  private: 'lock',\n  direct: 'message',\n  local: 'building',\n};\n","import { msg } from '@lingui/core/macro';\n\nconst visibilityText = {\n  public: msg`Public`,\n  local: msg`Local`,\n  unlisted: msg`Quiet public`,\n  private: msg`Followers`,\n  direct: msg`Private mention`,\n};\n\nexport default visibilityText;\n","import 'temml/dist/Temml-Local.css';\n\nimport { useLingui } from '@lingui/react/macro';\nimport { useCallback, useState } from 'preact/hooks';\n\nimport showToast from '../utils/show-toast';\n\nimport Icon from './icon';\n\n// Follow https://mathstodon.xyz/about\n// > You can use LaTeX in toots here! Use \\( and \\) for inline, and \\[ and \\] for display mode.\nconst DELIMITERS_PATTERNS = [\n  // '\\\\$\\\\$[\\\\s\\\\S]*?\\\\$\\\\$', // $$...$$\n  '\\\\\\\\\\\\[[\\\\s\\\\S]*?\\\\\\\\\\\\]', // \\[...\\]\n  '\\\\\\\\\\\\([\\\\s\\\\S]*?\\\\\\\\\\\\)', // \\(...\\)\n  // '\\\\\\\\begin\\\\{(?:equation\\\\*?|align\\\\*?|alignat\\\\*?|gather\\\\*?|CD)\\\\}[\\\\s\\\\S]*?\\\\\\\\end\\\\{(?:equation\\\\*?|align\\\\*?|alignat\\\\*?|gather\\\\*?|CD)\\\\}', // AMS environments\n  // '\\\\\\\\(?:ref|eqref)\\\\{[^}]*\\\\}', // \\ref{...}, \\eqref{...}\n];\nconst DELIMITERS_REGEX = new RegExp(DELIMITERS_PATTERNS.join('|'), 'g');\n\nfunction cleanDOMForTemml(dom) {\n  // Define start and end delimiter patterns\n  const START_DELIMITERS = ['\\\\\\\\\\\\[', '\\\\\\\\\\\\(']; // \\[ and \\(\n  const startRegex = new RegExp(`(${START_DELIMITERS.join('|')})`);\n\n  // Walk through all text nodes\n  const walker = document.createTreeWalker(dom, NodeFilter.SHOW_TEXT);\n  const textNodes = [];\n  let node;\n  while ((node = walker.nextNode())) {\n    textNodes.push(node);\n  }\n\n  for (const textNode of textNodes) {\n    const text = textNode.textContent;\n    const startMatch = text.match(startRegex);\n\n    if (!startMatch) continue; // No start delimiter in this text node\n\n    // Find the matching end delimiter\n    const startDelimiter = startMatch[0];\n    const endDelimiter = startDelimiter === '\\\\[' ? '\\\\]' : '\\\\)';\n\n    // Collect nodes from start delimiter until end delimiter\n    const nodesToCombine = [textNode];\n    let currentNode = textNode;\n    let foundEnd = false;\n    let combinedText = text;\n\n    // Check if end delimiter is in the same text node\n    if (text.includes(endDelimiter)) {\n      foundEnd = true;\n    } else {\n      // Look through sibling nodes\n      while (currentNode.nextSibling && !foundEnd) {\n        const nextSibling = currentNode.nextSibling;\n\n        if (nextSibling.nodeType === Node.TEXT_NODE) {\n          nodesToCombine.push(nextSibling);\n          combinedText += nextSibling.textContent;\n          if (nextSibling.textContent.includes(endDelimiter)) {\n            foundEnd = true;\n          }\n        } else if (\n          nextSibling.nodeType === Node.ELEMENT_NODE &&\n          nextSibling.tagName === 'BR'\n        ) {\n          nodesToCombine.push(nextSibling);\n          combinedText += '\\n';\n        } else {\n          // Found a non-BR element, stop and don't process\n          break;\n        }\n\n        currentNode = nextSibling;\n      }\n    }\n\n    // Only process if we found the end delimiter and have nodes to combine\n    if (foundEnd && nodesToCombine.length > 1) {\n      // Replace the first text node with combined text\n      textNode.textContent = combinedText;\n\n      // Remove the other nodes\n      for (let i = 1; i < nodesToCombine.length; i++) {\n        nodesToCombine[i].remove();\n      }\n    }\n  }\n}\n\nconst MathBlock = ({ content, contentRef, onRevert }) => {\n  DELIMITERS_REGEX.lastIndex = 0; // Reset index to prevent g trap\n  const hasLatexContent = DELIMITERS_REGEX.test(content);\n\n  if (!hasLatexContent) return null;\n\n  const { t } = useLingui();\n  const [mathRendered, setMathRendered] = useState(false);\n  const toggleMathRendering = useCallback(\n    async (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (mathRendered) {\n        // Revert to original content by refreshing PostContent\n        setMathRendered(false);\n        onRevert();\n      } else {\n        // Render math\n        try {\n          // This needs global because the codebase inside temml is calling a function from global.temml \n          const temml =\n            window.temml || (window.temml = (await import('temml'))?.default);\n\n          cleanDOMForTemml(contentRef.current);\n          const originalContentRefHTML = contentRef.current.innerHTML;\n          temml.renderMathInElement(contentRef.current, {\n            fences: '(', // This should sync with DELIMITERS_REGEX\n            annotate: true,\n            throwOnError: true,\n            errorCallback: (err) => {\n              console.warn('Failed to render LaTeX:', err);\n            },\n          });\n\n          const hasMath = contentRef.current.querySelector('math');\n          const htmlChanged =\n            contentRef.current.innerHTML !== originalContentRefHTML;\n          if (hasMath && htmlChanged) {\n            setMathRendered(true);\n          } else {\n            showToast(t`Unable to format math`);\n            setMathRendered(false);\n            onRevert(); // Revert because DOM modified by cleanDOMForTemml\n          }\n        } catch (e) {\n          console.error('Failed to LaTeX:', e);\n        }\n      }\n    },\n    [mathRendered],\n  );\n\n  return (\n    <div class=\"math-block\">\n      <Icon icon=\"formula\" size=\"s\" /> <span>{t`Math expressions found.`}</span>{' '}\n      <button type=\"button\" class=\"light small\" onClick={toggleMathRendering}>\n        {mathRendered\n          ? t({\n              comment:\n                'Action to switch from rendered math back to raw (LaTeX) markup',\n              message: 'Show markup',\n            })\n          : t({\n              comment:\n                'Action to render math expressions from raw (LaTeX) markup',\n              message: 'Format math',\n            })}\n      </button>\n    </div>\n  );\n};\n\nexport default MathBlock;\n","const digitLookup = new Uint8Array(128);\nfor (let i = 0; i < 83; i++) {\n    digitLookup[\n        '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~'.charCodeAt(\n            i,\n        )\n    ] = i;\n}\nconst decode83 = (str, start, end) => {\n    let value = 0;\n    while (start < end) {\n        value *= 83;\n        value += digitLookup[str.charCodeAt(start++)];\n    }\n    return value;\n};\n\nconst pow = Math.pow;\nconst PI = Math.PI;\nconst PI2 = PI * 2;\n\nconst d = 3294.6;\nconst e = 269.025;\nconst sRGBToLinear = (value) =>\n    value > 10.31475 ? pow(value / e + 0.052132, 2.4) : value / d;\n\nconst linearTosRGB = (v) =>\n    ~~(v > 0.00001227 ? e * pow(v, 0.416666) - 13.025 : v * d + 1);\n\nconst signSqr = (x) => (x < 0 ? -1 : 1) * x * x;\n\n/**\n * Fast approximate cosine implementation\n * Based on FTrig https://github.com/netcell/FTrig\n */\nconst fastCos = (x) => {\n    x += PI / 2;\n    while (x > PI) {\n        x -= PI2;\n    }\n    const cos = 1.27323954 * x - 0.405284735 * signSqr(x);\n    return 0.225 * (signSqr(cos) - cos) + cos;\n};\n\n/**\n * Extracts average color from BlurHash image\n * @param {string} blurHash BlurHash image string\n * @returns {[number, number, number]}\n */\nexport function getBlurHashAverageColor(blurHash) {\n    const val = decode83(blurHash, 2, 6);\n    return [val >> 16, (val >> 8) & 255, val & 255];\n}\n\n/**\n * Decodes BlurHash image\n * @param {string} blurHash BlurHash image string\n * @param {number} width Output image width\n * @param {number} height Output image height\n * @param {?number} punch\n * @returns {Uint8ClampedArray}\n */\nexport function decodeBlurHash(blurHash, width, height, punch) {\n    const sizeFlag = decode83(blurHash, 0, 1);\n    const numX = (sizeFlag % 9) + 1;\n    const numY = ~~(sizeFlag / 9) + 1;\n    const size = numX * numY;\n\n    let i = 0,\n        j = 0,\n        x = 0,\n        y = 0,\n        r = 0,\n        g = 0,\n        b = 0,\n        basis = 0,\n        basisY = 0,\n        colorIndex = 0,\n        pixelIndex = 0,\n        value = 0;\n\n    const maximumValue = ((decode83(blurHash, 1, 2) + 1) / 13446) * (punch | 1);\n\n    const colors = new Float64Array(size * 3);\n\n    const averageColor = getBlurHashAverageColor(blurHash);\n    for (i = 0; i < 3; i++) {\n        colors[i] = sRGBToLinear(averageColor[i]);\n    }\n\n    for (i = 1; i < size; i++) {\n        value = decode83(blurHash, 4 + i * 2, 6 + i * 2);\n        colors[i * 3] = signSqr(~~(value / 361) - 9) * maximumValue;\n        colors[i * 3 + 1] = signSqr((~~(value / 19) % 19) - 9) * maximumValue;\n        colors[i * 3 + 2] = signSqr((value % 19) - 9) * maximumValue;\n    }\n\n    const cosinesY = new Float64Array(numY * height);\n    const cosinesX = new Float64Array(numX * width);\n    for (j = 0; j < numY; j++) {\n        for (y = 0; y < height; y++) {\n            cosinesY[j * height + y] = fastCos((PI * y * j) / height);\n        }\n    }\n    for (i = 0; i < numX; i++) {\n        for (x = 0; x < width; x++) {\n            cosinesX[i * width + x] = fastCos((PI * x * i) / width);\n        }\n    }\n\n    const bytesPerRow = width * 4;\n    const pixels = new Uint8ClampedArray(bytesPerRow * height);\n\n    for (y = 0; y < height; y++) {\n        for (x = 0; x < width; x++) {\n            r = g = b = 0;\n            for (j = 0; j < numY; j++) {\n                basisY = cosinesY[j * height + y];\n                for (i = 0; i < numX; i++) {\n                    basis = cosinesX[i * width + x] * basisY;\n                    colorIndex = (i + j * numX) * 3;\n                    r += colors[colorIndex] * basis;\n                    g += colors[colorIndex + 1] * basis;\n                    b += colors[colorIndex + 2] * basis;\n                }\n            }\n\n            pixelIndex = 4 * x + y * bytesPerRow;\n            pixels[pixelIndex] = linearTosRGB(r);\n            pixels[pixelIndex + 1] = linearTosRGB(g);\n            pixels[pixelIndex + 2] = linearTosRGB(b);\n            pixels[pixelIndex + 3] = 255; // alpha\n        }\n    }\n    return pixels;\n}\n","export var styleRoot = 'kvfysmfp';\nexport var styleChild = 'ufhsfnkm';\nexport var styles = \".\".concat(styleRoot, \"{overflow:hidden;touch-action:none}.\").concat(styleChild, \"{transform-origin: 0 0}\");\n","var isSsr = typeof window === 'undefined';\nexport var isTouch = function () {\n    return !isSsr && ('ontouchstart' in window || navigator.maxTouchPoints > 0);\n};\nexport var make2dTransformValue = function (_a) {\n    var x = _a.x, y = _a.y, scale = _a.scale;\n    return \"scale(\".concat(scale, \") translate(\").concat(x, \"px, \").concat(y, \"px)\");\n};\nexport var make3dTransformValue = function (_a) {\n    var x = _a.x, y = _a.y, scale = _a.scale;\n    return \"scale3d(\".concat(scale, \",\").concat(scale, \", 1) translate3d(\").concat(x, \"px, \").concat(y, \"px, 0)\");\n};\nexport var hasTranslate3DSupport = function () {\n    var css = !isSsr && window.CSS;\n    return css && css.supports && css.supports('transform', 'translate3d(0,0,0)');\n};\n","var min = Math.min, max = Math.max;\nexport function getOffsetBounds(_a) {\n    var containerDimension = _a.containerDimension, childDimension = _a.childDimension, padding = _a.padding, centerContained = _a.centerContained;\n    var diff = childDimension - containerDimension;\n    if (diff + 2 * padding <= 0 && centerContained) {\n        return [diff / 2, diff / 2];\n    }\n    else {\n        return [min(diff + padding, 0) - padding, max(0, diff + padding)];\n    }\n}\n","import { __assign, __extends } from \"tslib\";\nimport React, { Component, createRef, Children, cloneElement } from 'react';\nimport { styleRoot, styleChild, styles } from './styles.css';\nimport { isTouch } from '../utils';\nimport { getOffsetBounds } from './getOffsetBounds';\nvar classnames = function (base, other) {\n    return other ? \"\".concat(base, \" \").concat(other) : base;\n};\nvar abs = Math.abs, min = Math.min, sqrt = Math.sqrt;\nvar isSsr = typeof window === 'undefined';\nvar isMac = isSsr ? false : /(Mac)/i.test(navigator.platform);\nvar isDragInteraction = function (i) { return i === 'drag'; };\nvar isZoomInteraction = function (i) { return i === 'zoom'; };\nvar isZoomGesture = function (wheelEvent) { return isMac && wheelEvent.ctrlKey; };\nvar cancelEvent = function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n};\nvar getDistance = function (a, b) {\n    var x = a.x - b.x;\n    var y = a.y - b.y;\n    return sqrt(x * x + y * y);\n};\nvar calculateScale = function (startTouches, endTouches) {\n    var startDistance = getDistance(startTouches[0], startTouches[1]);\n    var endDistance = getDistance(endTouches[0], endTouches[1]);\n    return endDistance / startDistance;\n};\nvar isCloseTo = function (value, expected) {\n    return value > expected - 0.01 && value < expected + 0.01;\n};\nvar swing = function (p) { return -Math.cos(p * Math.PI) / 2 + 0.5; };\nvar getPointByPageCoordinates = function (touch) { return ({\n    x: touch.pageX,\n    y: touch.pageY,\n}); };\nvar getPageCoordinatesByTouches = function (touches) {\n    return Array.from(touches).map(getPointByPageCoordinates);\n};\nvar sum = function (a, b) { return a + b; };\nvar getVectorAvg = function (vectors) { return ({\n    x: vectors.map(function (_a) {\n        var x = _a.x;\n        return x;\n    }).reduce(sum, 0) / vectors.length,\n    y: vectors.map(function (_a) {\n        var y = _a.y;\n        return y;\n    }).reduce(sum, 0) / vectors.length,\n}); };\nvar clamp = function (min, max, value) {\n    return value < min ? min : value > max ? max : value;\n};\nvar shouldInterceptWheel = function (event) {\n    return !(event.ctrlKey || event.metaKey);\n};\nvar getElementSize = function (element) {\n    if (element) {\n        var offsetWidth = element.offsetWidth, offsetHeight = element.offsetHeight;\n        // Any DOMElement\n        if (offsetWidth && offsetHeight) {\n            return { width: offsetWidth, height: offsetHeight };\n        }\n        // Svg support\n        var style = getComputedStyle(element);\n        var width = parseFloat(style.width);\n        var height = parseFloat(style.height);\n        if (height && width) {\n            return { width: width, height: height };\n        }\n    }\n    return { width: 0, height: 0 };\n};\nvar calculateVelocity = function (startPoint, endPoint) { return ({\n    x: endPoint.x - startPoint.x,\n    y: endPoint.y - startPoint.y,\n}); };\nvar comparePoints = function (p1, p2) { return p1.x === p2.x && p1.y === p2.y; };\nvar noup = function () { };\nvar zeroPoint = { x: 0, y: 0 };\nvar PinchZoom = /** @class */ (function (_super) {\n    __extends(PinchZoom, _super);\n    function PinchZoom() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._prevDragMovePoint = null;\n        _this._containerObserver = null;\n        _this._fingers = 0;\n        _this._firstMove = true;\n        _this._initialOffset = __assign({}, zeroPoint);\n        _this._interaction = null;\n        _this._isDoubleTap = false;\n        _this._isOffsetsSet = false;\n        _this._lastDragPosition = null;\n        _this._lastScale = 1;\n        _this._lastTouchStart = 0;\n        _this._lastZoomCenter = null;\n        _this._listenMouseMove = false;\n        _this._nthZoom = 0;\n        _this._offset = __assign({}, zeroPoint);\n        _this._startOffset = __assign({}, zeroPoint);\n        _this._startTouches = null;\n        _this._updatePlaned = false;\n        _this._wheelTimeOut = null;\n        _this._zoomFactor = 1;\n        _this._initialZoomFactor = 1;\n        _this._draggingPoint = __assign({}, zeroPoint);\n        // It help reduce behavior difference between touch and mouse events\n        _this._ignoreNextClick = false;\n        // @ts-ignore\n        _this._containerRef = createRef();\n        _this._handleClick = function (clickEvent) {\n            if (_this._ignoreNextClick) {\n                _this._ignoreNextClick = false;\n                clickEvent.stopPropagation();\n            }\n        };\n        _this._onResize = function () {\n            var _a;\n            if ((_a = _this._containerRef) === null || _a === void 0 ? void 0 : _a.current) {\n                _this._updateInitialZoomFactor();\n                _this._setupOffsets();\n                _this._update();\n            }\n        };\n        _this._handlerOnTouchEnd = _this._handlerIfEnable(function (touchEndEvent) {\n            _this._fingers = touchEndEvent.touches.length;\n            if (_this.props.shouldCancelHandledTouchEndEvents &&\n                (isZoomInteraction(_this._interaction) ||\n                    (isDragInteraction(_this._interaction) &&\n                        (_this._startOffset.x !== _this._offset.x ||\n                            _this._startOffset.y !== _this._offset.y)))) {\n                cancelEvent(touchEndEvent);\n            }\n            if (isDragInteraction(_this._interaction) && !_this._enoughToDrag()) {\n                _this._handleClick(touchEndEvent);\n            }\n            _this._updateInteraction(touchEndEvent);\n        });\n        _this._handlerOnTouchStart = _this._handlerIfEnable(function (touchStartEvent) {\n            _this._firstMove = true;\n            _this._fingers = touchStartEvent.touches.length;\n            _this._detectDoubleTap(touchStartEvent);\n        });\n        _this._handlerOnTouchMove = _this._handlerIfEnable(function (touchMoveEvent) {\n            if (_this._isDoubleTap) {\n                return;\n            }\n            _this._collectInertia(touchMoveEvent);\n            if (_this._firstMove) {\n                _this._updateInteraction(touchMoveEvent);\n                if (_this._interaction) {\n                    cancelEvent(touchMoveEvent);\n                }\n                _this._startOffset = __assign({}, _this._offset);\n                _this._startTouches = getPageCoordinatesByTouches(touchMoveEvent.touches);\n            }\n            else {\n                if (isZoomInteraction(_this._interaction)) {\n                    if (_this._startTouches &&\n                        _this._startTouches.length === 2 &&\n                        touchMoveEvent.touches.length === 2) {\n                        _this._handleZoom(touchMoveEvent, calculateScale(_this._startTouches, getPageCoordinatesByTouches(touchMoveEvent.touches)));\n                    }\n                }\n                else if (isDragInteraction(_this._interaction)) {\n                    _this._handleDrag(touchMoveEvent);\n                }\n                if (_this._interaction) {\n                    cancelEvent(touchMoveEvent);\n                    _this._update();\n                }\n            }\n            _this._firstMove = false;\n        });\n        _this._handlerWheel = function (wheelEvent) {\n            if (_this.props.shouldInterceptWheel(wheelEvent)) {\n                return;\n            }\n            cancelEvent(wheelEvent);\n            var pageX = wheelEvent.pageX, pageY = wheelEvent.pageY, deltaY = wheelEvent.deltaY, deltaMode = wheelEvent.deltaMode;\n            var scaleDelta = 1;\n            if (isZoomGesture(wheelEvent) || deltaMode === 1) {\n                scaleDelta = 15;\n            }\n            var likeTouchEvent = {\n                touches: [\n                    // @ts-ignore\n                    { pageX: pageX, pageY: pageY },\n                ],\n            };\n            var center = _this._getOffsetByFirstTouch(likeTouchEvent);\n            var dScale = deltaY * scaleDelta;\n            _this._stopAnimation();\n            _this._scaleTo(_this._zoomFactor - dScale / _this.props.wheelScaleFactor, center);\n            _this._update();\n            clearTimeout(\n            // @ts-ignore\n            _this._wheelTimeOut);\n            _this._wheelTimeOut = setTimeout(function () { return _this._sanitize(); }, 100);\n        };\n        // @ts-ignore\n        _this._handlers = _this.props.isTouch()\n            ? [\n                ['touchstart', _this._handlerOnTouchStart],\n                ['touchend', _this._handlerOnTouchEnd],\n                ['touchmove', _this._handlerOnTouchMove],\n            ]\n            : [\n                [\n                    'mousemove',\n                    _this.simulate(_this._handlerOnTouchMove),\n                    _this.props._document,\n                ],\n                [\n                    'mouseup',\n                    _this.simulate(_this._handlerOnTouchEnd),\n                    _this.props._document,\n                ],\n                ['mousedown', _this.simulate(_this._handlerOnTouchStart)],\n                ['click', _this._handleClick],\n                ['wheel', _this._handlerWheel],\n            ];\n        return _this;\n    }\n    PinchZoom.prototype._handleDragStart = function (event) {\n        this._ignoreNextClick = true;\n        this.props.onDragStart();\n        this._stopAnimation();\n        this._resetInertia();\n        this._lastDragPosition = null;\n        this._hasInteraction = true;\n        this._draggingPoint = this._offset;\n        this._handleDrag(event);\n    };\n    PinchZoom.prototype._handleDrag = function (event) {\n        var touch = this._getOffsetByFirstTouch(event);\n        if (this._enoughToDrag()) {\n            this._drag(touch, this._lastDragPosition);\n        }\n        else {\n            this._virtualDrag(touch, this._lastDragPosition);\n        }\n        this._offset = this._sanitizeOffset(this._offset);\n        this._lastDragPosition = touch;\n    };\n    PinchZoom.prototype._resetInertia = function () {\n        this._velocity = null;\n        this._prevDragMovePoint = null;\n    };\n    PinchZoom.prototype._realizeInertia = function () {\n        var _this = this;\n        var _a = this.props, inertiaFriction = _a.inertiaFriction, inertia = _a.inertia;\n        if (!inertia || !this._velocity) {\n            return;\n        }\n        var _b = this._velocity, x = _b.x, y = _b.y;\n        if (x || y) {\n            this._stopAnimation();\n            this._resetInertia();\n            var renderFrame = function () {\n                x *= inertiaFriction;\n                y *= inertiaFriction;\n                if (!x && !y) {\n                    return _this._stopAnimation();\n                }\n                var prevOffset = __assign({}, _this._offset);\n                _this._addOffset({ x: x, y: y });\n                _this._offset = _this._sanitizeOffset(_this._offset);\n                if (comparePoints(prevOffset, _this._offset)) {\n                    return _this._stopAnimation();\n                }\n                _this._update({ isAnimation: true });\n            };\n            this._animate(renderFrame, { duration: 9999 });\n        }\n    };\n    PinchZoom.prototype._collectInertia = function (_a) {\n        var touches = _a.touches;\n        if (!this.props.inertia) {\n            return;\n        }\n        var currentCoordinates = getPageCoordinatesByTouches(touches)[0];\n        var prevPoint = this._prevDragMovePoint;\n        if (prevPoint) {\n            this._velocity = calculateVelocity(currentCoordinates, prevPoint);\n        }\n        this._prevDragMovePoint = currentCoordinates;\n    };\n    PinchZoom.prototype._handleDragEnd = function () {\n        this.props.onDragEnd();\n        this._end();\n        this._realizeInertia();\n    };\n    PinchZoom.prototype._handleZoomStart = function () {\n        this.props.onZoomStart();\n        this._stopAnimation();\n        this._lastScale = 1;\n        this._nthZoom = 0;\n        this._lastZoomCenter = null;\n        this._hasInteraction = true;\n    };\n    PinchZoom.prototype._handleZoom = function (event, newScale) {\n        var touchCenter = getVectorAvg(this._getOffsetTouches(event));\n        var scale = newScale / this._lastScale;\n        this._lastScale = newScale;\n        // The first touch events are thrown away since they are not precise\n        this._nthZoom += 1;\n        if (this._nthZoom > 3) {\n            this._scale(scale, touchCenter);\n            this._drag(touchCenter, this._lastZoomCenter);\n            if (this.props.enforceBoundsDuringZoom) {\n                this._offset = this._sanitizeOffset(this._offset);\n            }\n        }\n        this._lastZoomCenter = touchCenter;\n    };\n    PinchZoom.prototype._handleZoomEnd = function () {\n        this.props.onZoomEnd();\n        this._end();\n    };\n    PinchZoom.prototype._handleDoubleTap = function (event) {\n        var _this = this;\n        if (this._hasInteraction || this.props.tapZoomFactor === 0) {\n            return;\n        }\n        var needZoomOut = (this.props.doubleTapZoomOutOnMaxScale &&\n            this._zoomFactor === this.props.maxZoom) ||\n            (this.props.doubleTapToggleZoom && this._zoomFactor > 1);\n        this.props.onDoubleTap();\n        this._ignoreNextClick = true;\n        var zoomFactor = this._zoomFactor + this.props.tapZoomFactor;\n        var startZoomFactor = this._zoomFactor;\n        var updateProgress = function (progress) {\n            _this._scaleTo(startZoomFactor + progress * (zoomFactor - startZoomFactor), center);\n        };\n        var center = this._getOffsetByFirstTouch(event);\n        this._isDoubleTap = true;\n        if (startZoomFactor > zoomFactor) {\n            center = this._getCurrentZoomCenter();\n        }\n        needZoomOut ? this._zoomOutAnimation() : this._animate(updateProgress);\n    };\n    PinchZoom.prototype._computeInitialOffset = function () {\n        var rect = this._getContainerRect();\n        var _a = this._getChildSize(), width = _a.width, height = _a.height;\n        var x = -abs(width * this._getInitialZoomFactor() - rect.width) / 2;\n        var y = -abs(height * this._getInitialZoomFactor() - rect.height) / 2;\n        this._initialOffset = { x: x, y: y };\n    };\n    PinchZoom.prototype._resetOffset = function () {\n        this._offset = __assign({}, this._initialOffset);\n    };\n    PinchZoom.prototype._setupOffsets = function () {\n        if (this.props.setOffsetsOnce && this._isOffsetsSet) {\n            return;\n        }\n        this._isOffsetsSet = true;\n        this._computeInitialOffset();\n        this._resetOffset();\n    };\n    PinchZoom.prototype._sanitizeOffset = function (offset) {\n        var rect = this._getContainerRect();\n        var _a = this._getChildSize(), width = _a.width, height = _a.height;\n        var elWidth = width * this._getInitialZoomFactor() * this._zoomFactor;\n        var elHeight = height * this._getInitialZoomFactor() * this._zoomFactor;\n        var _b = getOffsetBounds({\n            containerDimension: rect.width,\n            childDimension: elWidth,\n            padding: this.props.horizontalPadding,\n            centerContained: this.props.centerContained,\n        }), minOffsetX = _b[0], maxOffsetX = _b[1];\n        var _c = getOffsetBounds({\n            containerDimension: rect.height,\n            childDimension: elHeight,\n            padding: this.props.verticalPadding,\n            centerContained: this.props.centerContained,\n        }), minOffsetY = _c[0], maxOffsetY = _c[1];\n        return {\n            x: clamp(minOffsetX, maxOffsetX, offset.x),\n            y: clamp(minOffsetY, maxOffsetY, offset.y),\n        };\n    };\n    PinchZoom.prototype.alignCenter = function (options) {\n        var _this = this;\n        var _a = __assign({ duration: 250, animated: true }, options), __x = _a.x, __y = _a.y, scale = _a.scale, animated = _a.animated, duration = _a.duration;\n        // Bug-Fix: https://github.com/retyui/react-quick-pinch-zoom/issues/58\n        var x = __x * this._initialZoomFactor;\n        var y = __y * this._initialZoomFactor;\n        var startZoomFactor = this._zoomFactor;\n        var startOffset = __assign({}, this._offset);\n        var rect = this._getContainerRect();\n        var containerCenter = { x: rect.width / 2, y: rect.height / 2 };\n        this._zoomFactor = 1;\n        this._offset = { x: -(containerCenter.x - x), y: -(containerCenter.y - y) };\n        this._scaleTo(scale, containerCenter);\n        this._stopAnimation();\n        if (!animated) {\n            return this._update();\n        }\n        var diffZoomFactor = this._zoomFactor - startZoomFactor;\n        var diffOffset = {\n            x: this._offset.x - startOffset.x,\n            y: this._offset.y - startOffset.y,\n        };\n        this._zoomFactor = startZoomFactor;\n        this._offset = __assign({}, startOffset);\n        var updateFrame = function (progress) {\n            var x = startOffset.x + diffOffset.x * progress;\n            var y = startOffset.y + diffOffset.y * progress;\n            _this._zoomFactor = startZoomFactor + diffZoomFactor * progress;\n            _this._offset = _this._sanitizeOffset({ x: x, y: y });\n            _this._update();\n        };\n        this._animate(updateFrame, {\n            callback: function () { return _this._sanitize(); },\n            duration: duration,\n        });\n    };\n    PinchZoom.prototype.scaleTo = function (options) {\n        var _this = this;\n        var _a = __assign({ duration: 250, animated: true }, options), x = _a.x, y = _a.y, scale = _a.scale, animated = _a.animated, duration = _a.duration;\n        var startZoomFactor = this._zoomFactor;\n        var startOffset = __assign({}, this._offset);\n        this._zoomFactor = 1;\n        this._offset = { x: 0, y: 0 };\n        this._scaleTo(scale, { x: x, y: y });\n        this._stopAnimation();\n        if (!animated) {\n            return this._update();\n        }\n        var diffZoomFactor = this._zoomFactor - startZoomFactor;\n        var diffOffset = {\n            x: this._offset.x - startOffset.x,\n            y: this._offset.y - startOffset.y,\n        };\n        this._zoomFactor = startZoomFactor;\n        this._offset = __assign({}, startOffset);\n        var updateFrame = function (progress) {\n            var x = startOffset.x + diffOffset.x * progress;\n            var y = startOffset.y + diffOffset.y * progress;\n            _this._zoomFactor = startZoomFactor + diffZoomFactor * progress;\n            _this._offset = { x: x, y: y };\n            _this._update();\n        };\n        this._animate(updateFrame, { callback: function () { return _this._sanitize(); }, duration: duration });\n    };\n    PinchZoom.prototype._scaleTo = function (zoomFactor, center) {\n        this._scale(zoomFactor / this._zoomFactor, center);\n        this._offset = this._sanitizeOffset(this._offset);\n    };\n    PinchZoom.prototype._scale = function (scale, center) {\n        scale = this._scaleZoomFactor(scale);\n        this._addOffset({\n            x: (scale - 1) * (center.x + this._offset.x),\n            y: (scale - 1) * (center.y + this._offset.y),\n        });\n        this.props.onZoomUpdate();\n    };\n    PinchZoom.prototype._scaleZoomFactor = function (scale) {\n        var originalZoomFactor = this._zoomFactor;\n        this._zoomFactor *= scale;\n        this._zoomFactor = clamp(this.props.minZoom, this.props.maxZoom, this._zoomFactor);\n        return this._zoomFactor / originalZoomFactor;\n    };\n    PinchZoom.prototype._canDrag = function () {\n        return this.props.draggableUnZoomed || !isCloseTo(this._zoomFactor, 1);\n    };\n    PinchZoom.prototype._drag = function (center, lastCenter) {\n        if (lastCenter) {\n            var y = -(center.y - lastCenter.y);\n            var x = -(center.x - lastCenter.x);\n            if (!this.props.lockDragAxis) {\n                this._addOffset({\n                    x: x,\n                    y: y,\n                });\n            }\n            else {\n                // lock scroll to position that was changed the most\n                if (abs(x) > abs(y)) {\n                    this._addOffset({\n                        x: x,\n                        y: 0,\n                    });\n                }\n                else {\n                    this._addOffset({\n                        y: y,\n                        x: 0,\n                    });\n                }\n            }\n            this.props.onDragUpdate();\n        }\n    };\n    PinchZoom.prototype._virtualDrag = function (center, lastCenter) {\n        if (lastCenter) {\n            var y = -(center.y - lastCenter.y);\n            var x = -(center.x - lastCenter.x);\n            this._draggingPoint = {\n                x: x + this._draggingPoint.x,\n                y: y + this._draggingPoint.y,\n            };\n        }\n    };\n    PinchZoom.prototype._addOffset = function (offset) {\n        var _a = this._offset, x = _a.x, y = _a.y;\n        this._offset = {\n            x: x + offset.x,\n            y: y + offset.y,\n        };\n    };\n    PinchZoom.prototype._sanitize = function () {\n        if (this._zoomFactor < this.props.zoomOutFactor) {\n            this._resetInertia();\n            this._zoomOutAnimation();\n        }\n        else if (this._isInsaneOffset()) {\n            this._sanitizeOffsetAnimation();\n        }\n    };\n    PinchZoom.prototype._isInsaneOffset = function () {\n        var offset = this._offset;\n        var sanitizedOffset = this._sanitizeOffset(offset);\n        return sanitizedOffset.x !== offset.x || sanitizedOffset.y !== offset.y;\n    };\n    PinchZoom.prototype._sanitizeOffsetAnimation = function () {\n        var _this = this;\n        var targetOffset = this._sanitizeOffset(this._offset);\n        var startOffset = __assign({}, this._offset);\n        var updateProgress = function (progress) {\n            var x = startOffset.x + progress * (targetOffset.x - startOffset.x);\n            var y = startOffset.y + progress * (targetOffset.y - startOffset.y);\n            _this._offset = { x: x, y: y };\n            _this._update();\n        };\n        this._animate(updateProgress);\n    };\n    PinchZoom.prototype._zoomOutAnimation = function () {\n        var _this = this;\n        if (this._zoomFactor === 1) {\n            return;\n        }\n        var startZoomFactor = this._zoomFactor;\n        var zoomFactor = 1;\n        var center = this._getCurrentZoomCenter();\n        var updateProgress = function (progress) {\n            var scaleFactor = startZoomFactor + progress * (zoomFactor - startZoomFactor);\n            _this._scaleTo(scaleFactor, center);\n        };\n        this._animate(updateProgress);\n    };\n    PinchZoom.prototype._getInitialZoomFactor = function () {\n        return this._initialZoomFactor;\n    };\n    PinchZoom.prototype._getCurrentZoomCenter = function () {\n        var _a = this._offset, x = _a.x, y = _a.y;\n        var offsetLeft = x - this._initialOffset.x;\n        var offsetTop = y - this._initialOffset.y;\n        return {\n            x: -1 * x - offsetLeft / (1 / this._zoomFactor - 1),\n            y: -1 * y - offsetTop / (1 / this._zoomFactor - 1),\n        };\n    };\n    PinchZoom.prototype._getOffsetByFirstTouch = function (event) {\n        return this._getOffsetTouches(event)[0];\n    };\n    PinchZoom.prototype._getOffsetTouches = function (event) {\n        var _document = this.props._document;\n        var _html = _document.documentElement;\n        var _body = _document.body;\n        var _a = this._getContainerRect(), top = _a.top, left = _a.left;\n        var scrollTop = _html.scrollTop || _body.scrollTop;\n        var scrollLeft = _html.scrollLeft || _body.scrollLeft;\n        var posTop = top + scrollTop;\n        var posLeft = left + scrollLeft;\n        return getPageCoordinatesByTouches(event.touches).map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return ({\n                x: x - posLeft,\n                y: y - posTop,\n            });\n        });\n    };\n    PinchZoom.prototype._animate = function (frameFn, options) {\n        var _this = this;\n        var startTime = new Date().getTime();\n        var _a = __assign({ timeFn: swing, callback: function () { }, duration: this.props.animationDuration }, options), timeFn = _a.timeFn, callback = _a.callback, duration = _a.duration;\n        var renderFrame = function () {\n            if (!_this._inAnimation) {\n                return;\n            }\n            var frameTime = new Date().getTime() - startTime;\n            var progress = frameTime / duration;\n            if (frameTime >= duration) {\n                frameFn(1);\n                _this._stopAnimation();\n                callback();\n                _this._update();\n            }\n            else {\n                progress = timeFn(progress);\n                frameFn(progress);\n                _this._update({ isAnimation: true });\n                requestAnimationFrame(renderFrame);\n            }\n        };\n        this._inAnimation = true;\n        requestAnimationFrame(renderFrame);\n    };\n    PinchZoom.prototype._stopAnimation = function () {\n        this._inAnimation = false;\n    };\n    PinchZoom.prototype._end = function () {\n        this._hasInteraction = false;\n        this._sanitize();\n        this._update();\n    };\n    PinchZoom.prototype._getContainerRect = function () {\n        var div = this._containerRef.current;\n        return div.getBoundingClientRect();\n    };\n    PinchZoom.prototype._getChildSize = function () {\n        var div = this._containerRef.current;\n        return getElementSize(div === null || div === void 0 ? void 0 : div.firstElementChild);\n    };\n    PinchZoom.prototype._updateInitialZoomFactor = function () {\n        var rect = this._getContainerRect();\n        var size = this._getChildSize();\n        var xZoomFactor = rect.width / size.width;\n        var yZoomFactor = rect.height / size.height;\n        this._initialZoomFactor = min(xZoomFactor, yZoomFactor);\n    };\n    PinchZoom.prototype._bindEvents = function () {\n        var _this = this;\n        var div = this._containerRef.current;\n        if (window.ResizeObserver) {\n            this._containerObserver = new ResizeObserver(this._onResize);\n            this._containerObserver.observe(div);\n        }\n        else {\n            window.addEventListener('resize', this._onResize);\n        }\n        this._handlers.forEach(function (_a) {\n            var eventName = _a[0], fn = _a[1], target = _a[2];\n            (target || div).addEventListener(eventName, fn, true);\n        });\n        Array.from(div.querySelectorAll('img')).forEach(function (img) {\n            return img.addEventListener('load', _this._onResize);\n        });\n    };\n    PinchZoom.prototype._unSubscribe = function () {\n        var _this = this;\n        var div = this._containerRef.current;\n        if (this._containerObserver) {\n            this._containerObserver.disconnect();\n            this._containerObserver = null;\n        }\n        window.removeEventListener('resize', this._onResize);\n        this._handlers.forEach(function (_a) {\n            var eventName = _a[0], fn = _a[1], target = _a[2];\n            (target || div).removeEventListener(eventName, fn, true);\n        });\n        Array.from(div.querySelectorAll('img')).forEach(function (img) {\n            return img.removeEventListener('load', _this._onResize);\n        });\n    };\n    PinchZoom.prototype._update = function (options) {\n        var _this = this;\n        if (this._updatePlaned) {\n            return;\n        }\n        var updateFrame = function () {\n            var scale = _this._getInitialZoomFactor() * _this._zoomFactor;\n            var x = -_this._offset.x / scale;\n            var y = -_this._offset.y / scale;\n            _this.props.onUpdate({ scale: scale, x: x, y: y });\n        };\n        if (options === null || options === void 0 ? void 0 : options.isAnimation) {\n            return updateFrame();\n        }\n        this._updatePlaned = true;\n        requestAnimationFrame(function () {\n            _this._updatePlaned = false;\n            updateFrame();\n        });\n    };\n    PinchZoom.prototype._handlerIfEnable = function (fn) {\n        var _this = this;\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.props.enabled) {\n                fn.apply(void 0, args);\n            }\n        };\n    };\n    PinchZoom.prototype._setInteraction = function (newInteraction, event) {\n        var interaction = this._interaction;\n        if (interaction !== newInteraction) {\n            if (interaction && !newInteraction) {\n                if (isZoomInteraction(interaction)) {\n                    this._handleZoomEnd();\n                }\n                else if (isDragInteraction(interaction)) {\n                    this._handleDragEnd();\n                }\n            }\n            if (isZoomInteraction(newInteraction)) {\n                this._handleZoomStart();\n            }\n            else if (isDragInteraction(newInteraction)) {\n                this._handleDragStart(event);\n            }\n        }\n        this._interaction = newInteraction;\n    };\n    PinchZoom.prototype._distanceBetweenNumbers = function (a, b) {\n        return a > b ? a - b : b - a;\n    };\n    PinchZoom.prototype._enoughToDrag = function () {\n        if (this._distanceBetweenNumbers(this._startOffset.x, this._draggingPoint.x) >\n            5 ||\n            this._distanceBetweenNumbers(this._startOffset.y, this._draggingPoint.y) >\n                5)\n            return true;\n        return false;\n    };\n    PinchZoom.prototype._updateInteraction = function (event) {\n        var fingers = this._fingers;\n        if (fingers === 2) {\n            return this._setInteraction('zoom', event);\n        }\n        if (fingers === 1 && this._canDrag()) {\n            return this._setInteraction('drag', event);\n        }\n        this._setInteraction(null, event);\n    };\n    PinchZoom.prototype._detectDoubleTap = function (event) {\n        var time = new Date().getTime();\n        if (this._fingers > 1) {\n            this._lastTouchStart = 0;\n        }\n        if (time - this._lastTouchStart < 300) {\n            cancelEvent(event);\n            this._handleDoubleTap(event);\n            if (isZoomInteraction(this._interaction)) {\n                this._handleZoomEnd();\n            }\n            else if (isDragInteraction(this._interaction)) {\n                this._handleDragEnd();\n            }\n        }\n        else {\n            this._isDoubleTap = false;\n        }\n        if (this._fingers === 1) {\n            this._lastTouchStart = time;\n        }\n    };\n    PinchZoom.prototype.simulate = function (fn) {\n        var _this = this;\n        return function (mouseEvent) {\n            var pageX = mouseEvent.pageX, pageY = mouseEvent.pageY, type = mouseEvent.type;\n            var isEnd = type === 'mouseup';\n            var isStart = type === 'mousedown';\n            if (isStart) {\n                mouseEvent.preventDefault();\n                _this._listenMouseMove = true;\n            }\n            if (_this._listenMouseMove) {\n                // @ts-ignore\n                mouseEvent.touches = isEnd ? [] : [{ pageX: pageX, pageY: pageY }];\n                fn(\n                // @ts-ignore\n                mouseEvent);\n            }\n            if (isEnd) {\n                _this._listenMouseMove = false;\n            }\n        };\n    };\n    PinchZoom.prototype.componentDidMount = function () {\n        this._bindEvents();\n        this._update();\n    };\n    PinchZoom.prototype.componentWillUnmount = function () {\n        this._stopAnimation();\n        this._unSubscribe();\n    };\n    PinchZoom.prototype.render = function () {\n        var _a = this.props, children = _a.children, containerProps = _a.containerProps, nonce = _a.nonce;\n        var child = Children.only(children);\n        var props = containerProps || {};\n        return (React.createElement(React.Fragment, null,\n            React.createElement(\"style\", { nonce: nonce }, styles),\n            React.createElement(\"div\", __assign({}, props, { ref: this._containerRef, className: classnames(styleRoot, props.className) }), cloneElement(child, {\n                className: classnames(styleChild, child.props.className),\n            }))));\n    };\n    PinchZoom.defaultProps = {\n        animationDuration: 250,\n        draggableUnZoomed: true,\n        enforceBoundsDuringZoom: false,\n        centerContained: false,\n        enabled: true,\n        inertia: true,\n        inertiaFriction: 0.96,\n        horizontalPadding: 0,\n        isTouch: isTouch,\n        lockDragAxis: false,\n        maxZoom: 5,\n        minZoom: 0.5,\n        onDoubleTap: noup,\n        onDragEnd: noup,\n        onDragStart: noup,\n        onDragUpdate: noup,\n        onZoomEnd: noup,\n        onZoomStart: noup,\n        onZoomUpdate: noup,\n        setOffsetsOnce: false,\n        shouldInterceptWheel: shouldInterceptWheel,\n        shouldCancelHandledTouchEndEvents: false,\n        tapZoomFactor: 1,\n        verticalPadding: 0,\n        wheelScaleFactor: 1500,\n        zoomOutFactor: 1.3,\n        doubleTapZoomOutOnMaxScale: false,\n        doubleTapToggleZoom: false,\n        // @ts-expect-error\n        _document: isSsr ? null : window.document,\n    };\n    return PinchZoom;\n}(Component));\nif (process.env.NODE_ENV !== 'production') {\n    var _a = require('prop-types'), any = _a.any, element = _a.element, object = _a.object, number = _a.number, func = _a.func, bool = _a.bool, string = _a.string;\n    // @ts-ignore\n    PinchZoom.propTypes = {\n        children: element,\n        containerProps: object,\n        wheelScaleFactor: number,\n        animationDuration: number,\n        draggableUnZoomed: bool,\n        enforceBoundsDuringZoom: bool,\n        centerContained: bool,\n        enabled: bool,\n        horizontalPadding: number,\n        lockDragAxis: bool,\n        nonce: string,\n        onUpdate: func.isRequired,\n        maxZoom: number,\n        minZoom: number,\n        onDoubleTap: func,\n        onDragEnd: func,\n        onDragStart: func,\n        onDragUpdate: func,\n        onZoomEnd: func,\n        onZoomStart: func,\n        onZoomUpdate: func,\n        setOffsetsOnce: bool,\n        tapZoomFactor: number,\n        verticalPadding: number,\n        zoomOutFactor: number,\n        doubleTapZoomOutOnMaxScale: bool,\n        doubleTapToggleZoom: bool,\n        isTouch: func,\n        _document: any,\n    };\n}\nexport default PinchZoom;\n","export default function formatDuration(time) {\n  if (!time) return;\n  let hours = Math.floor(time / 3600);\n  let minutes = Math.floor((time % 3600) / 60);\n  let seconds = Math.round(time % 60);\n\n  if (hours === 0) {\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  } else {\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds\n      .toString()\n      .padStart(2, '0')}`;\n  }\n}\n","import { Trans, useLingui } from '@lingui/react/macro';\nimport { getBlurHashAverageColor } from 'fast-blurhash';\nimport { Fragment } from 'preact';\nimport { memo } from 'preact/compat';\nimport {\n  useCallback,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'preact/hooks';\nimport QuickPinchZoom, { make3dTransformValue } from 'react-quick-pinch-zoom';\n\nimport formatDuration from '../utils/format-duration';\nimport mem from '../utils/mem';\nimport states from '../utils/states';\n\nimport Icon from './icon';\nimport Link from './link';\n\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); // https://stackoverflow.com/a/23522755\n\n/*\nMedia type\n===\nunknown = unsupported or unrecognized file type\nimage = Static image\ngifv = Looping, soundless animation\nvideo = Video clip\naudio = Audio track\n*/\n\nconst dataAltLabel = 'ALT';\nconst AltBadge = (props) => {\n  const { t } = useLingui();\n  const { alt, lang, index, ...rest } = props;\n  if (!alt || !alt.trim()) return null;\n  return (\n    <button\n      type=\"button\"\n      class=\"alt-badge clickable\"\n      {...rest}\n      onClick={(e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        states.showMediaAlt = {\n          alt,\n          lang,\n        };\n      }}\n      title={t`Media description`}\n    >\n      {dataAltLabel}\n      {!!index && <sup>{index}</sup>}\n    </button>\n  );\n};\n\nconst MEDIA_CAPTION_LIMIT = 140;\nconst MEDIA_CAPTION_LIMIT_LONGER = 280;\nexport const isMediaCaptionLong = mem((caption) =>\n  caption?.length\n    ? caption.length > MEDIA_CAPTION_LIMIT ||\n      /[\\n\\r].*[\\n\\r]/.test(caption.trim())\n    : false,\n);\n\nfunction Media({\n  class: className = '',\n  media,\n  to,\n  lang,\n  showOriginal,\n  autoAnimate,\n  showCaption,\n  allowLongerCaption,\n  altIndex,\n  checkAspectRatio = true,\n  onClick,\n}) {\n  let {\n    id,\n    blurhash,\n    description,\n    meta,\n    previewRemoteUrl,\n    previewUrl,\n    remoteUrl,\n    url,\n    type,\n  } = media;\n  if (/no\\-preview\\./i.test(previewUrl)) {\n    previewUrl = null;\n  }\n  const mediaVTN = getSafeViewTransitionName(id || blurhash || url);\n  const { original = {}, small, focus } = meta || {};\n\n  const width = showOriginal\n    ? original?.width\n    : small?.width || original?.width;\n  const height = showOriginal\n    ? original?.height\n    : small?.height || original?.height;\n  const mediaURL = showOriginal ? url : previewUrl || url;\n  const remoteMediaURL = showOriginal\n    ? remoteUrl\n    : previewRemoteUrl || remoteUrl;\n  const hasPreviewDimensions = small?.width && small?.height;\n  const hasDimensions = width && height;\n  const orientation = hasDimensions\n    ? width > height\n      ? 'landscape'\n      : 'portrait'\n    : null;\n\n  const rgbAverageColor = blurhash ? getBlurHashAverageColor(blurhash) : null;\n\n  const videoRef = useRef();\n\n  let focalPosition;\n  if (focus) {\n    // Convert focal point to CSS background position\n    // Formula from jquery-focuspoint\n    // x = -1, y = 1 => 0% 0%\n    // x = 0, y = 0 => 50% 50%\n    // x = 1, y = -1 => 100% 100%\n    const x = ((focus.x + 1) / 2) * 100;\n    const y = ((1 - focus.y) / 2) * 100;\n    focalPosition = `${x.toFixed(0)}% ${y.toFixed(0)}%`;\n  }\n\n  const mediaRef = useRef();\n  const onUpdate = useCallback(({ x, y, scale }) => {\n    const { current: media } = mediaRef;\n\n    if (media) {\n      const value = make3dTransformValue({ x, y, scale });\n\n      if (scale === 1) {\n        media.style.removeProperty('transform');\n      } else {\n        media.style.setProperty('transform', value);\n      }\n\n      media.closest('.media-zoom').style.touchAction =\n        scale <= 1.01 ? 'pan-x' : '';\n    }\n  }, []);\n\n  const [pinchZoomEnabled, setPinchZoomEnabled] = useState(false);\n  const quickPinchZoomProps = {\n    enabled: pinchZoomEnabled,\n    draggableUnZoomed: false,\n    inertiaFriction: 0.9,\n    tapZoomFactor: 2,\n    doubleTapToggleZoom: true,\n    containerProps: {\n      className: 'media-zoom',\n      style: {\n        overflow: 'visible',\n        //   width: 'inherit',\n        //   height: 'inherit',\n        //   justifyContent: 'inherit',\n        //   alignItems: 'inherit',\n        //   display: 'inherit',\n      },\n    },\n    onUpdate,\n  };\n\n  const [mediaLoadError, setMediaLoadError] = useState(false);\n\n  const Parent = useMemo(\n    () =>\n      to && !mediaLoadError ? (props) => <Link to={to} {...props} /> : 'div',\n    [to, mediaLoadError],\n  );\n\n  const remoteMediaURLObj = remoteMediaURL ? getURLObj(remoteMediaURL) : null;\n  const isVideoMaybe =\n    type === 'unknown' &&\n    remoteMediaURLObj &&\n    /\\.(mp4|m4r|m4v|mov|webm)$/i.test(remoteMediaURLObj.pathname);\n  const isAudioMaybe =\n    type === 'unknown' &&\n    remoteMediaURLObj &&\n    /\\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(remoteMediaURLObj.pathname);\n  const isImage =\n    type === 'image' ||\n    (type === 'unknown' && previewUrl && !isVideoMaybe && !isAudioMaybe);\n  const isPreviewVideoMaybe =\n    previewUrl &&\n    /\\.(mp4|m4r|m4v|mov|webm)$/i.test(getURLObj(previewUrl).pathname);\n\n  const parentRef = useRef();\n  const [imageSmallerThanParent, setImageSmallerThanParent] = useState(false);\n  useLayoutEffect(() => {\n    if (!isImage) return;\n    if (!showOriginal) return;\n    if (!parentRef.current) return;\n    const { offsetWidth, offsetHeight } = parentRef.current;\n    const smaller = width < offsetWidth && height < offsetHeight;\n    if (smaller) setImageSmallerThanParent(smaller);\n  }, [width, height]);\n\n  const maxAspectHeight =\n    window.innerHeight * (orientation === 'portrait' ? 0.45 : 0.33);\n  const maxHeight = orientation === 'portrait' ? 0 : 160;\n  const averageColorStyle = {\n    '--average-color': rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n  };\n  const mediaStyles =\n    width && height\n      ? {\n          '--width': `${width}px`,\n          '--height': `${height}px`,\n          // Calculate '--aspectWidth' based on aspect ratio calculated from '--width' and '--height', max height has to be 160px\n          '--aspectWidth': `${\n            (width / height) * Math.max(maxHeight, maxAspectHeight)\n          }px`,\n          aspectRatio: `${width} / ${height}`,\n          ...averageColorStyle,\n        }\n      : {\n          ...averageColorStyle,\n        };\n\n  const longDesc = isMediaCaptionLong(description);\n  let showInlineDesc =\n    !!showCaption && !showOriginal && !!description && !longDesc;\n  if (\n    allowLongerCaption &&\n    !showInlineDesc &&\n    description?.length <= MEDIA_CAPTION_LIMIT_LONGER\n  ) {\n    showInlineDesc = true;\n  }\n  const Figure = !showInlineDesc\n    ? Fragment\n    : (props) => {\n        const { children, ...restProps } = props;\n        return (\n          <figure {...restProps}>\n            {children}\n            <figcaption\n              class=\"media-caption\"\n              lang={lang}\n              dir=\"auto\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                states.showMediaAlt = {\n                  alt: description,\n                  lang,\n                };\n              }}\n            >\n              {description}\n            </figcaption>\n          </figure>\n        );\n      };\n\n  const postViewState = () =>\n    window.matchMedia('(min-width: calc(40em + 350px))').matches\n      ? 'large'\n      : 'small';\n  const interceptOnClick = useCallback(\n    (e) => {\n      const isOnPostPage = e.target.closest('.status-deck');\n      if (\n        showOriginal ||\n        (postViewState() === 'large' && isOnPostPage) ||\n        !document.startViewTransition\n      ) {\n        onClick?.(e);\n        return;\n      }\n      const el =\n        e.target.closest('[data-view-transition-name]') ||\n        e.target.querySelector('[data-view-transition-name]');\n      if (el) {\n        // BUG: both link and onClick is triggered at the same time\n        // Temporarily disable view transition if has onClick\n        // Detecting preventDefault for an onClick has to happen before view transition but it's only possible after click, and this mean the link is already clicked even before we know it's default prevented.\n        if (onClick) {\n          onClick(e);\n        } else {\n          e.preventDefault();\n          if (el.dataset.viewTransitioned) {\n            el.style.viewTransitionName = mediaVTN;\n            try {\n              document.startViewTransition(() => {\n                el.style.viewTransitionName = '';\n                location.hash = `#${to}`;\n              });\n            } catch (e) {\n              console.error(e);\n              el.style.viewTransitionName = '';\n              location.hash = `#${to}`;\n            }\n          } else {\n            location.hash = `#${to}`;\n          }\n        }\n      } else {\n        onClick?.(e);\n      }\n    },\n    [mediaVTN, showOriginal, onClick],\n  );\n\n  if (isImage) {\n    // Note: type: unknown might not have width/height\n    quickPinchZoomProps.containerProps.style.display = 'inherit';\n\n    useLayoutEffect(() => {\n      if (!isSafari) return;\n      if (!showOriginal) return;\n      (async () => {\n        try {\n          await fetch(mediaURL, { mode: 'no-cors' });\n          mediaRef.current.src = mediaURL;\n        } catch (e) {\n          // Ignore\n        }\n      })();\n    }, [mediaURL]);\n\n    return (\n      <Figure>\n        <Parent\n          ref={parentRef}\n          class={`media media-image ${className}`}\n          onClick={interceptOnClick}\n          data-orientation={orientation}\n          data-has-alt={!showInlineDesc || undefined}\n          style={\n            showOriginal\n              ? {\n                  backgroundImage: `url(${previewUrl})`,\n                  '--bg-image': `url(${previewUrl})`,\n                  backgroundSize: imageSmallerThanParent\n                    ? `${width}px ${height}px`\n                    : undefined,\n                  ...averageColorStyle,\n                }\n              : mediaStyles\n          }\n        >\n          {showOriginal ? (\n            <QuickPinchZoom {...quickPinchZoomProps}>\n              <img\n                ref={mediaRef}\n                src={mediaURL}\n                alt={description}\n                width={width}\n                height={height}\n                data-orientation={orientation}\n                loading=\"eager\"\n                decoding=\"sync\"\n                style={{\n                  'view-transition-name': mediaVTN,\n                }}\n                onLoad={(e) => {\n                  const el = e.target;\n                  const mediaImage = el.closest('.media-image');\n                  if (mediaImage) {\n                    mediaImage.style.backgroundImage = `url(${el.src})`;\n                    mediaImage.style.removeProperty('--bg-image');\n                  }\n                  el.closest('.media-zoom').style.display = '';\n                  setPinchZoomEnabled(true);\n                }}\n                onError={(e) => {\n                  const { src } = e.target;\n                  if (\n                    src === mediaURL &&\n                    remoteMediaURL &&\n                    mediaURL !== remoteMediaURL\n                  ) {\n                    e.target.src = remoteMediaURL;\n                  }\n                }}\n              />\n            </QuickPinchZoom>\n          ) : (\n            <>\n              <img\n                src={mediaURL}\n                alt={showInlineDesc ? '' : description}\n                width={width}\n                height={height}\n                data-orientation={orientation}\n                loading=\"lazy\"\n                data-view-transition-name={mediaVTN}\n                style={{\n                  // backgroundColor:\n                  //   rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n                  // backgroundPosition: focalBackgroundPosition || 'center',\n                  // Duration based on width or height in pixels\n                  objectPosition: focalPosition || 'center',\n                  // 100px per second (rough estimate)\n                  // Clamp between 5s and 120s\n                  '--anim-duration': `${Math.min(\n                    Math.max(Math.max(width, height) / 100, 5),\n                    120,\n                  )}s`,\n                }}\n                onLoad={(e) => {\n                  // e.target.closest('.media-image').style.backgroundImage = '';\n                  e.target.dataset.loaded = true;\n                  const $media = e.target.closest('.media');\n                  if (!hasPreviewDimensions && $media) {\n                    const { naturalWidth, naturalHeight } = e.target;\n                    $media.dataset.orientation =\n                      naturalWidth > naturalHeight ? 'landscape' : 'portrait';\n                    $media.style.setProperty('--width', `${naturalWidth}px`);\n                    $media.style.setProperty('--height', `${naturalHeight}px`);\n                    $media.style.aspectRatio = `${naturalWidth}/${naturalHeight}`;\n                  }\n\n                  // Check natural aspect ratio vs display aspect ratio\n                  if (checkAspectRatio && $media) {\n                    const { target } = e;\n                    setTimeout(() => {\n                      const {\n                        clientWidth,\n                        clientHeight,\n                        naturalWidth,\n                        naturalHeight,\n                      } = target;\n                      if (\n                        clientWidth &&\n                        clientHeight &&\n                        naturalWidth &&\n                        naturalHeight\n                      ) {\n                        const minDimension = 88;\n                        if (\n                          naturalWidth < minDimension ||\n                          naturalHeight < minDimension\n                        ) {\n                          $media.dataset.hasSmallDimension = true;\n                        } else {\n                          const displayNaturalHeight =\n                            (naturalHeight * clientWidth) / naturalWidth;\n                          const almostSimilarHeight =\n                            Math.abs(displayNaturalHeight - clientHeight) < 5;\n\n                          if (almostSimilarHeight) {\n                            const $mediaParent = $media.closest('.media');\n                            if ($mediaParent) {\n                              $mediaParent.dataset.hasNaturalAspectRatio = true;\n                            }\n                          }\n                        }\n                      }\n                    }, 300);\n                  }\n                }}\n                onError={(e) => {\n                  const { src } = e.target;\n                  if (\n                    src === mediaURL &&\n                    remoteMediaURL &&\n                    mediaURL !== remoteMediaURL\n                  ) {\n                    e.target.src = remoteMediaURL;\n                  } else {\n                    setMediaLoadError(true);\n                  }\n                }}\n              />\n              {!showInlineDesc && (\n                <AltBadge alt={description} lang={lang} index={altIndex} />\n              )}\n            </>\n          )}\n        </Parent>\n        {mediaLoadError && (\n          <div>\n            <a href={remoteUrl} class=\"button plain6 small\" target=\"_blank\">\n              <Icon icon=\"external\" />{' '}\n              <span>\n                <Trans>Open file</Trans>\n              </span>\n            </a>\n          </div>\n        )}\n      </Figure>\n    );\n  } else if (type === 'gifv' || type === 'video' || isVideoMaybe) {\n    const hasDuration = original.duration > 0;\n    const shortDuration = original.duration < 31;\n    const isGIF = type === 'gifv' && shortDuration;\n    // If GIF is too long, treat it as a video\n    const loopable = original.duration < 61;\n    const formattedDuration = formatDuration(original.duration);\n    const hoverAnimate = !showOriginal && !autoAnimate && isGIF;\n    const autoGIFAnimate = !showOriginal && autoAnimate && isGIF;\n    const showProgress = original.duration > 5;\n\n    // This string is only for autoplay + muted to work on Mobile Safari\n    const gifHTML = `\n      <video\n        src=\"${url}\"\n        poster=\"${previewUrl}\"\n        width=\"${width}\"\n        height=\"${height}\"\n        data-orientation=\"${orientation}\"\n        style=\"view-transition-name: ${mediaVTN}\"\n        preload=\"auto\"\n        autoplay\n        muted\n        playsinline\n        ${loopable ? 'loop' : ''}\n        ondblclick=\"this.paused ? this.play() : this.pause()\"\n        ${\n          showProgress\n            ? \"ontimeupdate=\\\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\\\"\"\n            : ''\n        }\n      ></video>\n  `;\n\n    const videoHTML = `\n      <video\n        src=\"${url}\"\n        poster=\"${previewUrl}\"\n        width=\"${width}\"\n        height=\"${height}\"\n        data-orientation=\"${orientation}\"\n        style=\"view-transition-name: ${mediaVTN}\"\n        preload=\"auto\"\n        autoplay\n        playsinline\n        ${loopable ? 'loop' : ''}\n        controls\n      ></video>\n    `;\n\n    return (\n      <Figure>\n        <Parent\n          ref={parentRef}\n          class={`media ${className} media-${isGIF ? 'gif' : 'video'} ${\n            autoGIFAnimate ? 'media-contain' : ''\n          } ${hoverAnimate ? 'media-hover-animate' : ''}`}\n          data-orientation={orientation}\n          data-formatted-duration={\n            !showOriginal ? formattedDuration : undefined\n          }\n          data-label={\n            isGIF && !showOriginal && !autoGIFAnimate ? 'GIF' : undefined\n          }\n          data-has-alt={!showInlineDesc || undefined}\n          // style={{\n          //   backgroundColor:\n          //     rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n          // }}\n          style={!showOriginal && mediaStyles}\n          onClick={(e) => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.pause();\n              } catch (e) {}\n            }\n            interceptOnClick(e);\n          }}\n          onMouseEnter={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.play();\n              } catch (e) {}\n            }\n          }}\n          onMouseLeave={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.pause();\n              } catch (e) {}\n            }\n          }}\n          onFocus={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.play();\n              } catch (e) {}\n            }\n          }}\n          onBlur={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.pause();\n              } catch (e) {}\n            }\n          }}\n        >\n          {showOriginal || autoGIFAnimate ? (\n            isGIF && showOriginal ? (\n              <QuickPinchZoom {...quickPinchZoomProps} enabled>\n                <div\n                  ref={mediaRef}\n                  dangerouslySetInnerHTML={{\n                    __html: gifHTML,\n                  }}\n                />\n              </QuickPinchZoom>\n            ) : isGIF ? (\n              <div\n                class=\"video-container\"\n                dangerouslySetInnerHTML={{\n                  __html: gifHTML,\n                }}\n              />\n            ) : (\n              <div\n                class=\"video-container\"\n                dangerouslySetInnerHTML={{ __html: videoHTML }}\n              />\n            )\n          ) : isGIF ? (\n            <video\n              ref={videoRef}\n              src={url}\n              poster={previewUrl}\n              width={width}\n              height={height}\n              data-orientation={orientation}\n              data-view-transition-name={mediaVTN}\n              preload=\"auto\"\n              // controls\n              playsinline\n              loop\n              muted\n              onTimeUpdate={\n                showProgress\n                  ? (e) => {\n                      const { target } = e;\n                      const container = target?.closest('.media-gif');\n                      if (container) {\n                        const percentage =\n                          (target.currentTime / target.duration) * 100;\n                        container.style.setProperty(\n                          '--progress',\n                          `${percentage}%`,\n                        );\n                      }\n                    }\n                  : undefined\n              }\n            />\n          ) : (\n            <>\n              {previewUrl && !isPreviewVideoMaybe ? (\n                <img\n                  src={previewUrl}\n                  alt={showInlineDesc ? '' : description}\n                  width={width}\n                  height={height}\n                  data-orientation={orientation}\n                  loading=\"lazy\"\n                  decoding=\"async\"\n                  data-view-transition-name={mediaVTN}\n                  onLoad={(e) => {\n                    if (!hasPreviewDimensions) {\n                      const $media = e.target.closest('.media');\n                      if ($media) {\n                        const { naturalHeight, naturalWidth } = e.target;\n                        $media.dataset.orientation =\n                          naturalWidth > naturalHeight\n                            ? 'landscape'\n                            : 'portrait';\n                        $media.style.setProperty(\n                          '--width',\n                          `${naturalWidth}px`,\n                        );\n                        $media.style.setProperty(\n                          '--height',\n                          `${naturalHeight}px`,\n                        );\n                        $media.style.aspectRatio = `${naturalWidth}/${naturalHeight}`;\n                      }\n                    }\n                  }}\n                />\n              ) : (\n                <video\n                  src={url + '#t=0.1'} // Make Safari show 1st-frame preview\n                  width={width}\n                  height={height}\n                  data-orientation={orientation}\n                  data-view-transition-name={mediaVTN}\n                  preload=\"metadata\"\n                  muted\n                  disablePictureInPicture\n                  onLoadedMetadata={(e) => {\n                    if (!hasDuration) {\n                      const { duration } = e.target;\n                      if (duration) {\n                        const formattedDuration = formatDuration(duration);\n                        const container = e.target.closest('.media-video');\n                        if (container) {\n                          container.dataset.formattedDuration =\n                            formattedDuration;\n                        }\n                      }\n                    }\n                  }}\n                />\n              )}\n              <div class=\"media-play\">\n                <Icon icon=\"play\" size=\"xl\" alt=\"\" />\n              </div>\n            </>\n          )}\n          {!showOriginal && !showInlineDesc && (\n            <AltBadge alt={description} lang={lang} index={altIndex} />\n          )}\n        </Parent>\n      </Figure>\n    );\n  } else if (type === 'audio' || isAudioMaybe) {\n    const formattedDuration = formatDuration(original.duration);\n    return (\n      <Figure>\n        <Parent\n          class={`media media-audio ${className}`}\n          data-formatted-duration={\n            !showOriginal ? formattedDuration : undefined\n          }\n          data-has-alt={!showInlineDesc || undefined}\n          onClick={onClick}\n          style={!showOriginal && mediaStyles}\n        >\n          {showOriginal ? (\n            previewUrl ? (\n              <video\n                src={(remoteUrl || url) + '#t=0.1'}\n                width={width}\n                height={height}\n                data-orientation={orientation}\n                poster={previewUrl}\n                style={{\n                  background: `url(${previewUrl}) center/cover`,\n                  aspectRatio: `${width}/${height}`,\n                }}\n                preload=\"metadata\"\n                controls\n                controlsList=\"nofullscreen\"\n                autoPlay\n                playsInline\n              />\n            ) : (\n              <audio src={remoteUrl || url} preload=\"none\" controls autoPlay />\n            )\n          ) : previewUrl ? (\n            <img\n              src={previewUrl}\n              alt={showInlineDesc ? '' : description}\n              width={width}\n              height={height}\n              data-orientation={orientation}\n              loading=\"lazy\"\n              onError={(e) => {\n                try {\n                  // Remove self if broken\n                  e.target?.remove?.();\n                } catch (e) {}\n              }}\n            />\n          ) : null}\n          {!showOriginal && (\n            <>\n              <div class=\"media-play\">\n                <Icon icon=\"play\" size=\"xl\" alt=\"\" />\n              </div>\n              {!showInlineDesc && (\n                <AltBadge alt={description} lang={lang} index={altIndex} />\n              )}\n            </>\n          )}\n        </Parent>\n      </Figure>\n    );\n  }\n}\n\nfunction getURLObj(url) {\n  // Fake base URL if url doesn't have https:// prefix\n  return URL.parse(url, location.origin);\n}\n\nexport function getSafeViewTransitionName(inputString) {\n  // Replace any character that is not a letter, number, hyphen, or underscore with a hyphen.\n  let safeName = inputString.replace(/[^a-zA-Z0-9_-]/g, '-');\n\n  // Ensure it starts with a letter, underscore, or two hyphens (to prevent starting with a number or single hyphen).\n  // This covers edge cases where the original string might start with an invalid character after replacement.\n  if (safeName.match(/^[0-9-]/)) {\n    safeName = 'vt-' + safeName;\n  }\n\n  return safeName;\n}\n\nexport default memo(Media, (oldProps, newProps) => {\n  const oldMedia = oldProps.media || {};\n  const newMedia = newProps.media || {};\n\n  return (\n    oldMedia?.id === newMedia?.id &&\n    oldMedia.url === newMedia.url &&\n    oldProps.to === newProps.to &&\n    oldProps.class === newProps.class\n  );\n});\n","import { useEffect, useRef, useState } from 'preact/hooks';\n\nimport isRTL from '../utils/is-rtl';\n\nimport Icon from './icon';\nimport Media from './media';\n\nfunction MediaFirstContainer(props) {\n  const { mediaAttachments, language, postID, instance } = props;\n  const moreThanOne = mediaAttachments.length > 1;\n\n  const carouselRef = useRef();\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    let handleScroll = () => {\n      const { clientWidth, scrollLeft } = carouselRef.current;\n      const index = Math.round(Math.abs(scrollLeft) / clientWidth);\n      setCurrentIndex(index);\n    };\n    if (carouselRef.current) {\n      carouselRef.current.addEventListener('scroll', handleScroll, {\n        passive: true,\n      });\n    }\n    return () => {\n      if (carouselRef.current) {\n        carouselRef.current.removeEventListener('scroll', handleScroll);\n      }\n    };\n  }, []);\n\n  return (\n    <>\n      <div class=\"media-first-container\">\n        <div class=\"media-first-carousel\" ref={carouselRef}>\n          {mediaAttachments.map((media, i) => (\n            <div class=\"media-first-item\" key={media.id}>\n              <Media\n                media={media}\n                lang={language}\n                to={`/${instance}/s/${postID}?media=${i + 1}`}\n              />\n            </div>\n          ))}\n        </div>\n        {moreThanOne && (\n          <div class=\"media-carousel-controls\">\n            <div class=\"carousel-indexer\">\n              {currentIndex + 1}/{mediaAttachments.length}\n            </div>\n            <label class=\"media-carousel-button\">\n              <button\n                type=\"button\"\n                class=\"carousel-button\"\n                hidden={currentIndex === 0}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  carouselRef.current.focus();\n                  carouselRef.current.scrollTo({\n                    left:\n                      carouselRef.current.clientWidth *\n                      (currentIndex - 1) *\n                      (isRTL() ? -1 : 1),\n                    behavior: 'smooth',\n                  });\n                }}\n              >\n                <Icon icon=\"arrow-left\" />\n              </button>\n            </label>\n            <label class=\"media-carousel-button\">\n              <button\n                type=\"button\"\n                class=\"carousel-button\"\n                hidden={currentIndex === mediaAttachments.length - 1}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  carouselRef.current.focus();\n                  carouselRef.current.scrollTo({\n                    left:\n                      carouselRef.current.clientWidth *\n                      (currentIndex + 1) *\n                      (isRTL() ? -1 : 1),\n                    behavior: 'smooth',\n                  });\n                }}\n              >\n                <Icon icon=\"arrow-right\" />\n              </button>\n            </label>\n          </div>\n        )}\n      </div>\n      {moreThanOne && (\n        <div\n          class=\"media-carousel-dots\"\n          style={{\n            '--dots-count': mediaAttachments.length,\n          }}\n        >\n          {mediaAttachments.map((media, i) => (\n            <span\n              key={media.id}\n              class={`carousel-dot ${i === currentIndex ? 'active' : ''}`}\n            />\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default MediaFirstContainer;\n","function MultipleMediaFigure(props) {\n  const { enabled, children, lang, captionChildren } = props;\n  if (!enabled || !captionChildren) return children;\n  return (\n    <figure class=\"media-figure-multiple\">\n      {children}\n      <figcaption lang={lang} dir=\"auto\">\n        {captionChildren}\n      </figcaption>\n    </figure>\n  );\n}\n\nexport default MultipleMediaFigure;\n","import { i18n } from '@lingui/core';\nimport { plural } from '@lingui/core/macro';\nimport { Plural, Trans, useLingui } from '@lingui/react/macro';\nimport { useState } from 'preact/hooks';\n\nimport shortenNumber from '../utils/shorten-number';\n\nimport EmojiText from './emoji-text';\nimport Icon from './icon';\nimport RelativeTime from './relative-time';\n\nexport default function Poll({\n  poll,\n  lang,\n  readOnly,\n  refresh = () => {},\n  votePoll = () => {},\n}) {\n  const { t } = useLingui();\n  const [uiState, setUIState] = useState('default');\n  const {\n    expired,\n    expiresAt,\n    id,\n    multiple,\n    options,\n    ownVotes,\n    voted,\n    votersCount,\n    votesCount = 0,\n    emojis,\n  } = poll;\n  const expiresAtDate = !!expiresAt && new Date(expiresAt); // Update poll at point of expiry\n  // NOTE: Disable this because setTimeout runs immediately if delay is too large\n  // https://stackoverflow.com/a/56718027/20838\n  // useEffect(() => {\n  //   let timeout;\n  //   if (!expired && expiresAtDate) {\n  //     const ms = expiresAtDate.getTime() - Date.now() + 1; // +1 to give it a little buffer\n  //     if (ms > 0) {\n  //       timeout = setTimeout(() => {\n  //         setUIState('loading');\n  //         (async () => {\n  //           // await refresh();\n  //           setUIState('default');\n  //         })();\n  //       }, ms);\n  //     }\n  //   }\n  //   return () => {\n  //     clearTimeout(timeout);\n  //   };\n  // }, [expired, expiresAtDate]);\n\n  const pollVotesCount = multiple ? votersCount || votesCount : votesCount;\n  let roundPrecision = 0;\n\n  if (pollVotesCount <= 1000) {\n    roundPrecision = 0;\n  } else if (pollVotesCount <= 10000) {\n    roundPrecision = 1;\n  } else if (pollVotesCount <= 100000) {\n    roundPrecision = 2;\n  }\n\n  const [showResults, setShowResults] = useState(false);\n  const optionsHaveVoteCounts = options.every((o) => o.votesCount !== null);\n\n  return (\n    <div\n      lang={lang}\n      dir=\"auto\"\n      class={`poll ${readOnly ? 'read-only' : ''} ${\n        uiState === 'loading' ? 'loading' : ''\n      }`}\n    >\n      {(showResults && optionsHaveVoteCounts) || voted || expired ? (\n        <>\n          <div class=\"poll-options\">\n            {options.map((option, i) => {\n              const { title, votesCount: optionVotesCount } = option;\n              const ratio = pollVotesCount\n                ? optionVotesCount / pollVotesCount\n                : 0;\n              const percentage = ratio\n                ? ratio.toLocaleString(i18n.locale || undefined, {\n                    style: 'percent',\n                    maximumFractionDigits: roundPrecision,\n                  })\n                : '0%';\n\n              const isLeading =\n                optionVotesCount > 0 &&\n                optionVotesCount ===\n                  Math.max(...options.map((o) => o.votesCount));\n              return (\n                <div\n                  key={`${i}-${title}-${optionVotesCount}`}\n                  class={`poll-option poll-result ${\n                    isLeading ? 'poll-option-leading' : ''\n                  }`}\n                  style={{\n                    '--percentage': `${ratio * 100}%`,\n                  }}\n                >\n                  <div class=\"poll-option-title\">\n                    <span>\n                      <EmojiText text={title} emojis={emojis} />\n                    </span>\n                    {voted && ownVotes.includes(i) && (\n                      <>\n                        {' '}\n                        <Icon icon=\"check-circle\" alt={t`Voted`} />\n                      </>\n                    )}\n                  </div>\n                  <div\n                    class=\"poll-option-votes\"\n                    title={plural(optionVotesCount, {\n                      one: `# vote`,\n                      other: `# votes`,\n                    })}\n                  >\n                    {percentage}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          {!expired && !voted && (\n            <button\n              class=\"poll-vote-button plain2\"\n              disabled={uiState === 'loading'}\n              onClick={(e) => {\n                e.preventDefault();\n                setShowResults(false);\n              }}\n            >\n              <Icon icon=\"arrow-left\" size=\"s\" /> <Trans>Hide results</Trans>\n            </button>\n          )}\n        </>\n      ) : (\n        <form\n          onSubmit={async (e) => {\n            e.preventDefault();\n            const form = e.target;\n            const formData = new FormData(form);\n            const choices = [];\n            formData.forEach((value, key) => {\n              if (key === 'poll') {\n                choices.push(value);\n              }\n            });\n            if (!choices.length) return;\n            setUIState('loading');\n            await votePoll(choices);\n            setUIState('default');\n          }}\n        >\n          <div class=\"poll-options\">\n            {options.map((option, i) => {\n              const { title } = option;\n              return (\n                <div class=\"poll-option\">\n                  <label class=\"poll-label\">\n                    <input\n                      type={multiple ? 'checkbox' : 'radio'}\n                      name=\"poll\"\n                      value={i}\n                      disabled={uiState === 'loading'}\n                      readOnly={readOnly}\n                    />\n                    <span class=\"poll-option-title\">\n                      <EmojiText text={title} emojis={emojis} />\n                    </span>\n                  </label>\n                </div>\n              );\n            })}\n          </div>\n          {!readOnly && (\n            <button\n              class=\"poll-vote-button\"\n              type=\"submit\"\n              disabled={uiState === 'loading'}\n            >\n              <Trans>Vote</Trans>\n            </button>\n          )}\n        </form>\n      )}\n      <p class=\"poll-meta\">\n        <span class=\"spacer\">\n          <span class=\"ib\">\n            <Plural\n              value={votesCount}\n              one={\n                <Trans>\n                  <span title={votesCount}>{shortenNumber(votesCount)}</span>{' '}\n                  vote\n                </Trans>\n              }\n              other={\n                <Trans>\n                  <span title={votesCount}>{shortenNumber(votesCount)}</span>{' '}\n                  votes\n                </Trans>\n              }\n            />\n          </span>\n          {!!votersCount && votersCount !== votesCount && (\n            <>\n              {' '}\n              &bull;{' '}\n              <span class=\"ib\">\n                <Plural\n                  value={votersCount}\n                  one={\n                    <Trans>\n                      <span title={votersCount}>\n                        {shortenNumber(votersCount)}\n                      </span>{' '}\n                      voter\n                    </Trans>\n                  }\n                  other={\n                    <Trans>\n                      <span title={votersCount}>\n                        {shortenNumber(votersCount)}\n                      </span>{' '}\n                      voters\n                    </Trans>\n                  }\n                />\n              </span>\n            </>\n          )}{' '}\n          &bull;{' '}\n          {expired ? (\n            !!expiresAtDate ? (\n              <span class=\"ib\">\n                <Trans>\n                  Ended <RelativeTime datetime={expiresAtDate} />\n                </Trans>\n              </span>\n            ) : (\n              t`Ended`\n            )\n          ) : !!expiresAtDate ? (\n            <span class=\"ib\">\n              <Trans>\n                Ending <RelativeTime datetime={expiresAtDate} />\n              </Trans>\n            </span>\n          ) : (\n            t`Ending`\n          )}\n        </span>\n        {!voted && !expired && !readOnly && optionsHaveVoteCounts && (\n          <button\n            type=\"button\"\n            class=\"plain small\"\n            disabled={uiState === 'loading'}\n            onClick={(e) => {\n              e.preventDefault();\n              setShowResults(!showResults);\n            }}\n            title={showResults ? t`Hide results` : t`Show results`}\n          >\n            <Icon\n              icon={showResults ? 'eye-open' : 'eye-close'}\n              alt={showResults ? t`Hide results` : t`Show results`}\n            />{' '}\n          </button>\n        )}\n        {!expired && !readOnly && (\n          <button\n            type=\"button\"\n            class=\"plain small\"\n            disabled={uiState === 'loading'}\n            onClick={(e) => {\n              e.preventDefault();\n              setUIState('loading');\n\n              (async () => {\n                await refresh();\n                setUIState('default');\n              })();\n            }}\n            title={t`Refresh`}\n          >\n            <Icon icon=\"refresh\" alt={t`Refresh`} />\n          </button>\n        )}\n      </p>\n    </div>\n  );\n}\n","import { useEffect, useLayoutEffect, useRef } from 'preact/hooks';\nimport { useSnapshot } from 'valtio';\n\nimport enhanceContent from '../utils/enhance-content';\nimport handleContentLinks from '../utils/handle-content-links';\nimport states, { statusKey } from '../utils/states';\n\nconst HTTP_REGEX = /^http/i;\n\nconst PostContent =\n  /*memo(*/\n  ({ post, instance, previewMode }) => {\n    const { content, emojis, language, mentions, url } = post;\n    const snapStates = useSnapshot(states);\n    const sKey = statusKey(post.id, instance);\n    const quotes = snapStates.statusQuotes[sKey];\n\n    const divRef = useRef();\n    useLayoutEffect(() => {\n      if (!divRef.current) return;\n      const dom = enhanceContent(content, {\n        emojis,\n        returnDOM: true,\n      });\n      // Remove target=\"_blank\" from links\n      for (const a of dom.querySelectorAll('a.u-url[target=\"_blank\"]')) {\n        if (!HTTP_REGEX.test(a.innerText.trim())) {\n          a.removeAttribute('target');\n        }\n      }\n      divRef.current.replaceChildren(dom.cloneNode(true));\n    }, [content, emojis?.length]);\n\n    useEffect(() => {\n      // Find all links that's in states.statusQuotes and add 'is-quote' class\n      if (quotes?.length) {\n        for (const a of divRef.current.querySelectorAll('a')) {\n          if (quotes.some((quote) => quote?.originalURL === a.href)) {\n            a.classList.add('is-quote');\n          }\n        }\n      }\n    }, [quotes?.length]);\n\n    return (\n      <div\n        ref={divRef}\n        lang={language}\n        dir=\"auto\"\n        class=\"inner-content\"\n        onClick={handleContentLinks({\n          mentions,\n          instance,\n          previewMode,\n          statusURL: url,\n        })}\n        // dangerouslySetInnerHTML={{\n        //   __html: enhanceContent(content, {\n        //     emojis,\n        //     postEnhanceDOM: (dom) => {\n        //       // Remove target=\"_blank\" from links\n        //       dom.querySelectorAll('a.u-url[target=\"_blank\"]').forEach((a) => {\n        //         if (!/http/i.test(a.innerText.trim())) {\n        //           a.removeAttribute('target');\n        //         }\n        //       });\n        //     },\n        //   }),\n        // }}\n      />\n    );\n  }; /*,\n  (oldProps, newProps) => {\n    const { post: oldPost } = oldProps;\n    const { post: newPost } = newProps;\n    return oldPost.content === newPost.content;\n  },\n);*/\n\nexport default PostContent;\n","/**\n * @param {string[]} splittedHtml\n * @param {{ char?: string; count?: number}} options\n * @returns {string}\n */\nconst addIndentation = (splittedHtml, options = {}) => {\n  const char = options.char || ' '\n  const count = options.count || 2\n\n  let level = 0\n  const opened = []\n\n  return splittedHtml.reverse().reduce((indented, elTag) => {\n    if (opened.length\n      && level\n      && opened[level]\n      /* if current element tag is the same as previously opened one */\n      && opened[level] === elTag.substring(1, opened[level].length + 1)\n    ) {\n      opened.splice(level, 1)\n      level--\n    }\n\n    const indentation = char.repeat(level ? level * count : 0)\n\n    const newIndented = [\n      `${indentation}${elTag}`,\n      ...indented,\n    ]\n\n    // if current element tag is closing tag\n    // add it to opened elements\n    if (elTag.substring(0, 2) === '</') {\n      level++\n      opened[level] = elTag.substring(2, elTag.length - 1)\n    }\n\n    return newIndented\n  }, []).join('\\n')\n}\n\nmodule.exports = addIndentation\n","/**\n * @param {string} nonFormattedString Any non formatted string\n * @returns {string[]} Array of strings separated on new lines\n */\nconst removeEmptyLines = (nonFormattedString) => (\n  // Replace\n  // - 1 or more spaces or tabs at the start of line\n  // - 1 or more spaces or tabs at the end of line\n  // - empty lines\n  // with empty string\n  nonFormattedString.trim().replace(/(^(\\s|\\t)+|(( |\\t)+)$)/gm, '')\n)\n\n/**\n * @param {string} markup\n * @returns {string[]} Array of strings splitted on new lines without empty lines\n */\nconst mergeAttributesWithElements = (markup) => {\n  const splittedMarkup = removeEmptyLines(markup).split('\\n')\n\n  const mergedLines = []\n  let currentElement = ''\n  for (let i = 0; i < splittedMarkup.length; i += 1) {\n    const line = splittedMarkup[i]\n\n    // If line is closing element/tag separate closing tag from rest of the line with space\n    if (line.endsWith('/>')) {\n      mergedLines.push(`${currentElement}${line.slice(0, -2)} />`)\n      currentElement = ''\n      // eslint-disable-next-line no-continue\n      continue\n    }\n\n    if (line.endsWith('>')) {\n      mergedLines.push(`${currentElement}${\n        line.startsWith('>') || line.startsWith('<') ? '' : ' '\n      }${line}`)\n      currentElement = ''\n      // eslint-disable-next-line no-continue\n      continue\n    }\n\n    currentElement += currentElement.length ? ` ${line}` : line\n  }\n\n  return mergedLines\n}\n\nmodule.exports = {\n  mergeAttributesWithElements,\n  removeEmptyLines,\n}\n","const addIndentation = require('./utils/addIndentation')\nconst { mergeAttributesWithElements } = require('./utils/toLines')\n\n/**\n * @param {string} markup\n * @param {{ char?: string; count?: number }} options\n * @returns {string}\n */\nconst prettify = (markup, options = {}) => {\n  const splitted = mergeAttributesWithElements(markup)\n\n  return addIndentation(splitted, options)\n}\n\nmodule.exports = prettify\n","import { Trans, useLingui } from '@lingui/react/macro';\nimport prettify from 'html-prettify';\n\nimport emojifyText from '../utils/emojify-text';\nimport showToast from '../utils/show-toast';\nimport states, { statusKey } from '../utils/states';\n\nimport Icon from './icon';\n\nfunction generateHTMLCode(post, instance, level = 0) {\n  const {\n    account: {\n      url: accountURL,\n      displayName,\n      acct,\n      username,\n      emojis: accountEmojis,\n      bot,\n      group,\n    },\n    id,\n    poll,\n    spoilerText,\n    language,\n    editedAt,\n    createdAt,\n    content,\n    mediaAttachments,\n    url,\n    emojis,\n  } = post;\n\n  const sKey = statusKey(id, instance);\n  const quotes = states.statusQuotes[sKey] || [];\n  const uniqueQuotes = quotes.filter(\n    (q, i, arr) => arr.findIndex((q2) => q2.url === q.url) === i,\n  );\n  const quoteStatusesHTML =\n    uniqueQuotes.length && level <= 2\n      ? uniqueQuotes\n          .map((quote) => {\n            const { id, instance } = quote;\n            const sKey = statusKey(id, instance);\n            const s = states.statuses[sKey];\n            if (s) {\n              return generateHTMLCode(s, instance, ++level);\n            }\n          })\n          .join('')\n      : '';\n\n  const createdAtDate = new Date(createdAt);\n  // const editedAtDate = editedAt && new Date(editedAt);\n\n  const contentHTML =\n    emojifyText(content, emojis) +\n    '\\n' +\n    quoteStatusesHTML +\n    '\\n' +\n    (poll?.options?.length\n      ? `\n        <p>:</p>\n        <ul>\n        ${poll.options\n          .map(\n            (option) => `\n              <li>\n                ${option.title}\n                ${option.votesCount >= 0 ? ` (${option.votesCount})` : ''}\n              </li>\n            `,\n          )\n          .join('')}\n        </ul>`\n      : '') +\n    (mediaAttachments.length > 0\n      ? '\\n' +\n        mediaAttachments\n          .map((media) => {\n            const {\n              description,\n              meta,\n              previewRemoteUrl,\n              previewUrl,\n              remoteUrl,\n              url,\n              type,\n            } = media;\n            const { original = {}, small } = meta || {};\n            const width = small?.width || original?.width;\n            const height = small?.height || original?.height;\n\n            // Prefer remote over original\n            const sourceMediaURL = remoteUrl || url;\n            const previewMediaURL = previewRemoteUrl || previewUrl;\n            const mediaURL = previewMediaURL || sourceMediaURL;\n\n            const sourceMediaURLObj = sourceMediaURL\n              ? URL.parse(sourceMediaURL)\n              : null;\n            const isVideoMaybe =\n              type === 'unknown' &&\n              sourceMediaURLObj &&\n              /\\.(mp4|m4r|m4v|mov|webm)$/i.test(sourceMediaURLObj.pathname);\n            const isAudioMaybe =\n              type === 'unknown' &&\n              sourceMediaURLObj &&\n              /\\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(sourceMediaURLObj.pathname);\n            const isImage =\n              type === 'image' ||\n              (type === 'unknown' &&\n                previewMediaURL &&\n                !isVideoMaybe &&\n                !isAudioMaybe);\n            const isVideo = type === 'gifv' || type === 'video' || isVideoMaybe;\n            const isAudio = type === 'audio' || isAudioMaybe;\n\n            let mediaHTML = '';\n            if (isImage) {\n              mediaHTML = `<img src=\"${mediaURL}\" width=\"${width}\" height=\"${height}\" alt=\"${description}\" loading=\"lazy\" />`;\n            } else if (isVideo) {\n              mediaHTML = `\n                <video src=\"${sourceMediaURL}\" width=\"${width}\" height=\"${height}\" controls preload=\"auto\" poster=\"${previewMediaURL}\" loading=\"lazy\"></video>\n                ${description ? `<figcaption>${description}</figcaption>` : ''}\n              `;\n            } else if (isAudio) {\n              mediaHTML = `\n                <audio src=\"${sourceMediaURL}\" controls preload=\"auto\"></audio>\n                ${description ? `<figcaption>${description}</figcaption>` : ''}\n              `;\n            } else {\n              mediaHTML = `\n                <a href=\"${sourceMediaURL}\"> ${\n                  description || sourceMediaURL\n                }</a>\n              `;\n            }\n\n            return `<figure>${mediaHTML}</figure>`;\n          })\n          .join('\\n')\n      : '');\n\n  const htmlCode = `\n    <blockquote lang=\"${language}\" cite=\"${url}\" data-source=\"fediverse\">\n      ${\n        spoilerText\n          ? `\n            <details>\n              <summary>${spoilerText}</summary>\n              ${contentHTML}\n            </details>\n          `\n          : contentHTML\n      }\n      <footer>\n         ${emojifyText(\n          displayName,\n          accountEmojis,\n        )} (@${acct}) ${!!createdAt ? `<a href=\"${url}\"><time datetime=\"${createdAtDate.toISOString()}\">${createdAtDate.toLocaleString()}</time></a>` : ''}\n      </footer>\n    </blockquote>\n  `;\n\n  return prettify(htmlCode);\n}\n\nfunction PostEmbedModal({ post, instance, onClose }) {\n  const { t } = useLingui();\n  const {\n    account: {\n      url: accountURL,\n      displayName,\n      username,\n      emojis: accountEmojis,\n      bot,\n      group,\n    },\n    id,\n    poll,\n    spoilerText,\n    language,\n    editedAt,\n    createdAt,\n    content,\n    mediaAttachments,\n    url,\n    emojis,\n  } = post;\n\n  const htmlCode = generateHTMLCode(post, instance);\n  return (\n    <div id=\"embed-post\" class=\"sheet\">\n      {!!onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <h2>\n          <Trans>Embed post</Trans>\n        </h2>\n      </header>\n      <main tabIndex=\"-1\">\n        <h3>\n          <Trans>HTML Code</Trans>\n        </h3>\n        <textarea\n          class=\"embed-code\"\n          readonly\n          onClick={(e) => {\n            e.target.select();\n          }}\n          dir=\"auto\"\n        >\n          {htmlCode}\n        </textarea>\n        <button\n          type=\"button\"\n          onClick={() => {\n            try {\n              navigator.clipboard.writeText(htmlCode);\n              showToast(t`HTML code copied`);\n            } catch (e) {\n              console.error(e);\n              showToast(t`Unable to copy HTML code`);\n            }\n          }}\n        >\n          <Icon icon=\"clipboard\" />{' '}\n          <span>\n            <Trans>Copy</Trans>\n          </span>\n        </button>\n        {!!mediaAttachments?.length && (\n          <section>\n            <p>\n              <Trans>Media attachments:</Trans>\n            </p>\n            <ol class=\"links-list\">\n              {mediaAttachments.map((media) => {\n                return (\n                  <li key={media.id}>\n                    <a\n                      href={media.remoteUrl || media.url}\n                      target=\"_blank\"\n                      download\n                    >\n                      {media.remoteUrl || media.url}\n                    </a>\n                  </li>\n                );\n              })}\n            </ol>\n          </section>\n        )}\n        {!!accountEmojis?.length && (\n          <section>\n            <p>\n              <Trans>Account Emojis:</Trans>\n            </p>\n            <ul>\n              {accountEmojis.map((emoji) => {\n                return (\n                  <li key={emoji.shortcode}>\n                    <picture>\n                      <source\n                        srcset={emoji.staticUrl}\n                        media=\"(prefers-reduced-motion: reduce)\"\n                      ></source>\n                      <img\n                        class=\"shortcode-emoji emoji\"\n                        src={emoji.url}\n                        alt={`:${emoji.shortcode}:`}\n                        width=\"16\"\n                        height=\"16\"\n                        loading=\"lazy\"\n                        decoding=\"async\"\n                      />\n                    </picture>{' '}\n                    <code>:{emoji.shortcode}:</code> (\n                    <a href={emoji.url} target=\"_blank\" download>\n                      URL\n                    </a>\n                    )\n                    {emoji.staticUrl ? (\n                      <>\n                        {' '}\n                        (\n                        <a href={emoji.staticUrl} target=\"_blank\" download>\n                          <Trans>static URL</Trans>\n                        </a>\n                        )\n                      </>\n                    ) : null}\n                  </li>\n                );\n              })}\n            </ul>\n          </section>\n        )}\n        {!!emojis?.length && (\n          <section>\n            <p>\n              <Trans>Emojis:</Trans>\n            </p>\n            <ul>\n              {emojis.map((emoji) => {\n                return (\n                  <li key={emoji.shortcode}>\n                    <picture>\n                      <source\n                        srcset={emoji.staticUrl}\n                        media=\"(prefers-reduced-motion: reduce)\"\n                      ></source>\n                      <img\n                        class=\"shortcode-emoji emoji\"\n                        src={emoji.url}\n                        alt={`:${emoji.shortcode}:`}\n                        width=\"16\"\n                        height=\"16\"\n                        loading=\"lazy\"\n                        decoding=\"async\"\n                      />\n                    </picture>{' '}\n                    <code>:{emoji.shortcode}:</code> (\n                    <a href={emoji.url} target=\"_blank\" download>\n                      URL\n                    </a>\n                    )\n                    {emoji.staticUrl ? (\n                      <>\n                        {' '}\n                        (\n                        <a href={emoji.staticUrl} target=\"_blank\" download>\n                          <Trans>static URL</Trans>\n                        </a>\n                        )\n                      </>\n                    ) : null}\n                  </li>\n                );\n              })}\n            </ul>\n          </section>\n        )}\n        <section>\n          <small>\n            <p>\n              <Trans>Notes:</Trans>\n            </p>\n            <ul>\n              <li>\n                <Trans>\n                  This is static, unstyled and scriptless. You may need to apply\n                  your own styles and edit as needed.\n                </Trans>\n              </li>\n              <li>\n                <Trans>\n                  Polls are not interactive, becomes a list with vote counts.\n                </Trans>\n              </li>\n              <li>\n                <Trans>\n                  Media attachments can be images, videos, audios or any file\n                  types.\n                </Trans>\n              </li>\n              <li>\n                <Trans>Post could be edited or deleted later.</Trans>\n              </li>\n            </ul>\n          </small>\n        </section>\n        <h3>\n          <Trans>Preview</Trans>\n        </h3>\n        <output\n          class=\"embed-preview\"\n          dangerouslySetInnerHTML={{ __html: htmlCode }}\n          dir=\"auto\"\n        />\n        <p>\n          <small>\n            <Trans>Note: This preview is lightly styled.</Trans>\n          </small>\n        </p>\n      </main>\n    </div>\n  );\n}\n\nexport default PostEmbedModal;\n","import './quote-chain-modal.css';\n\nimport { Trans, useLingui } from '@lingui/react/macro';\nimport { useEffect, useRef, useState } from 'preact/hooks';\n\nimport { api } from '../utils/api';\nimport { getStatus } from '../utils/states';\nimport useTruncated from '../utils/useTruncated';\n\nimport Icon from './icon';\nimport Link from './link';\nimport Loader from './loader';\nimport Status from './status';\n\nfunction TruncatedLink(props) {\n  const { t } = useLingui();\n  const ref = useTruncated();\n  return <Link {...props} data-read-more={t`Read more `} ref={ref} />;\n}\n\nconst FETCH_DELAY = 500; // Delay between fetches to avoid rate limiting\nconst BATCH_LIMIT = 30; // The chain might get very long, so fetch in batches\n\nexport default function QuoteChainModal({\n  statusId,\n  instance,\n  onClose = () => {},\n}) {\n  const { t } = useLingui();\n  const { masto } = api();\n\n  const [posts, setPosts] = useState([]);\n  const [uiState, setUIState] = useState('default');\n  const [nextPostID, setNextPostID] = useState(null);\n\n  const abortControllerRef = useRef(null);\n\n  const fetchQuoteChain = async (postID) => {\n    abortControllerRef.current = new AbortController();\n    const signal = abortControllerRef.current.signal;\n\n    setUIState('loading');\n    let fetchCount = 0;\n    let currentPostID = postID;\n\n    while (currentPostID && !signal.aborted && fetchCount < BATCH_LIMIT) {\n      console.log(' WHILE', { currentPostID, fetchCount });\n      // Break circular reference if it somehow happens\n      // Note that origin post could be edited to add a quote that might reference to any post in the chain \n      if (posts.some((p) => p.id === currentPostID)) {\n        break;\n      }\n\n      let fullStatus = getStatus(currentPostID, instance);\n      const cached = !!fullStatus;\n\n      if (!cached) {\n        try {\n          fullStatus = await masto.v1.statuses.$select(currentPostID).fetch();\n          fetchCount++;\n        } catch (e) {\n          console.error('Error fetching quote:', e);\n          setUIState('error');\n          break;\n        }\n      }\n\n      console.log(' PUSH', fullStatus);\n      setPosts((prev) => [...prev, fullStatus]);\n\n      currentPostID =\n        fullStatus.quote?.quotedStatusId || fullStatus.quote?.quotedStatus?.id;\n\n      // Add delay before next fetch to avoid rate limiting\n      if (\n        !cached &&\n        currentPostID &&\n        !signal.aborted &&\n        fetchCount < BATCH_LIMIT\n      ) {\n        await new Promise((resolve) => setTimeout(resolve, FETCH_DELAY));\n      }\n    }\n\n    if (!signal.aborted) {\n      setNextPostID(currentPostID || null);\n      setUIState('default');\n    }\n  };\n\n  useEffect(() => {\n    fetchQuoteChain(statusId);\n    return () => {\n      abortControllerRef.current?.abort();\n    };\n  }, [statusId]);\n\n  return (\n    <div id=\"quote-chain-modal\" class=\"sheet\" tabindex=\"-1\">\n      {onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <b>\n          <Trans>Quote chain</Trans>\n        </b>{' '}\n        {posts.length > 0 && (\n          <small class=\"tag insignificant collapsed\">\n            {posts.length}\n            {(!!nextPostID || uiState === 'loading') && '+'}\n          </small>\n        )}\n      </header>\n      <main>\n        <ul class=\"quoted-posts-list\">\n          {posts.map((post) => (\n            <li key={post.id} class=\"quoted-post-item\">\n              <TruncatedLink\n                to={instance ? `/${instance}/s/${post.id}` : `/s/${post.id}`}\n                class=\"status-link\"\n                onContextMenu={(e) => {\n                  const postEl = e.target.querySelector('.status');\n                  if (postEl) {\n                    if (e.metaKey) return;\n                    e.preventDefault();\n                    postEl.dispatchEvent(\n                      new MouseEvent('contextmenu', {\n                        clientX: e.clientX,\n                        clientY: e.clientY,\n                      }),\n                    );\n                  }\n                }}\n              >\n                <Status\n                  status={post}\n                  instance={instance}\n                  size=\"s\"\n                  readOnly\n                  showCommentCount\n                  showQuoteCount={(c) => c > 1}\n                />\n              </TruncatedLink>\n            </li>\n          ))}\n        </ul>\n        {uiState === 'error' ? (\n          <p class=\"ui-state\">\n            <Trans>Failed to unwrap quote chain</Trans>\n          </p>\n        ) : uiState === 'loading' ? (\n          <p class=\"ui-state\">\n            <Loader abrupt />\n          </p>\n        ) : nextPostID ? (\n          <button\n            type=\"button\"\n            class=\"light block\"\n            onClick={() => {\n              fetchQuoteChain(nextPostID);\n            }}\n          >\n            <Icon icon=\"arrow-down\" /> <Trans>Continue unwrapping</Trans>\n          </button>\n        ) : (\n          <p class=\"ui-state insignificant\">\n            <Trans>The end.</Trans>\n          </p>\n        )}\n      </main>\n    </div>\n  );\n}\n","import './quote-settings-sheet.css';\n\nimport { Trans, useLingui } from '@lingui/react/macro';\nimport { useState } from 'preact/hooks';\n\nimport { api } from '../utils/api';\nimport showToast from '../utils/show-toast';\nimport { saveStatus } from '../utils/states';\n\nimport Icon from './icon';\nimport Status from './status';\n\nfunction QuoteSettingsSheet({ onClose, post, currentPolicy }) {\n  const { t } = useLingui();\n  const { masto } = api();\n  const [uiState, setUIState] = useState('default');\n\n  const [selectedPolicy, setSelectedPolicy] = useState(\n    currentPolicy || 'public',\n  );\n\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n    const quoteApprovalPolicy = formData.get('quoteApprovalPolicy');\n\n    setSelectedPolicy(quoteApprovalPolicy);\n    setUIState('loading');\n\n    try {\n      const newStatus = await masto.v1.statuses\n        .$select(post.id)\n        .interactionPolicy.update({\n          quote_approval_policy: quoteApprovalPolicy,\n        });\n      onClose(true);\n      showToast(t`Quote settings updated`);\n      setUIState('default');\n\n      // Update the status with new quote policy\n      saveStatus(newStatus, post.instance, {\n        skipThreading: true,\n        skipUnfurling: true,\n      });\n    } catch (e) {\n      console.error(e);\n      showToast(t`Failed to update quote settings`);\n      setUIState('error');\n    }\n  };\n\n  return (\n    <div class=\"sheet\" id=\"quote-settings-container\">\n      {!!onClose && (\n        <button\n          type=\"button\"\n          class=\"sheet-close\"\n          onClick={onClose}\n          disabled={uiState === 'loading'}\n        >\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <h2>\n          <Trans>Quote settings for this post</Trans>\n        </h2>\n      </header>\n      <main>\n        {!!post && (\n          <div class=\"post-preview\">\n            <Status status={post} size=\"s\" readOnly />\n          </div>\n        )}\n        <form onSubmit={handleFormSubmit}>\n          <select\n            value={selectedPolicy}\n            name=\"quoteApprovalPolicy\"\n            disabled={uiState === 'loading'}\n          >\n            <option value=\"public\">\n              <Trans>Anyone can quote</Trans>\n            </option>\n            <option value=\"followers\">\n              <Trans>Your followers can quote</Trans>\n            </option>\n            <option value=\"nobody\">\n              <Trans>Only you can quote</Trans>\n            </option>\n          </select>{' '}\n          <button disabled={uiState === 'loading'}>\n            <Trans>Save</Trans>\n          </button>\n        </form>\n      </main>\n    </div>\n  );\n}\n\nexport default QuoteSettingsSheet;\n","import './quotes-modal.css';\n\nimport { Trans, useLingui } from '@lingui/react/macro';\nimport { useEffect, useRef, useState } from 'preact/hooks';\n\nimport { api } from '../utils/api';\n\nimport Icon from './icon';\nimport Link from './link';\nimport Loader from './loader';\nimport Status from './status';\n\nconst LIMIT = 20;\n\nexport default function QuotesModal({\n  statusId,\n  instance,\n  onClose = () => {},\n}) {\n  const { t } = useLingui();\n  const { masto } = api();\n\n  const [posts, setPosts] = useState([]);\n  const [uiState, setUIState] = useState('default');\n  const [showMore, setShowMore] = useState(false);\n\n  const quotesIterator = useRef();\n  const firstLoad = useRef(true);\n\n  const loadQuotes = (isFirstLoad = false) => {\n    if (isFirstLoad || !quotesIterator.current) {\n      quotesIterator.current = masto.v1.statuses\n        .$select(statusId)\n        .quotes.list({\n          limit: LIMIT,\n        })\n        .values();\n    }\n\n    setUIState('loading');\n\n    (async () => {\n      try {\n        let { done, value } = await quotesIterator.current.next();\n\n        if (Array.isArray(value)) {\n          if (isFirstLoad) {\n            setPosts(value);\n          } else {\n            setPosts((prev) => [...prev, ...value]);\n          }\n          if (value.length < LIMIT) {\n            done = true;\n          }\n          setShowMore(!done);\n        } else {\n          setShowMore(false);\n        }\n        setUIState('default');\n      } catch (e) {\n        console.error('Error loading quotes:', e);\n        setUIState('error');\n      }\n    })();\n  };\n\n  useEffect(() => {\n    loadQuotes(true);\n    firstLoad.current = false;\n  }, [statusId]);\n\n  return (\n    <div id=\"quotes-modal\" class=\"sheet\" tabindex=\"-1\">\n      {onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <h2>\n          <Trans>Quotes</Trans>\n        </h2>\n      </header>\n      <main>\n        {posts.length > 0 ? (\n          <>\n            <ul class=\"quoted-posts-list\">\n              {posts.map((post) => (\n                <li key={post.id} class=\"quoted-post-item\">\n                  <Link\n                    to={\n                      instance ? `/${instance}/s/${post.id}` : `/s/${post.id}`\n                    }\n                    class=\"status-link\"\n                    onContextMenu={(e) => {\n                      const post = e.target.querySelector('.status');\n                      if (post) {\n                        // Fire a custom event to open the context menu\n                        if (e.metaKey) return;\n                        e.preventDefault();\n                        post.dispatchEvent(\n                          new MouseEvent('contextmenu', {\n                            clientX: e.clientX,\n                            clientY: e.clientY,\n                          }),\n                        );\n                      }\n                    }}\n                  >\n                    <Status\n                      status={post}\n                      instance={instance}\n                      size=\"s\"\n                      readOnly\n                      showCommentCount\n                      showQuoteCount\n                    />\n                  </Link>\n                </li>\n              ))}\n            </ul>\n            {uiState === 'default' ? (\n              showMore ? (\n                <button\n                  type=\"button\"\n                  class=\"plain block\"\n                  onClick={() => loadQuotes()}\n                >\n                  <Trans>Show more</Trans>\n                </button>\n              ) : (\n                <p class=\"ui-state insignificant\">\n                  <Trans>The end.</Trans>\n                </p>\n              )\n            ) : (\n              uiState === 'loading' && (\n                <p class=\"ui-state\">\n                  <Loader abrupt />\n                </p>\n              )\n            )}\n          </>\n        ) : uiState === 'loading' ? (\n          <p class=\"ui-state\">\n            <Loader abrupt />\n          </p>\n        ) : uiState === 'error' ? (\n          <p class=\"ui-state\">\n            <Trans>Error loading quotes</Trans>\n          </p>\n        ) : (\n          <p class=\"ui-state insignificant\">\n            <Trans>No quotes yet</Trans>\n          </p>\n        )}\n      </main>\n    </div>\n  );\n}\n","import { forwardRef } from 'preact/compat';\nimport { useEffect, useState } from 'preact/hooks';\n\nimport shortenNumber from '../utils/shorten-number';\n\nimport Icon from './icon';\n\nconst StatusButton = forwardRef((props, ref) => {\n  let {\n    checked,\n    count,\n    extraCount,\n    class: className,\n    title,\n    alt,\n    size,\n    icon,\n    iconSize = 'l',\n    onClick,\n    ...otherProps\n  } = props;\n  if (typeof title === 'string') {\n    title = [title, title];\n  }\n  if (typeof alt === 'string') {\n    alt = [alt, alt];\n  }\n\n  const [buttonTitle, setButtonTitle] = useState(title[0] || '');\n  const [iconAlt, setIconAlt] = useState(alt[0] || '');\n\n  useEffect(() => {\n    if (checked) {\n      setButtonTitle(title[1] || '');\n      setIconAlt(alt[1] || '');\n    } else {\n      setButtonTitle(title[0] || '');\n      setIconAlt(alt[0] || '');\n    }\n  }, [checked, title, alt]);\n\n  return (\n    <button\n      ref={ref}\n      type=\"button\"\n      title={buttonTitle}\n      class={`plain ${size ? 'small' : ''} ${className} ${\n        checked ? 'checked' : ''\n      }`}\n      onClick={(e) => {\n        if (!onClick) return;\n        e.preventDefault();\n        e.stopPropagation();\n        onClick(e);\n      }}\n      {...otherProps}\n    >\n      <Icon icon={icon} size={iconSize} alt={iconAlt} />\n      {(!!count || !!extraCount) && (\n        <>\n          {' '}\n          {!!count && <small title={count}>{shortenNumber(count)}</small>}\n          {!!count && !!extraCount && <small>+</small>}\n          {!!extraCount && (\n            <small title={extraCount}>{shortenNumber(extraCount)}</small>\n          )}\n        </>\n      )}\n    </button>\n  );\n});\n\nexport default StatusButton;\n","export class LiteYTEmbed extends HTMLElement {\n    constructor() {\n        super();\n        this.isIframeLoaded = false;\n        this.isPlaylistThumbnailLoaded = false;\n        this.setupDom();\n    }\n    static get observedAttributes() {\n        return ['videoid', 'playlistid', 'videoplay', 'videotitle'];\n    }\n    connectedCallback() {\n        this.addEventListener('pointerover', () => LiteYTEmbed.warmConnections(this), {\n            once: true,\n        });\n        this.addEventListener('click', () => this.addIframe());\n    }\n    get videoId() {\n        return encodeURIComponent(this.getAttribute('videoid') || '');\n    }\n    set videoId(id) {\n        this.setAttribute('videoid', id);\n    }\n    get playlistId() {\n        return encodeURIComponent(this.getAttribute('playlistid') || '');\n    }\n    set playlistId(id) {\n        this.setAttribute('playlistid', id);\n    }\n    get videoTitle() {\n        return this.getAttribute('videotitle') || 'Video';\n    }\n    set videoTitle(title) {\n        this.setAttribute('videotitle', title);\n    }\n    get videoPlay() {\n        return this.getAttribute('videoplay') || 'Play';\n    }\n    set videoPlay(name) {\n        this.setAttribute('videoplay', name);\n    }\n    get videoStartAt() {\n        return this.getAttribute('videoStartAt') || '0';\n    }\n    get autoLoad() {\n        return this.hasAttribute('autoload');\n    }\n    get autoPause() {\n        return this.hasAttribute('autopause');\n    }\n    get noCookie() {\n        return this.hasAttribute('nocookie');\n    }\n    get posterQuality() {\n        return this.getAttribute('posterquality') || 'hqdefault';\n    }\n    get posterLoading() {\n        return (this.getAttribute('posterloading') ||\n            'lazy');\n    }\n    get params() {\n        return `start=${this.videoStartAt}&${this.getAttribute('params')}`;\n    }\n    set params(opts) {\n        this.setAttribute('params', opts);\n    }\n    set posterQuality(opts) {\n        this.setAttribute('posterquality', opts);\n    }\n    get disableNoscript() {\n        return this.hasAttribute('disablenoscript');\n    }\n    setupDom() {\n        const shadowDom = this.attachShadow({ mode: 'open' });\n        let nonce = '';\n        if (window.liteYouTubeNonce) {\n            nonce = `nonce=\"${window.liteYouTubeNonce}\"`;\n        }\n        shadowDom.innerHTML = `\n      <style ${nonce}>\n        :host {\n          --aspect-ratio: var(--lite-youtube-aspect-ratio, 16 / 9);\n          --aspect-ratio-short: var(--lite-youtube-aspect-ratio-short, 9 / 16);\n          --frame-shadow-visible: var(--lite-youtube-frame-shadow-visible, yes);\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          aspect-ratio: var(--aspect-ratio);\n        }\n\n        @media (max-width: 40em) {\n          :host([short]) {\n            aspect-ratio: var(--aspect-ratio-short);\n          }\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n          top: 0;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\n        #fallbackPlaceholder, slot[name=image]::slotted(*) {\n          object-fit: cover;\n          width: 100%;\n          height: 100%;\n        }\n\n        @container style(--frame-shadow-visible: yes) {\n          #frame::before {\n            content: '';\n            display: block;\n            position: absolute;\n            top: 0;\n            background-image: linear-gradient(180deg, #111 -20%, transparent 90%);\n            height: 60px;\n            width: 100%;\n            z-index: 1;\n          }\n        }\n\n        #playButton {\n          width: 68px;\n          height: 48px;\n          background-color: transparent;\n          background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 68 48\"><path d=\"M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z\" fill=\"red\"/><path d=\"M45 24 27 14v20\" fill=\"white\"/></svg>');\n          z-index: 1;\n          border: 0;\n          border-radius: inherit;\n        }\n\n        #playButton:before {\n          content: '';\n          border-style: solid;\n          border-width: 11px 0 11px 19px;\n          border-color: transparent transparent transparent #fff;\n        }\n\n        #playButton,\n        #playButton:before {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n          cursor: inherit;\n        }\n\n        /* Post-click styles */\n        .activated {\n          cursor: unset;\n        }\n\n        #frame.activated::before,\n        #frame.activated > #playButton {\n          display: none;\n        }\n      </style>\n      <div id=\"frame\">\n        <picture>\n          <slot name=\"image\">\n            <source id=\"webpPlaceholder\" type=\"image/webp\">\n            <source id=\"jpegPlaceholder\" type=\"image/jpeg\">\n            <img id=\"fallbackPlaceholder\" referrerpolicy=\"origin\" loading=\"lazy\">\n          </slot>\n        </picture>\n        <button id=\"playButton\" part=\"playButton\"></button>\n      </div>\n    `;\n        this.domRefFrame = shadowDom.querySelector('#frame');\n        this.domRefImg = {\n            fallback: shadowDom.querySelector('#fallbackPlaceholder'),\n            webp: shadowDom.querySelector('#webpPlaceholder'),\n            jpeg: shadowDom.querySelector('#jpegPlaceholder'),\n        };\n        this.domRefPlayButton = shadowDom.querySelector('#playButton');\n    }\n    setupComponent() {\n        const hasImgSlot = this.shadowRoot.querySelector('slot[name=image]');\n        if (hasImgSlot.assignedNodes().length === 0) {\n            this.initImagePlaceholder();\n        }\n        this.domRefPlayButton.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n        this.setAttribute('title', `${this.videoPlay}: ${this.videoTitle}`);\n        if (this.autoLoad || this.isYouTubeShort() || this.autoPause) {\n            this.initIntersectionObserver();\n        }\n        if (!this.disableNoscript) {\n            this.injectSearchNoScript();\n        }\n    }\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (oldVal !== newVal) {\n            if (name === 'playlistid' && oldVal !== null && oldVal !== newVal) {\n                this.isPlaylistThumbnailLoaded = false;\n            }\n            this.setupComponent();\n            if (this.domRefFrame.classList.contains('activated')) {\n                this.domRefFrame.classList.remove('activated');\n                this.shadowRoot.querySelector('iframe').remove();\n                this.isIframeLoaded = false;\n            }\n        }\n    }\n    injectSearchNoScript() {\n        const eleNoScript = document.createElement('noscript');\n        this.prepend(eleNoScript);\n        eleNoScript.innerHTML = this.generateIframe();\n    }\n    generateIframe(isIntersectionObserver = false) {\n        let autoplay = isIntersectionObserver ? 0 : 1;\n        let autoPause = this.autoPause ? '&enablejsapi=1' : '';\n        const wantsNoCookie = this.noCookie ? '-nocookie' : '';\n        let embedTarget;\n        if (this.playlistId) {\n            embedTarget = `?listType=playlist&list=${this.playlistId}&`;\n        }\n        else {\n            embedTarget = `${this.videoId}?`;\n        }\n        if (this.isYouTubeShort()) {\n            this.params = `loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`;\n            autoplay = 1;\n        }\n        return `\n<iframe credentialless frameborder=\"0\" title=\"${this.videoTitle}\"\n  referrerpolicy=\"strict-origin-when-cross-origin\"\n  allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\n  src=\"https://www.youtube${wantsNoCookie}.com/embed/${embedTarget}autoplay=${autoplay}${autoPause}&${this.params}\"\n></iframe>`;\n    }\n    addIframe(isIntersectionObserver = false) {\n        if (!this.isIframeLoaded) {\n            const iframeHTML = this.generateIframe(isIntersectionObserver);\n            this.domRefFrame.insertAdjacentHTML('beforeend', iframeHTML);\n            this.domRefFrame.classList.add('activated');\n            this.isIframeLoaded = true;\n            this.attemptShortAutoPlay();\n            this.dispatchEvent(new CustomEvent('liteYoutubeIframeLoaded', {\n                detail: {\n                    videoId: this.videoId,\n                },\n                bubbles: true,\n                cancelable: true,\n            }));\n        }\n    }\n    initImagePlaceholder() {\n        if (this.playlistId && !this.videoId) {\n            this.loadPlaylistThumbnail();\n        }\n        else {\n            this.testPosterImage();\n        }\n        this.domRefImg.fallback.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n        this.domRefImg?.fallback?.setAttribute('alt', `${this.videoPlay}: ${this.videoTitle}`);\n    }\n    async loadPlaylistThumbnail() {\n        if (this.isPlaylistThumbnailLoaded) {\n            return;\n        }\n        this.isPlaylistThumbnailLoaded = true;\n        try {\n            const oEmbedUrl = `https://www.youtube.com/oembed?url=https://www.youtube.com/playlist?list=${this.playlistId}&format=json`;\n            const response = await fetch(oEmbedUrl);\n            if (!response.ok) {\n                throw new Error(`Failed to fetch playlist thumbnail: ${response.status}`);\n            }\n            const data = await response.json();\n            if (data.thumbnail_url) {\n                const thumbnailUrl = data.thumbnail_url;\n                const videoIdMatch = thumbnailUrl.match(/\\/vi\\/([^\\/]+)\\//);\n                if (videoIdMatch) {\n                    const extractedVideoId = videoIdMatch[1];\n                    this.loadThumbnailImages(extractedVideoId);\n                }\n                else {\n                    this.domRefImg.fallback.src = thumbnailUrl;\n                    this.domRefImg.fallback.loading = this.posterLoading;\n                }\n            }\n        }\n        catch (error) {\n            console.warn('Failed to load playlist thumbnail:', error);\n        }\n    }\n    loadThumbnailImages(videoId) {\n        const posterUrlWebp = `https://i.ytimg.com/vi_webp/${videoId}/${this.posterQuality}.webp`;\n        this.domRefImg.webp.srcset = posterUrlWebp;\n        const posterUrlJpeg = `https://i.ytimg.com/vi/${videoId}/${this.posterQuality}.jpg`;\n        this.domRefImg.jpeg.srcset = posterUrlJpeg;\n        this.domRefImg.fallback.src = posterUrlJpeg;\n        this.domRefImg.fallback.loading = this.posterLoading;\n    }\n    async testPosterImage() {\n        setTimeout(() => {\n            const webpUrl = `https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`;\n            const img = new Image();\n            img.fetchPriority = 'low';\n            img.referrerPolicy = 'origin';\n            img.src = webpUrl;\n            img.onload = async (e) => {\n                const target = e.target;\n                const noPoster = target?.naturalHeight == 90 && target?.naturalWidth == 120;\n                if (noPoster) {\n                    this.posterQuality = 'hqdefault';\n                }\n                this.loadThumbnailImages(this.videoId);\n            };\n        }, 100);\n    }\n    initIntersectionObserver() {\n        const options = {\n            root: null,\n            rootMargin: '0px',\n            threshold: 0,\n        };\n        const observer = new IntersectionObserver((entries, observer) => {\n            entries.forEach(entry => {\n                if (entry.isIntersecting && !this.isIframeLoaded) {\n                    LiteYTEmbed.warmConnections(this);\n                    this.addIframe(true);\n                    observer.unobserve(this);\n                }\n            });\n        }, options);\n        observer.observe(this);\n        if (this.autoPause) {\n            const windowPause = new IntersectionObserver((e, o) => {\n                e.forEach(entry => {\n                    if (entry.intersectionRatio !== 1) {\n                        this.shadowRoot\n                            .querySelector('iframe')\n                            ?.contentWindow?.postMessage('{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*');\n                    }\n                });\n            }, { threshold: 1 });\n            windowPause.observe(this);\n        }\n    }\n    attemptShortAutoPlay() {\n        if (this.isYouTubeShort()) {\n            setTimeout(() => {\n                this.shadowRoot\n                    .querySelector('iframe')\n                    ?.contentWindow?.postMessage('{\"event\":\"command\",\"func\":\"' + 'playVideo' + '\",\"args\":\"\"}', '*');\n            }, 2000);\n        }\n    }\n    isYouTubeShort() {\n        return (this.getAttribute('short') === '' &&\n            window.matchMedia('(max-width: 40em)').matches);\n    }\n    static addPrefetch(kind, url) {\n        const linkElem = document.createElement('link');\n        linkElem.rel = kind;\n        linkElem.href = url;\n        linkElem.crossOrigin = 'true';\n        document.head.append(linkElem);\n    }\n    static warmConnections(context) {\n        if (LiteYTEmbed.isPreconnected || window.liteYouTubeIsPreconnected)\n            return;\n        LiteYTEmbed.addPrefetch('preconnect', 'https://i.ytimg.com/');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://s.ytimg.com');\n        if (!context.noCookie) {\n            LiteYTEmbed.addPrefetch('preconnect', 'https://www.youtube.com');\n            LiteYTEmbed.addPrefetch('preconnect', 'https://www.google.com');\n            LiteYTEmbed.addPrefetch('preconnect', 'https://googleads.g.doubleclick.net');\n            LiteYTEmbed.addPrefetch('preconnect', 'https://static.doubleclick.net');\n        }\n        else {\n            LiteYTEmbed.addPrefetch('preconnect', 'https://www.youtube-nocookie.com');\n        }\n        LiteYTEmbed.isPreconnected = true;\n        window.liteYouTubeIsPreconnected = true;\n    }\n}\nLiteYTEmbed.isPreconnected = false;\ncustomElements.define('lite-youtube', LiteYTEmbed);\n//# sourceMappingURL=lite-youtube.js.map","import { Trans } from '@lingui/react/macro';\n\nimport Icon from './icon';\nimport NameText from './name-text';\n\nfunction Byline({ authors, hidden, children }) {\n  if (hidden) return children;\n  if (!authors?.[0]?.account?.id) return children;\n  const author = authors[0].account;\n\n  return (\n    <div class=\"card-byline\">\n      {children}\n      <div class=\"card-byline-author\">\n        <Icon icon=\"link\" size=\"s\" />{' '}\n        <small>\n          <Trans comment=\"More from [Author]\">\n            More from <NameText account={author} showAvatar />\n          </Trans>\n        </small>\n      </div>\n    </div>\n  );\n}\n\nexport default Byline;\n","import '@justinribeiro/lite-youtube';\n\nimport { decodeBlurHash, getBlurHashAverageColor } from 'fast-blurhash';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\nimport { useSnapshot } from 'valtio';\n\nimport getDomain from '../utils/get-domain';\nimport isMastodonLinkMaybe from '../utils/isMastodonLinkMaybe';\nimport states from '../utils/states';\nimport unfurlMastodonLink from '../utils/unfurl-link';\n\nimport Byline from './byline';\nimport Icon from './icon';\nimport RelativeTime from './relative-time';\n\n// \"Post\": Quote post + card link preview combo\n// Assume all links from these domains are \"posts\"\n// Mastodon links are \"posts\" too but they are converted to real quote posts and there's too many domains to check\n// This is just \"Progressive Enhancement\"\nfunction isCardPost(domain) {\n  return [\n    'x.com',\n    'twitter.com',\n    'threads.net',\n    'bsky.app',\n    'bsky.brid.gy',\n    'fed.brid.gy',\n  ].includes(domain);\n}\n\nfunction StatusCard({ card, selfReferential, selfAuthor, instance }) {\n  const snapStates = useSnapshot(states);\n  const {\n    blurhash,\n    title,\n    description,\n    html,\n    providerName,\n    providerUrl,\n    authorName,\n    authorUrl,\n    width,\n    height,\n    image,\n    imageDescription,\n    url,\n    type,\n    embedUrl,\n    language,\n    publishedAt,\n    authors,\n  } = card;\n\n  /* type\n  link = Link OEmbed\n  photo = Photo OEmbed\n  video = Video OEmbed\n  rich = iframe OEmbed. Not currently accepted, so won't show up in practice.\n  */\n\n  const hasText = title || providerName || authorName;\n  const isLandscape = width / height >= 1.2;\n  const size = isLandscape ? 'large' : '';\n\n  const [cardStatusURL, setCardStatusURL] = useState(null);\n  // const [cardStatusID, setCardStatusID] = useState(null);\n  useEffect(() => {\n    if (!hasText || !image || selfReferential || !isMastodonLinkMaybe(url)) {\n      return;\n    }\n\n    const abortController = new AbortController();\n    unfurlMastodonLink(instance, url, abortController.signal).then((result) => {\n      if (!result) return;\n      const { id, url } = result;\n      setCardStatusURL('#' + url);\n\n      // NOTE: This is for quote post\n      // (async () => {\n      //   const { masto } = api({ instance });\n      //   const status = await masto.v1.statuses.$select(id).fetch();\n      //   saveStatus(status, instance);\n      //   setCardStatusID(id);\n      // })();\n    });\n\n    return () => {\n      abortController.abort();\n    };\n  }, [hasText, image, selfReferential]);\n\n  // if (cardStatusID) {\n  //   return (\n  //     <Status statusID={cardStatusID} instance={instance} size=\"s\" readOnly />\n  //   );\n  // }\n\n  if (snapStates.unfurledLinks[url]) return null;\n\n  const hasIframeHTML = /<iframe/i.test(html);\n  const handleClick = useCallback(\n    (e) => {\n      if (hasIframeHTML) {\n        e.preventDefault();\n        states.showEmbedModal = {\n          html,\n          url: url || embedUrl,\n          width,\n          height,\n        };\n      }\n    },\n    [hasIframeHTML],\n  );\n\n  const [blurhashImage, setBlurhashImage] = useState(null);\n  if (hasText && (image || (type === 'photo' && blurhash))) {\n    const domain = getDomain(url);\n    const rgbAverageColor =\n      image && blurhash ? getBlurHashAverageColor(blurhash) : null;\n    if (!image) {\n      const w = 44;\n      const h = 44;\n      const blurhashPixels = decodeBlurHash(blurhash, w, h);\n      const canvas = window.OffscreenCanvas\n        ? new OffscreenCanvas(1, 1)\n        : document.createElement('canvas');\n      canvas.width = w;\n      canvas.height = h;\n      const ctx = canvas.getContext('2d');\n      ctx.imageSmoothingEnabled = false;\n      const imageData = ctx.createImageData(w, h);\n      imageData.data.set(blurhashPixels);\n      ctx.putImageData(imageData, 0, 0);\n      try {\n        if (window.OffscreenCanvas) {\n          canvas.convertToBlob().then((blob) => {\n            setBlurhashImage(URL.createObjectURL(blob));\n          });\n        } else {\n          setBlurhashImage(canvas.toDataURL());\n        }\n      } catch (e) {\n        // Silently fail\n        console.error(e);\n      }\n    }\n\n    const isPost = isCardPost(domain);\n\n    return (\n      <Byline hidden={!!selfAuthor} authors={authors}>\n        <a\n          href={cardStatusURL || url}\n          target={cardStatusURL ? null : '_blank'}\n          rel=\"nofollow noopener\"\n          class={`card link ${isPost ? 'card-post' : ''} ${\n            blurhashImage ? '' : size\n          } ${hasIframeHTML ? 'can-show-embed' : ''}`}\n          style={{\n            '--average-color':\n              rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n          }}\n          onClick={handleClick}\n        >\n          <div class=\"card-image\">\n            <img\n              src={image || blurhashImage}\n              width={width}\n              height={height}\n              loading=\"lazy\"\n              decoding=\"async\"\n              fetchPriority=\"low\"\n              alt={imageDescription || ''}\n              onError={(e) => {\n                try {\n                  e.target.style.display = 'none';\n                } catch (e) {}\n              }}\n              style={{\n                '--anim-duration':\n                  width &&\n                  height &&\n                  `${Math.min(\n                    Math.max(Math.max(width, height) / 100, 5),\n                    120,\n                  )}s`,\n              }}\n            />\n          </div>\n          <div class=\"meta-container\" lang={language}>\n            <p class=\"meta domain\">\n              <span class=\"domain\">{domain}</span>{' '}\n              {!!publishedAt && <>&middot; </>}\n              {!!publishedAt && (\n                <>\n                  <RelativeTime datetime={publishedAt} format=\"micro\" />\n                </>\n              )}\n            </p>\n            <p class=\"title\" dir=\"auto\" title={title}>\n              {title}\n            </p>\n            <p class=\"meta\" dir=\"auto\" title={description}>\n              {description ||\n                (!!publishedAt && (\n                  <RelativeTime datetime={publishedAt} format=\"micro\" />\n                ))}\n            </p>\n          </div>\n        </a>\n      </Byline>\n    );\n  } else if (type === 'photo') {\n    return (\n      <a\n        href={url}\n        target=\"_blank\"\n        rel=\"nofollow noopener\"\n        class=\"card photo\"\n        onClick={handleClick}\n      >\n        <img\n          src={embedUrl}\n          width={width}\n          height={height}\n          alt={title || description}\n          loading=\"lazy\"\n          style={{\n            height: 'auto',\n            aspectRatio: `${width}/${height}`,\n          }}\n        />\n      </a>\n    );\n  } else {\n    if (type === 'video') {\n      if (/youtube/i.test(providerName)) {\n        // Get ID from e.g. https://www.youtube.com/watch?v=[VIDEO_ID]\n        const videoID = url.match(/watch\\?v=([^&]+)/)?.[1];\n        if (videoID) {\n          return (\n            <a class=\"card video\" onClick={handleClick}>\n              <lite-youtube videoid={videoID} nocookie autoPause></lite-youtube>\n            </a>\n          );\n        }\n      }\n      // return (\n      //   <div\n      //     class=\"card video\"\n      //     style={{\n      //       aspectRatio: `${width}/${height}`,\n      //     }}\n      //     dangerouslySetInnerHTML={{ __html: html }}\n      //   />\n      // );\n    }\n    if (hasText && !image) {\n      const domain = getDomain(url);\n      const isPost = isCardPost(domain);\n      return (\n        <a\n          href={cardStatusURL || url}\n          target={cardStatusURL ? null : '_blank'}\n          rel=\"nofollow noopener\"\n          class={`card link ${isPost ? 'card-post' : ''} no-image`}\n          lang={language}\n          dir=\"auto\"\n          onClick={handleClick}\n        >\n          <div class=\"meta-container\">\n            <p class=\"meta domain\">\n              <span class=\"domain\">\n                <Icon icon=\"link\" size=\"s\" /> <span>{domain}</span>\n              </span>{' '}\n              {!!publishedAt && <>&middot; </>}\n              {!!publishedAt && (\n                <>\n                  <RelativeTime datetime={publishedAt} format=\"micro\" />\n                </>\n              )}\n            </p>\n            <p class=\"title\" title={title}>\n              {title}\n            </p>\n            <p class=\"meta\" title={description || providerName || authorName}>\n              {description || providerName || authorName}\n            </p>\n          </div>\n        </a>\n      );\n    }\n  }\n}\n\nexport default StatusCard;\n","import { Trans } from '@lingui/react/macro';\nimport { useContext } from 'preact/hooks';\nimport { useSnapshot } from 'valtio';\n\nimport FilterContext from '../utils/filter-context';\nimport { isFiltered } from '../utils/filters';\nimport states, { getStatus, statusKey } from '../utils/states';\nimport statusPeek from '../utils/status-peek';\nimport { getCurrentAccID } from '../utils/store-utils';\n\nimport Avatar from './avatar';\n\nfunction StatusCompact({ sKey }) {\n  const snapStates = useSnapshot(states);\n  const statusReply = snapStates.statusReply[sKey];\n  if (!statusReply) return null;\n\n  const { id, instance } = statusReply;\n  const status = getStatus(id, instance);\n  if (!status) return null;\n\n  const {\n    account: { id: accountId },\n    sensitive,\n    spoilerText,\n    account: { avatar, avatarStatic, bot } = {},\n    visibility,\n    content,\n    language,\n    filtered,\n  } = status;\n  if (sensitive || spoilerText) return null;\n  if (!content) return null;\n\n  const srKey = statusKey(id, instance);\n  const statusPeekText = statusPeek(status);\n\n  const currentAccount = getCurrentAccID();\n  const isSelf = currentAccount && currentAccount === accountId;\n\n  const filterContext = useContext(FilterContext);\n  let filterInfo = !isSelf && isFiltered(filtered, filterContext);\n\n  // This is fine. Images are converted to emojis so they are\n  // in a way, already \"obscured\"\n  if (filterInfo?.action === 'blur') filterInfo = null;\n\n  if (filterInfo?.action === 'hide') return null;\n\n  const filterTitleStr = filterInfo?.titlesStr || '';\n\n  return (\n    <article\n      class={`status compact-reply shazam ${\n        visibility === 'direct' ? 'visibility-direct' : ''\n      }`}\n      tabindex=\"-1\"\n      data-state-post-id={srKey}\n    >\n      <Avatar url={avatarStatic || avatar} squircle={bot} />\n      <div\n        class=\"content-compact\"\n        title={statusPeekText}\n        lang={language}\n        dir=\"auto\"\n      >\n        {filterInfo ? (\n          <b class=\"status-filtered-badge badge-meta\" title={filterTitleStr}>\n            <span>\n              <Trans>Filtered</Trans>\n            </span>\n            <span>{filterTitleStr}</span>\n          </b>\n        ) : (\n          <span>{statusPeekText}</span>\n        )}\n      </div>\n    </article>\n  );\n}\n\nexport default StatusCompact;\n","import { createContext } from 'preact';\n\nexport const ThreadCountContext = createContext(0);\n","import { Trans, useLingui } from '@lingui/react/macro';\nimport { useContext } from 'preact/hooks';\n\nimport { ThreadCountContext } from '../utils/thread-count-context';\n\nimport Icon from './icon';\n\nfunction ThreadIcon({ alt }) {\n  return <Icon icon=\"thread\" size=\"s\" alt={alt} />;\n}\n\nfunction ThreadBadge({ index, showIcon, showText }) {\n  const { t } = useLingui();\n  const total = useContext(ThreadCountContext);\n  const hasIndex = index > 0;\n  const hasTotal = total > 0;\n\n  return (\n    <div class=\"status-thread-badge\">\n      {showIcon && (\n        <>\n          <ThreadIcon alt={showText ? '' : t`Thread`} />{' '}\n        </>\n      )}\n      {showText ? (\n        hasIndex ? (\n          hasTotal ? (\n            <Trans>\n              Thread {index}/{total}\n            </Trans>\n          ) : (\n            <Trans comment=\"X is the unspecified total number of posts in a thread\">\n              Thread {index}/X\n            </Trans>\n          )\n        ) : (\n          t`Thread`\n        )\n      ) : hasIndex ? (\n        hasTotal ? (\n          t({\n            message: `${index}/${total}`,\n            comment: 'index/total posts in a thread',\n          })\n        ) : (\n          t({\n            message: `${index}/X`,\n            comment: 'X is the unspecified total number of posts in a thread',\n          })\n        )\n      ) : (\n        !showIcon && <ThreadIcon alt={t`Thread`} />\n      )}\n    </div>\n  );\n}\n\nexport default ThreadBadge;\n","import './status.css';\n\nimport { msg, plural } from '@lingui/core/macro';\nimport { Plural, Trans, useLingui } from '@lingui/react/macro';\nimport { ControlledMenu, MenuDivider, MenuItem } from '@szhsin/react-menu';\nimport { shallowEqual } from 'fast-equals';\nimport PQueue from 'p-queue';\nimport { Fragment } from 'preact';\nimport { memo } from 'preact/compat';\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from 'preact/hooks';\nimport punycode from 'punycode/';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { useLongPress } from 'use-long-press';\nimport { useSnapshot } from 'valtio';\n\nimport { api, getPreferences } from '../utils/api';\nimport { langDetector } from '../utils/browser-translator';\nimport { useEditHistory } from '../utils/edit-history-context';\nimport FilterContext from '../utils/filter-context';\nimport { isFiltered } from '../utils/filters';\nimport getTranslateTargetLanguage from '../utils/get-translate-target-language';\nimport getHTMLText from '../utils/getHTMLText';\nimport htmlContentLength from '../utils/html-content-length';\nimport localeMatch from '../utils/locale-match';\nimport mem from '../utils/mem';\nimport niceDateTime from '../utils/nice-date-time';\nimport openCompose from '../utils/open-compose';\nimport pmem from '../utils/pmem';\nimport {\n  getPostQuoteApprovalPolicy,\n  supportsNativeQuote,\n} from '../utils/quote-utils';\nimport RTF from '../utils/relative-time-format';\nimport safeBoundingBoxPadding from '../utils/safe-bounding-box-padding';\nimport shortenNumber from '../utils/shorten-number';\nimport showCompose from '../utils/show-compose';\nimport showToast from '../utils/show-toast';\nimport { speak, supportsTTS } from '../utils/speech';\nimport states, { getStatus, saveStatus, statusKey } from '../utils/states';\nimport statusPeek from '../utils/status-peek';\nimport { getAPIVersions, getCurrentAccID } from '../utils/store-utils';\nimport supports from '../utils/supports';\nimport useTruncated from '../utils/useTruncated';\nimport visibilityIconsMap from '../utils/visibility-icons-map';\nimport visibilityText from '../utils/visibility-text';\n\nimport Avatar from './avatar';\nimport CustomEmoji from './custom-emoji';\nimport EmojiText from './emoji-text';\nimport Icon from './icon';\nimport LazyShazam from './lazy-shazam';\nimport Link from './link';\nimport Loader from './loader';\nimport MathBlock from './math-block';\nimport Media, { isMediaCaptionLong } from './media';\nimport MediaFirstContainer from './media-first-container';\nimport MenuConfirm from './menu-confirm';\nimport MenuLink from './menu-link';\nimport Menu2 from './menu2';\nimport Modal from './modal';\nimport MultipleMediaFigure from './multiple-media-figure';\nimport NameText from './name-text';\nimport Poll from './poll';\nimport PostContent from './post-content';\nimport PostEmbedModal from './post-embed-modal';\nimport QuoteChainModal from './quote-chain-modal';\nimport QuoteSettingsSheet from './quote-settings-sheet';\nimport QuotesModal from './quotes-modal';\nimport RelativeTime from './relative-time';\nimport StatusButton from './status-button';\nimport StatusCard from './status-card';\nimport StatusCompact from './status-compact';\nimport SubMenu2 from './submenu2';\nimport ThreadBadge from './thread-badge';\nimport TranslationBlock from './translation-block';\n\nconst SHOW_COMMENT_COUNT_LIMIT = 280;\nconst INLINE_TRANSLATE_LIMIT = 140;\n\nconst accountQueue = new PQueue({\n  concurrency: 1,\n  interval: 1000,\n  intervalCap: 1,\n});\nfunction fetchAccount(id, masto, signal) {\n  return accountQueue.add(() => masto.v1.accounts.$select(id).fetch(), {\n    signal,\n  });\n}\nconst memFetchAccount = pmem(fetchAccount);\n\nconst isIOS =\n  window.ontouchstart !== undefined &&\n  /iPad|iPhone|iPod/.test(navigator.userAgent);\n\nconst REACTIONS_LIMIT = 80;\n\nfunction getPollText(poll) {\n  if (!poll?.options?.length) return '';\n  return `:\\n${poll.options.map((option) => `- ${option.title}`).join('\\n')}`;\n}\n\nfunction getPostText(status, opts) {\n  const {\n    maskCustomEmojis,\n    maskURLs,\n    hideInlineQuote,\n    htmlTextOpts = {},\n  } = opts || {};\n  const { spoilerText, poll, emojis } = status;\n  let { content } = status;\n  if (maskCustomEmojis && emojis?.length) {\n    const emojisRegex = new RegExp(\n      `:(${emojis.map((e) => e.shortcode).join('|')}):`,\n      'g',\n    );\n    content = content.replace(emojisRegex, '');\n  }\n  const fullText = [\n    spoilerText || '',\n    getHTMLText(content, {\n      ...htmlTextOpts,\n      preProcess:\n        (maskURLs || hideInlineQuote) &&\n        ((dom) => {\n          // Remove links that contains text that starts with https?://\n          if (maskURLs) {\n            for (const a of dom.querySelectorAll('a')) {\n              const text = a.innerText.trim();\n              if (/^https?:\\/\\//i.test(text)) {\n                a.replaceWith('');\n              }\n            }\n          }\n          // Hide inline quote\n          if (hideInlineQuote) {\n            const reContainer = dom.querySelector('.quote-inline');\n            if (reContainer) {\n              reContainer.remove();\n            }\n          }\n        }),\n    }),\n    getPollText(poll),\n  ]\n    .join('\\n\\n')\n    .trim();\n  return fullText;\n}\n\nfunction forgivingQSA(selectors = [], dom = document) {\n  // Run QSA for list of selectors\n  // If a selector return invalid selector error, try the next one\n  for (const selector of selectors) {\n    try {\n      return dom.querySelectorAll(selector);\n    } catch (e) {}\n  }\n  return [];\n}\n\nconst getHTMLTextForDetectLang = mem((content, emojis) => {\n  if (!content) return '';\n  if (emojis?.length) {\n    const emojisRegex = new RegExp(\n      `:(${emojis.map((e) => e.shortcode).join('|')}):`,\n      'g',\n    );\n    content = content.replace(emojisRegex, '');\n  }\n  content = content.trim();\n  if (!content) return '';\n  return getHTMLText(content, {\n    preProcess: (dom) => {\n      // Remove anything that can skew the language detection\n\n      // Remove .mention, .hashtag, pre, code, a:has(.invisible)\n      for (const a of forgivingQSA(\n        [\n          '.mention, .hashtag, pre, code, a:has(.invisible)',\n          '.mention, .hashtag, pre, code',\n        ],\n        dom,\n      )) {\n        a.remove();\n      }\n\n      // Remove links that contains text that starts with https?://\n      for (const a of dom.querySelectorAll('a')) {\n        const text = a.innerText.trim();\n        if (text.startsWith('https://') || text.startsWith('http://')) {\n          a.remove();\n        }\n      }\n    },\n  });\n});\n\nfunction isTranslateble(content, emojis) {\n  return !!getHTMLTextForDetectLang(content, emojis);\n}\n\nconst SIZE_CLASS = {\n  s: 'small',\n  m: 'medium',\n  l: 'large',\n};\n\nconst detectLang = pmem(async (text) => {\n  text = text?.trim();\n\n  // Ref: https://github.com/komodojp/tinyld/blob/develop/docs/benchmark.md\n  // 500 should be enough for now, also the default max chars for Mastodon\n  if (text?.length > 500) {\n    return null;\n  }\n\n  if (langDetector) {\n    const langs = await langDetector.detect(text);\n    console.groupCollapsed(\n      ' DETECTLANG BROWSER',\n      langs.slice(0, 3).map((l) => l.detectedLanguage),\n    );\n    console.log(text, langs.slice(0, 3));\n    console.groupEnd();\n    const lang = langs[0];\n    if (lang?.detectedLanguage && lang?.confidence > 0.5) {\n      return lang.detectedLanguage;\n    }\n  }\n\n  const { detectAll } = await import('tinyld/light');\n  const langs = detectAll(text);\n  console.groupCollapsed(\n    ' DETECTLANG TINYLD',\n    langs.slice(0, 3).map((l) => l.lang),\n  );\n  console.log(text, langs.slice(0, 3));\n  console.groupEnd();\n  const lang = langs[0];\n  if (lang?.lang && lang?.accuracy > 0.5) {\n    // If > 50% accurate, use it\n    // It can be accurate if < 50% but better be safe\n    // Though > 50% also can be inaccurate \n    return lang.lang;\n  }\n  return null;\n});\n\nconst readMoreText = msg`Read more `;\n\n// All this work just to make sure this only lazy-run once\n// Because first run is slow due to intl-localematcher\nconst DIFFERENT_LANG_CHECK = {};\nconst diffLangCheckCacheKey = (l, hls) => `${l}:${hls.join('|')}`;\nconst checkDifferentLanguage = (\n  language,\n  contentTranslationHideLanguages = [],\n) => {\n  if (!language) return false;\n  const cacheKey = diffLangCheckCacheKey(\n    language,\n    contentTranslationHideLanguages,\n  );\n  const targetLanguage = getTranslateTargetLanguage(true);\n  const different =\n    language !== targetLanguage &&\n    !localeMatch([language], [targetLanguage]) &&\n    !contentTranslationHideLanguages.find(\n      (l) => language === l || localeMatch([language], [l]),\n    );\n  if (different) {\n    DIFFERENT_LANG_CHECK[cacheKey] = true;\n  }\n  return different;\n};\n\nconst quoteMessages = {\n  quotePrivate: msg`Private posts cannot be quoted`,\n  requestQuote: msg`Request to quote`,\n  quoteManualReview: msg`Author will manually review`,\n  quoteFollowersOnly: msg`Only followers can quote this post`,\n  quoteCannot: msg`You are not allowed to quote this post`,\n};\n\nconst quoteApprovalPolicyMessages = {\n  public: msg`Anyone can quote`,\n  followers: msg`Your followers can quote`,\n  nobody: msg`Only you can quote`,\n};\n\nconst QUESTION_REGEX = /[??]/;\n\nconst { DEV } = import.meta.env;\n\nfunction Status({\n  statusID,\n  status,\n  instance: propInstance,\n  size = 'm',\n  contentTextWeight,\n  readOnly,\n  enableCommentHint,\n  withinContext,\n  skeleton,\n  enableTranslate,\n  forceTranslate: _forceTranslate,\n  previewMode,\n  allowFilters,\n  onMediaClick,\n  quoted,\n  quoteDomain,\n  onStatusLinkClick = () => {},\n  showFollowedTags,\n  allowContextMenu,\n  showActionsBar,\n  showReplyParent,\n  mediaFirst,\n  showCommentCount: forceShowCommentCount,\n  showQuoteCount: forceShowQuoteCount,\n  ghost,\n}) {\n  const { _, t, i18n } = useLingui();\n  const rtf = RTF(i18n.locale);\n\n  if (ghost) {\n    const { inReplyToAccountId } = ghost;\n    const ghostAccount = inReplyToAccountId\n      ? states.accounts[inReplyToAccountId]\n      : null;\n    return (\n      <article\n        class={`status ghost ${mediaFirst ? 'status-media-first small' : ''}`}\n      >\n        {!mediaFirst && (\n          <Avatar\n            size=\"xxl\"\n            url={ghostAccount?.avatarStatic || ghostAccount?.avatar}\n            squircle={ghostAccount?.bot}\n          />\n        )}\n        <div class=\"container\">\n          <div class=\"meta\">\n            {(size === 's' || mediaFirst) && (\n              <Avatar\n                size=\"m\"\n                url={ghostAccount?.avatarStatic || ghostAccount?.avatar}\n                squircle={ghostAccount?.bot}\n              />\n            )}\n            {ghostAccount && (\n              <NameText account={ghostAccount} showAvatar={false} />\n            )}\n          </div>\n          <div class=\"content-container\">\n            {mediaFirst && <div class=\"media-first-container\" />}\n            <div class={`content ${mediaFirst ? 'media-first-content' : ''}`}>\n              <p class=\"insignificant\">\n                <Trans>Post unavailable</Trans>\n              </p>\n            </div>\n          </div>\n        </div>\n      </article>\n    );\n  }\n\n  if (skeleton) {\n    return (\n      <div\n        class={`status skeleton ${\n          mediaFirst ? 'status-media-first small' : ''\n        }`}\n      >\n        {!mediaFirst && <Avatar size=\"xxl\" />}\n        <div class=\"container\">\n          <div class=\"meta\">\n            {(size === 's' || mediaFirst) && <Avatar size=\"m\" />}  \n          </div>\n          <div class=\"content-container\">\n            {mediaFirst && <div class=\"media-first-container\" />}\n            <div class={`content ${mediaFirst ? 'media-first-content' : ''}`}>\n              <p> </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  const { masto, instance, authenticated } = api({ instance: propInstance });\n  const { instance: currentInstance } = api();\n  const sameInstance = instance === currentInstance;\n\n  let sKey = statusKey(statusID || status?.id, instance);\n  const snapStates = useSnapshot(states);\n  if (!status) {\n    status = snapStates.statuses[sKey] || snapStates.statuses[statusID];\n    sKey = statusKey(status?.id, instance);\n  }\n  if (!status) {\n    return null;\n  }\n\n  // const originalStatus = useRef(status);\n  const { editHistoryRef, editHistoryMode, editedAtIndex } = useEditHistory();\n  if (editHistoryMode && status?.editedAt && editHistoryRef.current.length) {\n    const eStatus = editHistoryRef.current[editedAtIndex];\n    if (eStatus) {\n      status = {\n        ...status,\n        ...eStatus,\n      };\n    }\n  } else {\n    // Revert back to original status\n    // Don't need to do anything, re-render will use the original status above\n  }\n\n  const {\n    account: {\n      acct,\n      avatar,\n      avatarStatic,\n      id: accountId,\n      url: accountURL,\n      displayName,\n      username,\n      emojis: accountEmojis,\n      bot,\n      group,\n    } = {},\n    id,\n    repliesCount,\n    reblogged,\n    reblogsCount,\n    favourited,\n    favouritesCount,\n    quotesCount,\n    bookmarked,\n    poll,\n    muted,\n    sensitive,\n    spoilerText,\n    visibility, // public, unlisted, private, direct\n    language: _language,\n    editedAt,\n    filtered,\n    card,\n    createdAt,\n    inReplyToId,\n    inReplyToAccountId,\n    content,\n    mentions,\n    mediaAttachments = [],\n    reblog,\n    quote,\n    uri,\n    url,\n    emojis,\n    tags,\n    pinned,\n    quoteApproval,\n    // Non-API props\n    _deleted,\n    _pinned,\n    // _filtered,\n    // Non-Mastodon\n    emojiReactions,\n  } = status;\n\n  const [languageAutoDetected, setLanguageAutoDetected] = useState(null);\n  useEffect(() => {\n    if (!content) return;\n    if (_language) return;\n    if (languageAutoDetected) return;\n    let timer;\n    timer = setTimeout(async () => {\n      let detected = await detectLang(\n        getHTMLTextForDetectLang(content, emojis),\n      );\n      setLanguageAutoDetected(detected);\n    }, 1000);\n    return () => clearTimeout(timer);\n  }, [content, _language]);\n  const language = _language || languageAutoDetected;\n\n  // if (!mediaAttachments?.length) mediaFirst = false;\n  const hasMediaAttachments = !!mediaAttachments?.length;\n  if (mediaFirst && hasMediaAttachments) size = 's';\n\n  const currentAccount = getCurrentAccID();\n  const isSelf = currentAccount && currentAccount === accountId;\n\n  const filterContext = useContext(FilterContext);\n  const filterInfo =\n    !isSelf &&\n    ((!readOnly && !previewMode) || allowFilters) &&\n    isFiltered(filtered, filterContext);\n\n  if (filterInfo?.action === 'hide') {\n    return null;\n  }\n\n  console.debug('RENDER Status', id, status?.account?.displayName, quoted);\n\n  const debugHover = (e) => {\n    if (e.shiftKey) {\n      console.log({\n        ...status,\n      });\n    }\n  };\n\n  if (\n    (allowFilters || size !== 'l') &&\n    filterInfo &&\n    filterInfo.action !== 'blur'\n  ) {\n    return (\n      <FilteredStatus\n        status={status}\n        filterInfo={filterInfo}\n        instance={instance}\n        containerProps={{\n          onMouseEnter: debugHover,\n        }}\n        showFollowedTags\n        quoted={quoted}\n      />\n    );\n  }\n\n  const createdAtDate = new Date(createdAt);\n  const editedAtDate = new Date(editedAt);\n\n  let inReplyToAccountRef = mentions?.find(\n    (mention) => mention.id === inReplyToAccountId,\n  );\n  if (!inReplyToAccountRef && inReplyToAccountId === id) {\n    inReplyToAccountRef = { url: accountURL, username, displayName };\n  }\n  const [inReplyToAccount, setInReplyToAccount] = useState(inReplyToAccountRef);\n  useEffect(() => {\n    if (!withinContext && !inReplyToAccount && inReplyToAccountId) {\n      const account = states.accounts[inReplyToAccountId];\n      if (account) {\n        setInReplyToAccount(account);\n        return;\n      }\n\n      const abortController = new AbortController();\n      memFetchAccount(inReplyToAccountId, masto, abortController.signal)\n        .then((account) => {\n          setInReplyToAccount(account);\n          states.accounts[account.id] = account;\n        })\n        .catch((e) => {});\n\n      return () => {\n        abortController.abort();\n      };\n    }\n  }, [withinContext, inReplyToAccount, inReplyToAccountId]);\n  const mentionSelf =\n    (inReplyToAccountId && inReplyToAccountId === currentAccount) ||\n    mentions?.find((mention) => mention.id === currentAccount);\n\n  const prefs = getPreferences();\n  const readingExpandSpoilers = !!prefs['reading:expand:spoilers'];\n\n  // default | show_all | hide_all\n  const readingExpandMedia =\n    prefs['reading:expand:media']?.toLowerCase() || 'default';\n\n  // FOR TESTING:\n  // const readingExpandSpoilers = true;\n  // const readingExpandMedia = 'show_all';\n  const showSpoiler =\n    previewMode || readingExpandSpoilers || !!snapStates.spoilers[id];\n  const showSpoilerMedia =\n    previewMode ||\n    (readingExpandMedia === 'show_all' && filterInfo?.action !== 'blur') ||\n    !!snapStates.spoilersMedia[id];\n\n  if (reblog) {\n    // If has statusID, means useItemID (cached in states)\n\n    if (group) {\n      return (\n        <div\n          data-state-post-id={sKey}\n          class=\"status-group\"\n          onMouseEnter={debugHover}\n        >\n          <div class=\"status-pre-meta\">\n            <Icon icon=\"group\" size=\"l\" alt={t`Group`} />{' '}\n            <NameText account={status.account} instance={instance} showAvatar />\n          </div>\n          <Status\n            status={statusID ? null : reblog}\n            statusID={statusID ? reblog.id : null}\n            instance={instance}\n            size={size}\n            contentTextWeight={contentTextWeight}\n            readOnly={readOnly}\n            mediaFirst={mediaFirst}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div\n        data-state-post-id={sKey}\n        class=\"status-reblog\"\n        onMouseEnter={debugHover}\n      >\n        <div class=\"status-pre-meta\">\n          <Icon icon=\"rocket\" size=\"l\" />{' '}\n          <Trans>\n            <NameText account={status.account} instance={instance} showAvatar />{' '}\n            <span>boosted</span>\n          </Trans>\n        </div>\n        <Status\n          status={statusID ? null : reblog}\n          statusID={statusID ? reblog.id : null}\n          instance={instance}\n          size={size}\n          contentTextWeight={contentTextWeight}\n          readOnly={readOnly}\n          enableCommentHint\n          mediaFirst={mediaFirst}\n        />\n      </div>\n    );\n  }\n\n  // Check followedTags\n  const FollowedTagsParent = useCallback(\n    ({ children }) => (\n      <div\n        data-state-post-id={sKey}\n        class=\"status-followed-tags\"\n        onMouseEnter={debugHover}\n      >\n        <div class=\"status-pre-meta\">\n          <Icon icon=\"hashtag\" size=\"l\" />{' '}\n          {snapStates.statusFollowedTags[sKey].slice(0, 3).map((tag) => (\n            <Link\n              key={tag}\n              to={instance ? `/${instance}/t/${tag}` : `/t/${tag}`}\n              class=\"status-followed-tag-item\"\n            >\n              {tag}\n            </Link>\n          ))}\n        </div>\n        {children}\n      </div>\n    ),\n    [sKey, instance, snapStates.statusFollowedTags[sKey]],\n  );\n  const StatusParent =\n    showFollowedTags && !!snapStates.statusFollowedTags[sKey]?.length\n      ? FollowedTagsParent\n      : Fragment;\n\n  const isSizeLarge = size === 'l';\n\n  const contentLength = useMemo(() => htmlContentLength(content), [content]);\n\n  const [forceTranslate, setForceTranslate] = useState(_forceTranslate);\n  // const targetLanguage = getTranslateTargetLanguage(true);\n  // const contentTranslationHideLanguages =\n  //   snapStates.settings.contentTranslationHideLanguages || [];\n  const { contentTranslation, contentTranslationAutoInline } =\n    snapStates.settings;\n  if (!contentTranslation) enableTranslate = false;\n  const inlineTranslate = useMemo(() => {\n    if (\n      !contentTranslation ||\n      !contentTranslationAutoInline ||\n      readOnly ||\n      (withinContext && !isSizeLarge) ||\n      previewMode ||\n      spoilerText ||\n      sensitive ||\n      poll ||\n      card /*||\n      mediaAttachments?.length*/\n    ) {\n      return false;\n    }\n    return contentLength > 0 && contentLength <= INLINE_TRANSLATE_LIMIT;\n  }, [\n    contentTranslation,\n    contentTranslationAutoInline,\n    readOnly,\n    withinContext,\n    isSizeLarge,\n    previewMode,\n    spoilerText,\n    sensitive,\n    poll,\n    card,\n    mediaAttachments,\n    contentLength,\n  ]);\n\n  const [showEdited, setShowEdited] = useState(false);\n  const [showEmbed, setShowEmbed] = useState(false);\n  const [showQuoteSettings, setShowQuoteSettings] = useState(false);\n  const [showQuotes, setShowQuotes] = useState(false);\n  const [showQuoteChain, setShowQuoteChain] = useState(false);\n\n  const spoilerContentRef = useTruncated();\n  const contentRef = useTruncated();\n  const mediaContainerRef = useTruncated();\n\n  const statusRef = useRef(null);\n  const [reloadPostContentCount, reloadPostContent] = useReducer(\n    (c) => c + 1,\n    0,\n  );\n\n  const unauthInteractionErrorMessage = t`Sorry, your current logged-in instance can't interact with this post from another instance.`;\n\n  const textWeight = useCallback(\n    () =>\n      Math.max(\n        Math.round(((spoilerText?.length || 0) + contentLength) / 140) || 1,\n        1,\n      ),\n    [spoilerText, contentLength],\n  );\n\n  const createdDateText = createdAt && niceDateTime(createdAtDate);\n  const editedDateText = editedAt && niceDateTime(editedAtDate);\n\n  // Can boost if:\n  // - authenticated AND\n  // - visibility != direct OR\n  // - visibility = private AND isSelf\n  const isPublic = ['public', 'unlisted'].includes(visibility);\n  let canBoost = authenticated && isPublic;\n  if (visibility === 'private' && isSelf) {\n    canBoost = true;\n  }\n\n  // Quote logic blatantly copied from https://github.com/mastodon/mastodon/blob/854aaec6fe69df02e6d850cb90eef37032b4d72f/app/javascript/mastodon/components/status/boost_button_utils.ts#L131-L163\n  let quoteDisabled = false;\n  let quoteText = t`Quote`;\n  let quoteMetaText;\n\n  if (supportsNativeQuote()) {\n    const isMine = isSelf;\n    const isMineAndPrivate = isMine && visibility === 'private';\n    const isQuoteAutomaticallyAccepted =\n      quoteApproval?.currentUser === 'automatic' &&\n      (isPublic || isMineAndPrivate);\n    const isQuoteManuallyAccepted =\n      quoteApproval?.currentUser === 'manual' && (isPublic || isMineAndPrivate);\n    const isQuoteFollowersOnly =\n      quoteApproval?.automatic?.[0] === 'followers' ||\n      quoteApproval?.manual?.[0] === 'followers';\n    if (!isPublic && !isMine) {\n      quoteDisabled = true;\n      quoteMetaText = _(quoteMessages.quotePrivate);\n    } else if (isQuoteAutomaticallyAccepted) {\n      // No need to do anything\n    } else if (isQuoteManuallyAccepted) {\n      quoteText = _(quoteMessages.requestQuote);\n      quoteMetaText = _(quoteMessages.quoteManualReview);\n    } else {\n      quoteDisabled = true;\n      quoteMetaText = isQuoteFollowersOnly\n        ? _(quoteMessages.quoteFollowersOnly)\n        : _(quoteMessages.quoteCannot);\n    }\n  }\n  const canQuote = supportsNativeQuote() && !quoteDisabled;\n\n  const postQuoteApprovalPolicy = getPostQuoteApprovalPolicy(quoteApproval);\n\n  const replyStatus = (e, replyMode = 'all') => {\n    if (!sameInstance || !authenticated) {\n      return alert(unauthInteractionErrorMessage);\n    }\n    // syntheticEvent comes from MenuItem\n    if (e?.shiftKey || e?.syntheticEvent?.shiftKey) {\n      const newWin = openCompose({\n        replyToStatus: status,\n        replyMode,\n      });\n      if (newWin) return;\n    }\n    showCompose({\n      replyToStatus: status,\n      replyMode,\n    });\n  };\n\n  // Check if media has no descriptions\n  const mediaNoDesc = useMemo(() => {\n    return mediaAttachments.some(\n      (attachment) => !attachment.description?.trim?.(),\n    );\n  }, [mediaAttachments]);\n\n  const statusMonthsAgo = useMemo(() => {\n    return Math.floor(\n      (new Date() - createdAtDate) / (1000 * 60 * 60 * 24 * 30),\n    );\n  }, [createdAtDate]);\n\n  // const boostStatus = async () => {\n  //   if (!sameInstance || !authenticated) {\n  //     alert(unauthInteractionErrorMessage);\n  //     return false;\n  //   }\n  //   try {\n  //     if (!reblogged) {\n  //       let confirmText = 'Boost this post?';\n  //       if (mediaNoDesc) {\n  //         confirmText += '\\n\\n Some media have no descriptions.';\n  //       }\n  //       const yes = confirm(confirmText);\n  //       if (!yes) {\n  //         return false;\n  //       }\n  //     }\n  //     // Optimistic\n  //     states.statuses[sKey] = {\n  //       ...status,\n  //       reblogged: !reblogged,\n  //       reblogsCount: reblogsCount + (reblogged ? -1 : 1),\n  //     };\n  //     if (reblogged) {\n  //       const newStatus = await masto.v1.statuses.$select(id).unreblog();\n  //       saveStatus(newStatus, instance);\n  //       return true;\n  //     } else {\n  //       const newStatus = await masto.v1.statuses.$select(id).reblog();\n  //       saveStatus(newStatus, instance);\n  //       return true;\n  //     }\n  //   } catch (e) {\n  //     console.error(e);\n  //     // Revert optimistism\n  //     states.statuses[sKey] = status;\n  //     return false;\n  //   }\n  // };\n  const confirmBoostStatus = async () => {\n    if (!sameInstance || !authenticated) {\n      alert(unauthInteractionErrorMessage);\n      return false;\n    }\n    try {\n      // Optimistic\n      states.statuses[sKey] = {\n        ...status,\n        reblogged: !reblogged,\n        reblogsCount: reblogsCount + (reblogged ? -1 : 1),\n      };\n      if (reblogged) {\n        const newStatus = await masto.v1.statuses.$select(id).unreblog();\n        saveStatus(newStatus, instance);\n      } else {\n        const newStatus = await masto.v1.statuses.$select(id).reblog();\n        saveStatus(newStatus, instance);\n      }\n      return true;\n    } catch (e) {\n      console.error(e);\n      // Revert optimistism\n      states.statuses[sKey] = status;\n      return false;\n    }\n  };\n\n  const favouriteStatus = async () => {\n    if (!sameInstance || !authenticated) {\n      alert(unauthInteractionErrorMessage);\n      return false;\n    }\n    try {\n      // Optimistic\n      states.statuses[sKey] = {\n        ...status,\n        favourited: !favourited,\n        favouritesCount: favouritesCount + (favourited ? -1 : 1),\n      };\n      if (favourited) {\n        const newStatus = await masto.v1.statuses.$select(id).unfavourite();\n        saveStatus(newStatus, instance);\n      } else {\n        const newStatus = await masto.v1.statuses.$select(id).favourite();\n        saveStatus(newStatus, instance);\n      }\n      return true;\n    } catch (e) {\n      console.error(e);\n      // Revert optimistism\n      states.statuses[sKey] = status;\n      return false;\n    }\n  };\n  const favouriteStatusNotify = async () => {\n    try {\n      const done = await favouriteStatus();\n      if (!isSizeLarge && done) {\n        showToast(\n          favourited\n            ? t`Unliked @${username || acct}'s post`\n            : t`Liked @${username || acct}'s post`,\n        );\n      }\n    } catch (e) {}\n  };\n\n  const bookmarkStatus = async () => {\n    if (!supports('@mastodon/post-bookmark')) return;\n    if (!sameInstance || !authenticated) {\n      alert(unauthInteractionErrorMessage);\n      return false;\n    }\n    try {\n      // Optimistic\n      states.statuses[sKey] = {\n        ...status,\n        bookmarked: !bookmarked,\n      };\n      if (bookmarked) {\n        const newStatus = await masto.v1.statuses.$select(id).unbookmark();\n        saveStatus(newStatus, instance);\n      } else {\n        const newStatus = await masto.v1.statuses.$select(id).bookmark();\n        saveStatus(newStatus, instance);\n      }\n      return true;\n    } catch (e) {\n      console.error(e);\n      // Revert optimistism\n      states.statuses[sKey] = status;\n      return false;\n    }\n  };\n  const bookmarkStatusNotify = async () => {\n    try {\n      const done = await bookmarkStatus();\n      if (!isSizeLarge && done) {\n        showToast(\n          bookmarked\n            ? t`Unbookmarked @${username || acct}'s post`\n            : t`Bookmarked @${username || acct}'s post`,\n        );\n      }\n    } catch (e) {}\n  };\n\n  // const differentLanguage =\n  //   !!language &&\n  //   language !== targetLanguage &&\n  //   !localeMatch([language], [targetLanguage]) &&\n  //   !contentTranslationHideLanguages.find(\n  //     (l) => language === l || localeMatch([language], [l]),\n  //   );\n  const contentTranslationHideLanguages =\n    snapStates.settings.contentTranslationHideLanguages || [];\n  const [differentLanguage, setDifferentLanguage] = useState(\n    DIFFERENT_LANG_CHECK[\n      diffLangCheckCacheKey(language, contentTranslationHideLanguages)\n    ],\n  );\n  useEffect(() => {\n    if (!language || differentLanguage) {\n      return;\n    }\n    if (\n      !differentLanguage &&\n      DIFFERENT_LANG_CHECK[\n        diffLangCheckCacheKey(language, contentTranslationHideLanguages)\n      ]\n    ) {\n      setDifferentLanguage(true);\n      return;\n    }\n    let timeout = setTimeout(() => {\n      const different = checkDifferentLanguage(\n        language,\n        contentTranslationHideLanguages,\n      );\n      if (different) setDifferentLanguage(different);\n    }, 100);\n    return () => clearTimeout(timeout);\n  }, [language, differentLanguage]);\n\n  const reblogIterator = useRef();\n  const favouriteIterator = useRef();\n  async function fetchBoostedLikedByAccounts(firstLoad) {\n    if (firstLoad) {\n      reblogIterator.current = masto.v1.statuses\n        .$select(statusID)\n        .rebloggedBy.list({\n          limit: REACTIONS_LIMIT,\n        })\n        .values();\n      favouriteIterator.current = masto.v1.statuses\n        .$select(statusID)\n        .favouritedBy.list({\n          limit: REACTIONS_LIMIT,\n        })\n        .values();\n    }\n    const [{ value: reblogResults }, { value: favouriteResults }] =\n      await Promise.allSettled([\n        reblogIterator.current.next(),\n        favouriteIterator.current.next(),\n      ]);\n    if (reblogResults.value?.length || favouriteResults.value?.length) {\n      const accounts = [];\n      if (reblogResults.value?.length) {\n        accounts.push(\n          ...reblogResults.value.map((a) => {\n            a._types = ['reblog'];\n            return a;\n          }),\n        );\n      }\n      if (favouriteResults.value?.length) {\n        accounts.push(\n          ...favouriteResults.value.map((a) => {\n            a._types = ['favourite'];\n            return a;\n          }),\n        );\n      }\n      return {\n        value: accounts,\n        done: reblogResults.done && favouriteResults.done,\n      };\n    }\n    return {\n      value: [],\n      done: true,\n    };\n  }\n\n  const isQuotingMyPost =\n    quote?.state === 'accepted' &&\n    quote?.quotedStatus?.account?.id === currentAccount;\n\n  const actionsRef = useRef();\n  const isPinnable = ['public', 'unlisted', 'private'].includes(visibility);\n  const menuFooter =\n    mediaNoDesc && !reblogged ? (\n      <div class=\"footer\">\n        <Icon icon=\"alert\" />\n        <Trans>Some media have no descriptions.</Trans>\n      </div>\n    ) : (\n      statusMonthsAgo >= 3 && (\n        <div class=\"footer\">\n          <Icon icon=\"info\" />\n          <span>\n            <Trans>\n              Old post (<strong>{rtf.format(-statusMonthsAgo, 'month')}</strong>\n              )\n            </Trans>\n          </span>\n        </div>\n      )\n    );\n  const mentionsCount = useMemo(() => {\n    if (!mentions?.length) return false;\n    const allMentions = new Set([accountId, ...mentions.map((m) => m.id)]);\n    return [...allMentions].filter((m) => m !== currentAccount).length;\n  }, [accountId, mentions?.length, currentAccount]);\n  const tooManyMentions = mentionsCount > 3;\n  const ReplyMenuContent = () => (\n    <>\n      <Icon icon=\"comment\" />\n      <span>\n        {repliesCount > 0\n          ? shortenNumber(repliesCount)\n          : tooManyMentions\n            ? t`Reply`\n            : t`Reply`}\n      </span>\n    </>\n  );\n  const replyModeMenuItems = (\n    <>\n      <MenuItem onClick={(e) => replyStatus(e, 'all')}>\n        <small>\n          <Trans>Reply all</Trans>\n          <br />\n          <span class=\"more-insignificant\">\n            <Plural value={mentionsCount} other=\"# mentions\" />\n          </span>\n        </small>\n      </MenuItem>\n      <MenuItem onClick={(e) => replyStatus(e, 'author-first')}>\n        <small>\n          <Trans>Reply all</Trans>\n          <br />\n          <span class=\"more-insignificant\">\n            <Plural\n              value={mentionsCount - 1}\n              other={\n                <Trans comment=\"Author mention appears first, other mentions appear below with newlines in between\">\n                  <span class=\"bidi-isolate\">@{username || acct}</span> first, #\n                  others below\n                </Trans>\n              }\n            />\n          </span>\n        </small>\n      </MenuItem>\n      <MenuItem onClick={(e) => replyStatus(e, 'author-only')}>\n        <small>\n          <Trans>Reply</Trans>\n          <br />\n          <span class=\"more-insignificant\">\n            <Trans>\n              Only <span class=\"bidi-isolate\">@{username || acct}</span>\n            </Trans>\n          </span>\n        </small>\n      </MenuItem>\n    </>\n  );\n  const StatusMenuItems = (\n    <>\n      {!isSizeLarge && sameInstance && (\n        <>\n          <div class=\"menu-control-group-horizontal status-menu\">\n            {tooManyMentions ? (\n              <SubMenu2\n                openTrigger=\"clickOnly\"\n                direction=\"bottom\"\n                overflow=\"auto\"\n                gap={-8}\n                shift={8}\n                menuClassName=\"menu-emphasized\"\n                label={<ReplyMenuContent />}\n              >\n                {replyModeMenuItems}\n              </SubMenu2>\n            ) : (\n              <MenuItem onClick={replyStatus}>{<ReplyMenuContent />}</MenuItem>\n            )}\n            <MenuConfirm\n              subMenu\n              confirmLabel={\n                <>\n                  <Icon icon=\"rocket\" />\n                  <span>{reblogged ? t`Unboost` : t`Boost`}</span>\n                </>\n              }\n              className={`menu-reblog ${reblogged ? 'checked' : ''}`}\n              menuExtras={\n                <>\n                  {supportsNativeQuote() && (\n                    <MenuItem\n                      disabled={quoteDisabled}\n                      onClick={() => {\n                        showCompose({\n                          quoteStatus: status,\n                        });\n                      }}\n                    >\n                      <Icon icon=\"quote\" />\n                      {quoteMetaText ? (\n                        <small>\n                          {quoteText}\n                          <br />\n                          {quoteMetaText}\n                        </small>\n                      ) : (\n                        <span>{quoteText}</span>\n                      )}\n                    </MenuItem>\n                  )}\n                  {(DEV || !supportsNativeQuote()) && (\n                    <MenuItem\n                      onClick={() => {\n                        showCompose({\n                          draftStatus: {\n                            status: `\\n${url}`,\n                          },\n                        });\n                      }}\n                    >\n                      <Icon icon=\"quote\" />\n                      <span>\n                        <Trans>Quote with link</Trans>\n                      </span>\n                      {supportsNativeQuote() && DEV && (\n                        <small class=\"tag collapsed\">DEV</small>\n                      )}\n                    </MenuItem>\n                  )}\n                </>\n              }\n              menuFooter={menuFooter}\n              disabled={!canBoost}\n              onClick={async () => {\n                try {\n                  const done = await confirmBoostStatus();\n                  if (!isSizeLarge && done) {\n                    showToast(\n                      reblogged\n                        ? t`Unboosted @${username || acct}'s post`\n                        : t`Boosted @${username || acct}'s post`,\n                    );\n                  }\n                } catch (e) {}\n              }}\n            >\n              {canQuote ? (\n                <span class=\"icon\">\n                  <Icon icon=\"rocket\" />\n                  <Icon icon=\"quote\" />\n                </span>\n              ) : (\n                <Icon icon=\"rocket\" />\n              )}\n              <span>\n                {reblogsCount > 0 || quotesCount > 0\n                  ? `${reblogsCount > 0 ? shortenNumber(reblogsCount) : ''}${\n                      reblogsCount > 0 && quotesCount > 0 ? '+' : ''\n                    }${quotesCount > 0 ? shortenNumber(quotesCount) : ''}`\n                  : reblogged\n                    ? t`Unboost`\n                    : canQuote\n                      ? t`Boost/Quote`\n                      : t`Boost`}\n              </span>\n            </MenuConfirm>\n            <MenuItem\n              onClick={favouriteStatusNotify}\n              className={`menu-favourite ${favourited ? 'checked' : ''}`}\n            >\n              <Icon icon=\"heart\" />\n              <span>\n                {favouritesCount > 0\n                  ? shortenNumber(favouritesCount)\n                  : favourited\n                    ? t`Unlike`\n                    : t`Like`}\n              </span>\n            </MenuItem>\n            {supports('@mastodon/post-bookmark') && (\n              <MenuItem\n                onClick={bookmarkStatusNotify}\n                className={`menu-bookmark ${bookmarked ? 'checked' : ''}`}\n              >\n                <Icon icon=\"bookmark\" />\n                <span>{bookmarked ? t`Unbookmark` : t`Bookmark`}</span>\n              </MenuItem>\n            )}\n          </div>\n        </>\n      )}\n      {!isSizeLarge && sameInstance && (isSizeLarge || showActionsBar) && (\n        <MenuDivider />\n      )}\n      {(isSizeLarge || showActionsBar) && (\n        <>\n          <MenuItem\n            onClick={() => {\n              states.showGenericAccounts = {\n                heading: t`Boosted/Liked by`,\n                fetchAccounts: fetchBoostedLikedByAccounts,\n                instance,\n                showReactions: true,\n                postID: sKey,\n              };\n            }}\n          >\n            <Icon icon=\"react\" />\n            <span>\n              <Trans>Boosted/Liked by</Trans>\n            </span>\n          </MenuItem>\n          {supportsNativeQuote() && (\n            <MenuItem\n              onClick={() => {\n                setShowQuotes(true);\n              }}\n            >\n              <Icon icon=\"quote\" />\n              <span>\n                <Trans>View Quotes</Trans>\n              </span>\n            </MenuItem>\n          )}\n          {quote?.quotedStatus?.quote && (\n            <MenuItem\n              onClick={() => {\n                setShowQuoteChain(true);\n              }}\n            >\n              <Icon icon=\"quote\" />\n              <span>\n                <Trans>Unwrap quote chain</Trans>\n              </span>\n            </MenuItem>\n          )}\n        </>\n      )}\n      {(isSizeLarge ||\n        (!mediaFirst &&\n          (enableTranslate || !language || differentLanguage))) && (\n        <MenuDivider />\n      )}\n      {!mediaFirst && (enableTranslate || !language || differentLanguage) && (\n        <div class={supportsTTS ? 'menu-horizontal' : ''}>\n          {enableTranslate ? (\n            <MenuItem\n              disabled={forceTranslate}\n              onClick={() => setForceTranslate(true)}\n            >\n              <Icon icon=\"translate\" />\n              <span>\n                <Trans>Translate</Trans>\n              </span>\n            </MenuItem>\n          ) : (\n            <MenuLink\n              to={`${instance ? `/${instance}` : ''}/s/${id}?translate=1`}\n            >\n              <Icon icon=\"translate\" />\n              <span>\n                <Trans>Translate</Trans>\n              </span>\n            </MenuLink>\n          )}\n          {supportsTTS && (\n            <MenuItem\n              onClick={() => {\n                try {\n                  const postText = getPostText(status, {\n                    hideInlineQuote: supportsNativeQuote(),\n                  });\n                  if (postText) {\n                    speak(postText, language);\n                  }\n                } catch (error) {\n                  console.error('Failed to speak text:', error);\n                }\n              }}\n            >\n              <Icon icon=\"speak\" />\n              <span>\n                <Trans>Speak</Trans>\n              </span>\n            </MenuItem>\n          )}\n        </div>\n      )}\n      {isSizeLarge && (\n        <MenuItem\n          onClick={() => {\n            try {\n              const postText = getPostText(status, {\n                hideInlineQuote: supportsNativeQuote(),\n                htmlTextOpts: {\n                  truncateLinks: false,\n                },\n              });\n              navigator.clipboard.writeText(postText);\n              showToast(t`Post text copied`);\n            } catch (e) {\n              console.error(e);\n              showToast(t`Unable to copy post text`);\n            }\n          }}\n        >\n          <Icon icon=\"clipboard\" />\n          <span>\n            <Trans>Copy post text</Trans>\n          </span>\n        </MenuItem>\n      )}\n      {((!isSizeLarge && sameInstance) ||\n        enableTranslate ||\n        !language ||\n        differentLanguage) && <MenuDivider />}\n      {!isSizeLarge && (\n        <>\n          <MenuLink\n            to={instance ? `/${instance}/s/${id}` : `/s/${id}`}\n            onClick={(e) => {\n              onStatusLinkClick(e, status);\n            }}\n          >\n            <Icon icon=\"arrows-right\" />\n            <small>\n              <Trans>\n                View post by{' '}\n                <span class=\"bidi-isolate\">@{username || acct}</span>\n              </Trans>\n              <br />\n              <span class=\"more-insignificant\">\n                {_(visibilityText[visibility])}  {createdDateText}\n              </span>\n            </small>\n          </MenuLink>\n        </>\n      )}\n      {!!editedAt && (\n        <>\n          <MenuItem\n            onClick={() => {\n              setShowEdited(id);\n            }}\n          >\n            <Icon icon=\"history\" />\n            <small>\n              <Trans>Show Edit History</Trans>\n              <br />\n              <span class=\"more-insignificant\">\n                <Trans>Edited: {editedDateText}</Trans>\n              </span>\n            </small>\n          </MenuItem>\n        </>\n      )}\n      <MenuItem href={url} target=\"_blank\">\n        <Icon icon=\"external\" />\n        <small\n          class=\"menu-double-lines should-cloak\"\n          style={{\n            maxWidth: '16em',\n          }}\n        >\n          {nicePostURL(url)}\n        </small>\n      </MenuItem>\n      <div class=\"menu-horizontal\">\n        <MenuItem\n          onClick={() => {\n            // Copy url to clipboard\n            try {\n              navigator.clipboard.writeText(url);\n              showToast(t`Link copied`);\n            } catch (e) {\n              console.error(e);\n              showToast(t`Unable to copy link`);\n            }\n          }}\n        >\n          <Icon icon=\"link\" />\n          <span>\n            <Trans>Copy</Trans>\n          </span>\n        </MenuItem>\n        {isPublic &&\n          navigator?.share &&\n          navigator?.canShare?.({\n            url,\n          }) && (\n            <MenuItem\n              onClick={() => {\n                try {\n                  navigator.share({\n                    url,\n                  });\n                } catch (e) {\n                  console.error(e);\n                  alert(t`Sharing doesn't seem to work.`);\n                }\n              }}\n            >\n              <Icon icon=\"share\" />\n              <span>\n                <Trans>Share</Trans>\n              </span>\n            </MenuItem>\n          )}\n      </div>\n      {isPublic && isSizeLarge && (\n        <MenuItem\n          onClick={() => {\n            setShowEmbed(true);\n          }}\n        >\n          <Icon icon=\"code\" />\n          <span>\n            <Trans>Embed post</Trans>\n          </span>\n        </MenuItem>\n      )}\n      {authenticated && (\n        <>\n          {(isSelf || mentionSelf) && <MenuDivider />}\n          {(isSelf || mentionSelf) && (\n            <MenuItem\n              onClick={async () => {\n                try {\n                  const newStatus = await masto.v1.statuses\n                    .$select(id)\n                    [muted ? 'unmute' : 'mute']();\n                  saveStatus(newStatus, instance);\n                  showToast(\n                    muted ? t`Conversation unmuted` : t`Conversation muted`,\n                  );\n                } catch (e) {\n                  console.error(e);\n                  showToast(\n                    muted\n                      ? t`Unable to unmute conversation`\n                      : t`Unable to mute conversation`,\n                  );\n                }\n              }}\n            >\n              {muted ? (\n                <>\n                  <Icon icon=\"unmute\" />\n                  <span>\n                    <Trans>Unmute conversation</Trans>\n                  </span>\n                </>\n              ) : (\n                <>\n                  <Icon icon=\"mute\" />\n                  <span>\n                    <Trans>Mute conversation</Trans>\n                  </span>\n                </>\n              )}\n            </MenuItem>\n          )}\n          {isSelf && isPinnable && (\n            <MenuItem\n              onClick={async () => {\n                try {\n                  const newStatus = await masto.v1.statuses\n                    .$select(id)\n                    [pinned ? 'unpin' : 'pin']();\n                  saveStatus(newStatus, instance);\n                  showToast(\n                    pinned\n                      ? t`Post unpinned from profile`\n                      : t`Post pinned to profile`,\n                  );\n                } catch (e) {\n                  console.error(e);\n                  showToast(\n                    pinned ? t`Unable to unpin post` : t`Unable to pin post`,\n                  );\n                }\n              }}\n            >\n              {pinned ? (\n                <>\n                  <Icon icon=\"unpin\" />\n                  <span>\n                    <Trans>Unpin from profile</Trans>\n                  </span>\n                </>\n              ) : (\n                <>\n                  <Icon icon=\"pin\" />\n                  <span>\n                    <Trans>Pin to profile</Trans>\n                  </span>\n                </>\n              )}\n            </MenuItem>\n          )}\n          {isSelf && (\n            <>\n              {supportsNativeQuote() &&\n                !['private', 'direct'].includes(visibility) && (\n                  <MenuItem onClick={() => setShowQuoteSettings(true)}>\n                    <Icon icon=\"quote2\" />\n                    <small>\n                      <Trans>Quote settings</Trans>\n                      <br />\n                      <span class=\"more-insignificant\">\n                        {_(\n                          quoteApprovalPolicyMessages[postQuoteApprovalPolicy],\n                        )}\n                      </span>\n                    </small>\n                  </MenuItem>\n                )}\n              <div class=\"menu-horizontal\">\n                {supports('@mastodon/post-edit') && (\n                  <MenuItem\n                    onClick={() => {\n                      showCompose({\n                        editStatus: status,\n                        quoteStatus: status.quote?.quotedStatus,\n                      });\n                    }}\n                  >\n                    <Icon icon=\"pencil\" />\n                    <span>\n                      <Trans>Edit</Trans>\n                    </span>\n                  </MenuItem>\n                )}\n                {isSizeLarge && (\n                  <MenuConfirm\n                    subMenu\n                    confirmLabel={\n                      <>\n                        <Icon icon=\"trash\" />\n                        <span>\n                          <Trans>Delete this post?</Trans>\n                        </span>\n                      </>\n                    }\n                    itemProps={{\n                      className: 'danger',\n                    }}\n                    menuItemClassName=\"danger\"\n                    onClick={() => {\n                      // const yes = confirm('Delete this post?');\n                      // if (yes) {\n                      (async () => {\n                        try {\n                          await masto.v1.statuses.$select(id).remove();\n                          const cachedStatus = getStatus(id, instance);\n                          cachedStatus._deleted = true;\n                          showToast(t`Post deleted`);\n                        } catch (e) {\n                          console.error(e);\n                          showToast(t`Unable to delete post`);\n                        }\n                      })();\n                      // }\n                    }}\n                  >\n                    <Icon icon=\"trash\" />\n                    <span>\n                      <Trans>Delete</Trans>\n                    </span>\n                  </MenuConfirm>\n                )}\n              </div>\n            </>\n          )}\n          {!isSelf && isSizeLarge && (\n            <>\n              <MenuDivider />\n              {isQuotingMyPost && (\n                <MenuConfirm\n                  subMenu\n                  confirmLabel={\n                    <>\n                      <Icon icon=\"quote\" />\n                      <span>\n                        <Trans>\n                          Remove my post from{' '}\n                          <span class=\"bidi-isolate\">@{username || acct}</span>\n                          's post?\n                        </Trans>\n                      </span>\n                    </>\n                  }\n                  itemProps={{\n                    className: 'danger',\n                  }}\n                  menuItemClassName=\"danger\"\n                  onClick={() => {\n                    (async () => {\n                      try {\n                        // POST /api/v1/statuses/:id/quotes/:quoting_status_id/revoke\n                        const quotedStatusID = quote.quotedStatus.id;\n                        await masto.v1.statuses\n                          .$select(quotedStatusID)\n                          .quotes.$select(id)\n                          .revoke.create();\n                        showToast(t`Quote removed`);\n                        states.reloadStatusPage++;\n                      } catch (e) {\n                        console.error(e);\n                        showToast(t`Unable to remove quote`);\n                      }\n                    })();\n                  }}\n                >\n                  <Icon icon=\"quote\" />\n                  <Trans>Remove quote</Trans>\n                </MenuConfirm>\n              )}\n              <MenuItem\n                className=\"danger\"\n                onClick={() => {\n                  states.showReportModal = {\n                    account: status.account,\n                    post: status,\n                  };\n                }}\n              >\n                <Icon icon=\"flag\" />\n                <span>\n                  <Trans>Report post</Trans>\n                </span>\n              </MenuItem>\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n\n  const contextMenuRef = useRef();\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuProps, setContextMenuProps] = useState({});\n\n  const showContextMenu =\n    allowContextMenu || (!isSizeLarge && !previewMode && !_deleted && !quoted);\n\n  // Only iOS/iPadOS browsers don't support contextmenu\n  // Some comments report iPadOS might support contextmenu if a mouse is connected\n  const bindLongPressContext = useLongPress(\n    isIOS && showContextMenu\n      ? (e) => {\n          if (e.pointerType === 'mouse') return;\n          // There's 'pen' too, but not sure if contextmenu event would trigger from a pen\n\n          const { clientX, clientY } = e.touches?.[0] || e;\n          // link detection copied from onContextMenu because here it works\n          const link = e.target.closest('a');\n          if (\n            link &&\n            statusRef.current.contains(link) &&\n            !link.getAttribute('href').startsWith('#')\n          )\n            return;\n          e.preventDefault();\n          setContextMenuProps({\n            anchorPoint: {\n              x: clientX,\n              y: clientY,\n            },\n            direction: 'right',\n          });\n          setIsContextMenuOpen(true);\n        }\n      : null,\n    {\n      threshold: 600,\n      captureEvent: true,\n      detect: 'touch',\n      cancelOnMovement: 2, // true allows movement of up to 25 pixels\n    },\n  );\n\n  const hotkeysEnabled = !readOnly && !previewMode && !quoted;\n  const rRef = useHotkeys(\n    'r, shift+r',\n    (e, handler) => {\n      // Fix bug: shift+r is fired even when r is pressed due to useKey: true\n      if (e.shiftKey !== handler.shift) return;\n      replyStatus(e);\n    },\n    {\n      enabled: hotkeysEnabled,\n      useKey: true,\n      ignoreEventWhen: (e) => e.metaKey || e.ctrlKey || e.altKey,\n    },\n  );\n  const fRef = useHotkeys('f, l', favouriteStatusNotify, {\n    enabled: hotkeysEnabled,\n    ignoreEventWhen: (e) => e.metaKey || e.ctrlKey || e.altKey || e.shiftKey,\n    useKey: true,\n  });\n  const dRef = useHotkeys('d', bookmarkStatusNotify, {\n    enabled: hotkeysEnabled,\n    useKey: true,\n    ignoreEventWhen: (e) => e.metaKey || e.ctrlKey || e.altKey || e.shiftKey,\n  });\n  const bRef = useHotkeys(\n    'shift+b',\n    (e) => {\n      // Need shiftKey check due to useKey: true\n      if (!e.shiftKey) return;\n\n      (async () => {\n        try {\n          const done = await confirmBoostStatus();\n          if (!isSizeLarge && done) {\n            showToast(\n              reblogged\n                ? t`Unboosted @${username || acct}'s post`\n                : t`Boosted @${username || acct}'s post`,\n            );\n          }\n        } catch (e) {}\n      })();\n    },\n    {\n      enabled: hotkeysEnabled && canBoost,\n      useKey: true,\n      ignoreEventWhen: (e) => e.metaKey || e.ctrlKey || e.altKey,\n    },\n  );\n  const xRef = useHotkeys(\n    'x',\n    (e) => {\n      const activeStatus = document.activeElement.closest(\n        '.status-link, .status-focus',\n      );\n      if (activeStatus) {\n        const spoilerButton = activeStatus.querySelector(\n          '.spoiler-button:not(.spoiling)',\n        );\n        if (spoilerButton) {\n          e.stopPropagation();\n          spoilerButton.click();\n        } else {\n          const spoilerMediaButton = activeStatus.querySelector(\n            '.spoiler-media-button:not(.spoiling)',\n          );\n          if (spoilerMediaButton) {\n            e.stopPropagation();\n            spoilerMediaButton.click();\n          }\n        }\n      }\n    },\n    {\n      useKey: true,\n      ignoreEventWhen: (e) => e.metaKey || e.ctrlKey || e.altKey || e.shiftKey,\n    },\n  );\n  const qRef = useHotkeys(\n    'q',\n    (e) => {\n      if (!sameInstance || !authenticated) {\n        return alert(unauthInteractionErrorMessage);\n      }\n\n      if (supportsNativeQuote()) {\n        if (quoteDisabled) {\n          showToast(quoteMetaText);\n        } else {\n          showCompose({\n            quoteStatus: status,\n          });\n        }\n        // Don't fallback to non-native if quoteDisabled\n      } else {\n        showCompose({\n          draftStatus: {\n            status: `\\n${url}`,\n          },\n        });\n      }\n    },\n    {\n      enabled: hotkeysEnabled,\n      useKey: true,\n      ignoreEventWhen: (e) => e.metaKey || e.ctrlKey || e.altKey || e.shiftKey,\n    },\n  );\n\n  const displayedMediaAttachments = mediaAttachments.slice(\n    0,\n    isSizeLarge ? undefined : 4,\n  );\n  const showMultipleMediaCaptions =\n    mediaAttachments.length > 1 &&\n    displayedMediaAttachments.some(\n      (media) => !!media.description && !isMediaCaptionLong(media.description),\n    );\n  const captionChildren = useMemo(() => {\n    if (!showMultipleMediaCaptions) return null;\n    const attachments = [];\n    displayedMediaAttachments.forEach((media, i) => {\n      if (!media.description) return;\n      const index = attachments.findIndex(\n        (attachment) => attachment.media.description === media.description,\n      );\n      if (index === -1) {\n        attachments.push({\n          media,\n          indices: [i],\n        });\n      } else {\n        attachments[index].indices.push(i);\n      }\n    });\n    return attachments.map(({ media, indices }) => (\n      <div\n        key={media.id}\n        data-caption-index={indices.map((i) => i + 1).join(' ')}\n        onClick={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          states.showMediaAlt = {\n            alt: media.description,\n            lang: language,\n          };\n        }}\n        title={media.description}\n      >\n        <sup>{indices.map((i) => i + 1).join(' ')}</sup> {media.description}\n      </div>\n    ));\n\n    // return displayedMediaAttachments.map(\n    //   (media, i) =>\n    //     !!media.description && (\n    //       <div\n    //         key={media.id}\n    //         data-caption-index={i + 1}\n    //         onClick={(e) => {\n    //           e.preventDefault();\n    //           e.stopPropagation();\n    //           states.showMediaAlt = {\n    //             alt: media.description,\n    //             lang: language,\n    //           };\n    //         }}\n    //         title={media.description}\n    //       >\n    //         <sup>{i + 1}</sup> {media.description}\n    //       </div>\n    //     ),\n    // );\n  }, [showMultipleMediaCaptions, displayedMediaAttachments, language]);\n\n  const isThread = useMemo(() => {\n    return (\n      (!!inReplyToId && inReplyToAccountId === status.account?.id) ||\n      !!snapStates.statusThreadNumber[sKey]\n    );\n  }, [\n    inReplyToId,\n    inReplyToAccountId,\n    status.account?.id,\n    snapStates.statusThreadNumber[sKey],\n  ]);\n\n  const showCommentHint = useMemo(() => {\n    return (\n      enableCommentHint &&\n      !isThread &&\n      !withinContext &&\n      !inReplyToId &&\n      visibility === 'public' &&\n      repliesCount > 0\n    );\n  }, [\n    enableCommentHint,\n    isThread,\n    withinContext,\n    inReplyToId,\n    repliesCount,\n    visibility,\n  ]);\n  const showCommentCount = useMemo(() => {\n    if (forceShowCommentCount && repliesCount > 0) return true;\n    if (\n      card ||\n      poll ||\n      sensitive ||\n      spoilerText ||\n      mediaAttachments?.length ||\n      isThread ||\n      withinContext ||\n      inReplyToId ||\n      repliesCount <= 0\n    ) {\n      return false;\n    }\n    const containsQuestion = QUESTION_REGEX.test(content);\n    if (!containsQuestion) return false;\n    if (contentLength > 0 && contentLength <= SHOW_COMMENT_COUNT_LIMIT) {\n      return true;\n    }\n  }, [\n    forceShowCommentCount,\n    card,\n    poll,\n    sensitive,\n    spoilerText,\n    mediaAttachments,\n    reblog,\n    isThread,\n    withinContext,\n    inReplyToId,\n    repliesCount,\n    content,\n    contentLength,\n  ]);\n\n  // Keep this simple for now, unlike showCommentCount\n  const showQuoteCount =\n    typeof forceShowQuoteCount === 'function'\n      ? forceShowQuoteCount(quotesCount)\n      : forceShowQuoteCount && quotesCount > 0;\n\n  return (\n    <StatusParent>\n      {showReplyParent && !!(inReplyToId && inReplyToAccountId) && (\n        <StatusCompact sKey={sKey} />\n      )}\n      <article\n        data-state-post-id={sKey}\n        ref={(node) => {\n          statusRef.current = node;\n          // Use parent node if it's in focus\n          // Use case: <a><status /></a>\n          // When navigating (j/k), the <a> is focused instead of <status />\n          // Hotkey binding doesn't bubble up thus this hack\n          const nodeRef =\n            node?.closest?.(\n              '.timeline-item, .timeline-item-alt, .status-link, .status-focus',\n            ) || node;\n          rRef.current = nodeRef;\n          fRef.current = nodeRef;\n          dRef.current = nodeRef;\n          bRef.current = nodeRef;\n          xRef.current = nodeRef;\n          qRef.current = nodeRef;\n        }}\n        tabindex=\"-1\"\n        class={`status ${\n          !withinContext && inReplyToId && inReplyToAccount\n            ? 'status-reply-to'\n            : ''\n        } visibility-${visibility} ${_pinned ? 'status-pinned' : ''} ${\n          SIZE_CLASS[size]\n        } ${_deleted ? 'status-deleted' : ''} ${quoted ? 'status-card' : ''} ${\n          isContextMenuOpen ? 'status-menu-open' : ''\n        } ${mediaFirst && hasMediaAttachments ? 'status-media-first' : ''}`}\n        onMouseEnter={debugHover}\n        onContextMenu={(e) => {\n          if (!showContextMenu) return;\n          if (e.metaKey) return;\n          // console.log('context menu', e);\n          const link = e.target.closest('a');\n          if (\n            link &&\n            statusRef.current.contains(link) &&\n            !link.getAttribute('href').startsWith('#')\n          )\n            return;\n\n          // If there's selected text, don't show custom context menu\n          const selection = window.getSelection?.();\n          if (selection.toString().length > 0) {\n            const { anchorNode } = selection;\n            if (statusRef.current?.contains(anchorNode)) {\n              return;\n            }\n          }\n          e.preventDefault();\n          setContextMenuProps({\n            anchorPoint: {\n              x: e.clientX,\n              y: e.clientY,\n            },\n            direction: 'right',\n          });\n          setIsContextMenuOpen(true);\n        }}\n        {...(showContextMenu ? bindLongPressContext() : {})}\n      >\n        {showContextMenu && (\n          <ControlledMenu\n            ref={contextMenuRef}\n            state={isContextMenuOpen ? 'open' : undefined}\n            {...contextMenuProps}\n            onClose={(e) => {\n              setIsContextMenuOpen(false);\n              // statusRef.current?.focus?.();\n              if (e?.reason === 'click') {\n                statusRef.current?.closest('[tabindex]')?.focus?.();\n              }\n            }}\n            portal={{\n              target: document.body,\n            }}\n            containerProps={{\n              style: {\n                // Higher than the backdrop\n                zIndex: 1001,\n              },\n              onClick: () => {\n                contextMenuRef.current?.closeMenu?.();\n              },\n            }}\n            overflow=\"auto\"\n            boundingBoxPadding={safeBoundingBoxPadding()}\n            unmountOnClose\n          >\n            {StatusMenuItems}\n          </ControlledMenu>\n        )}\n        {showActionsBar &&\n          size !== 'l' &&\n          !previewMode &&\n          !readOnly &&\n          !_deleted &&\n          !quoted && (\n            <div\n              class={`status-actions ${\n                isContextMenuOpen === 'actions-bar' ? 'open' : ''\n              }`}\n              ref={actionsRef}\n            >\n              <StatusButton\n                size=\"s\"\n                title={t`Reply`}\n                alt={t`Reply`}\n                class=\"reply-button\"\n                icon=\"comment\"\n                iconSize=\"m\"\n                // Menu doesn't work here\n                // Temporary solution: reply author-first if too many mentions\n                onClick={(e) =>\n                  replyStatus(e, tooManyMentions ? 'author-first' : 'all')\n                }\n              />\n              <StatusButton\n                size=\"s\"\n                checked={favourited}\n                title={[t`Like`, t`Unlike`]}\n                alt={[t`Like`, t`Liked`]}\n                class=\"favourite-button\"\n                icon=\"heart\"\n                iconSize=\"m\"\n                count={favouritesCount}\n                onClick={favouriteStatusNotify}\n              />\n              <button\n                type=\"button\"\n                title={t`More`}\n                class=\"plain more-button\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  setContextMenuProps({\n                    anchorRef: {\n                      current: e.currentTarget,\n                    },\n                    align: 'start',\n                    direction: 'left',\n                    gap: 0,\n                    shift: -8,\n                  });\n                  setIsContextMenuOpen('actions-bar');\n                }}\n              >\n                <Icon icon=\"more2\" size=\"m\" alt={t`More`} />\n              </button>\n            </div>\n          )}\n        {size !== 'l' && (\n          <div class=\"status-badge\">\n            {reblogged && (\n              <Icon class=\"reblog\" icon=\"rocket\" size=\"s\" alt={t`Boosted`} />\n            )}\n            {favourited && (\n              <Icon class=\"favourite\" icon=\"heart\" size=\"s\" alt={t`Liked`} />\n            )}\n            {bookmarked && (\n              <Icon\n                class=\"bookmark\"\n                icon=\"bookmark\"\n                size=\"s\"\n                alt={t`Bookmarked`}\n              />\n            )}\n            {_pinned && (\n              <Icon class=\"pin\" icon=\"pin\" size=\"s\" alt={t`Pinned`} />\n            )}\n          </div>\n        )}\n        {size !== 's' && (\n          <a\n            href={accountURL}\n            tabindex=\"-1\"\n            // target=\"_blank\"\n            title={`@${acct}`}\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              states.showAccount = {\n                account: status.account,\n                instance,\n              };\n            }}\n          >\n            <Avatar url={avatarStatic || avatar} size=\"xxl\" squircle={bot} />\n          </a>\n        )}\n        <div class=\"container\">\n          {!!quoteDomain && (\n            <div class=\"status-quote-meta\">\n              <span class=\"domain\">{quoteDomain}</span>\n            </div>\n          )}\n          {!!(status.account || createdAt) && (\n            <div class=\"meta\">\n              <span class=\"meta-name\">\n                <NameText\n                  account={status.account}\n                  instance={instance}\n                  showAvatar={size === 's'}\n                  showAcct={isSizeLarge}\n                />\n              </span>\n              {withinContext && isThread && (\n                <ThreadBadge\n                  showIcon={isSizeLarge}\n                  index={snapStates.statusThreadNumber[sKey]}\n                />\n              )}\n              {/* {inReplyToAccount && !withinContext && size !== 's' && (\n                <>\n                  {' '}\n                  <span class=\"ib\">\n                    <Icon icon=\"arrow-right\" class=\"arrow\" />{' '}\n                    <NameText account={inReplyToAccount} instance={instance} short />\n                  </span>\n                </>\n              )} */}\n              {/* </span> */}{' '}\n              {size !== 'l' &&\n                (_deleted ? (\n                  <span class=\"status-deleted-tag\">\n                    <Trans>Deleted</Trans>\n                  </span>\n                ) : url && !previewMode && !readOnly && !quoted ? (\n                  <Link\n                    to={instance ? `/${instance}/s/${id}` : `/s/${id}`}\n                    onClick={(e) => {\n                      if (\n                        e.metaKey ||\n                        e.ctrlKey ||\n                        e.shiftKey ||\n                        e.altKey ||\n                        e.which === 2\n                      ) {\n                        return;\n                      }\n                      e.preventDefault();\n                      e.stopPropagation();\n                      onStatusLinkClick?.(e, status);\n                      setContextMenuProps({\n                        anchorRef: {\n                          current: e.currentTarget,\n                        },\n                        align: 'end',\n                        direction: 'bottom',\n                        gap: 4,\n                      });\n                      setIsContextMenuOpen(true);\n                    }}\n                    class={`time ${\n                      isContextMenuOpen && contextMenuProps?.anchorRef\n                        ? 'is-open'\n                        : ''\n                    }`}\n                  >\n                    {showCommentHint && !showCommentCount ? (\n                      <Icon\n                        icon=\"comment2\"\n                        size=\"s\"\n                        alt={plural(repliesCount, {\n                          one: '# reply',\n                          other: '# replies',\n                        })}\n                      />\n                    ) : visibility !== 'public' && visibility !== 'direct' ? (\n                      <Icon\n                        icon={visibilityIconsMap[visibility]}\n                        alt={_(visibilityText[visibility])}\n                        size=\"s\"\n                      />\n                    ) : editedAt && size === 's' ? (\n                      <Icon icon=\"pencil\" size=\"s\" alt={t`Edited`} />\n                    ) : null}{' '}\n                    <RelativeTime datetime={createdAtDate} format=\"micro\" />\n                    {!previewMode && !readOnly && (\n                      <Icon icon=\"more2\" class=\"more\" alt={t`More`} />\n                    )}\n                  </Link>\n                ) : (\n                  // <Menu\n                  //   instanceRef={menuInstanceRef}\n                  //   portal={{\n                  //     target: document.body,\n                  //   }}\n                  //   containerProps={{\n                  //     style: {\n                  //       // Higher than the backdrop\n                  //       zIndex: 1001,\n                  //     },\n                  //     onClick: (e) => {\n                  //       if (e.target === e.currentTarget)\n                  //         menuInstanceRef.current?.closeMenu?.();\n                  //     },\n                  //   }}\n                  //   align=\"end\"\n                  //   gap={4}\n                  //   overflow=\"auto\"\n                  //   viewScroll=\"close\"\n                  //   boundingBoxPadding=\"8 8 8 8\"\n                  //   unmountOnClose\n                  //   menuButton={({ open }) => (\n                  //     <Link\n                  //       to={instance ? `/${instance}/s/${id}` : `/s/${id}`}\n                  //       onClick={(e) => {\n                  //         e.preventDefault();\n                  //         e.stopPropagation();\n                  //         onStatusLinkClick?.(e, status);\n                  //       }}\n                  //       class={`time ${open ? 'is-open' : ''}`}\n                  //     >\n                  //       <Icon\n                  //         icon={visibilityIconsMap[visibility]}\n                  //         alt={visibilityText[visibility]}\n                  //         size=\"s\"\n                  //       />{' '}\n                  //       <RelativeTime datetime={createdAtDate} format=\"micro\" />\n                  //     </Link>\n                  //   )}\n                  // >\n                  //   {StatusMenuItems}\n                  // </Menu>\n                  <span class=\"time\">\n                    {showCommentHint && !showCommentCount ? (\n                      <Icon\n                        icon=\"comment2\"\n                        size=\"s\"\n                        alt={plural(repliesCount, {\n                          one: '# reply',\n                          other: '# replies',\n                        })}\n                      />\n                    ) : visibility !== 'public' && visibility !== 'direct' ? (\n                      <Icon\n                        icon={visibilityIconsMap[visibility]}\n                        alt={_(visibilityText[visibility])}\n                        size=\"s\"\n                      />\n                    ) : editedAt && size === 's' ? (\n                      <Icon icon=\"pencil\" size=\"s\" alt={t`Edited`} />\n                    ) : null}{' '}\n                    <RelativeTime datetime={createdAtDate} format=\"micro\" />\n                  </span>\n                ))}\n            </div>\n          )}\n          {visibility === 'direct' && (\n            <>\n              <div class=\"status-direct-badge\">\n                <Trans>Private mention</Trans>\n              </div>{' '}\n            </>\n          )}\n          {!withinContext && (\n            <>\n              {isThread ? (\n                <ThreadBadge\n                  showIcon\n                  showText\n                  index={snapStates.statusThreadNumber[sKey]}\n                />\n              ) : (\n                !!inReplyToId &&\n                !!inReplyToAccount &&\n                (!!spoilerText ||\n                  !mentions.find((mention) => {\n                    return mention.id === inReplyToAccountId;\n                  })) && (\n                  <div class=\"status-reply-badge\">\n                    <Icon icon=\"reply\" />{' '}\n                    <NameText\n                      account={inReplyToAccount}\n                      instance={instance}\n                      short\n                    />\n                  </div>\n                )\n              )}\n            </>\n          )}\n          <div\n            class={`content-container ${\n              spoilerText ||\n              sensitive ||\n              filterInfo?.action === 'blur' ||\n              readingExpandMedia === 'hide_all'\n                ? 'has-spoiler'\n                : ''\n            } ${showSpoiler ? 'show-spoiler' : ''} ${\n              showSpoilerMedia ? 'show-media' : ''\n            }`}\n            data-content-text-weight={contentTextWeight ? textWeight() : null}\n            style={\n              (isSizeLarge || contentTextWeight) && {\n                '--content-text-weight': textWeight(),\n              }\n            }\n          >\n            {mediaFirst && hasMediaAttachments ? (\n              <>\n                {(!!spoilerText || !!sensitive) && !readingExpandSpoilers && (\n                  <>\n                    {!!spoilerText && (\n                      <span\n                        class=\"spoiler-content media-first-spoiler-content\"\n                        lang={language}\n                        dir=\"auto\"\n                        ref={spoilerContentRef}\n                        data-read-more={_(readMoreText)}\n                      >\n                        <EmojiText text={spoilerText} emojis={emojis} />{' '}\n                      </span>\n                    )}\n                    <button\n                      class={`light spoiler-button media-first-spoiler-button ${\n                        showSpoiler ? 'spoiling' : ''\n                      }`}\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if (showSpoiler) {\n                          delete states.spoilers[id];\n                          if (!readingExpandSpoilers) {\n                            delete states.spoilersMedia[id];\n                          }\n                        } else {\n                          states.spoilers[id] = true;\n                          if (!readingExpandSpoilers) {\n                            states.spoilersMedia[id] = true;\n                          }\n                        }\n                      }}\n                    >\n                      <Icon icon={showSpoiler ? 'eye-open' : 'eye-close'} />{' '}\n                      {showSpoiler ? t`Show less` : t`Show content`}\n                    </button>\n                  </>\n                )}\n                <MediaFirstContainer\n                  mediaAttachments={mediaAttachments}\n                  language={language}\n                  postID={id}\n                  instance={instance}\n                />\n                {!!content && (\n                  <div class=\"media-first-content content\" ref={contentRef}>\n                    <PostContent\n                      post={status}\n                      instance={instance}\n                      previewMode={previewMode}\n                    />\n                  </div>\n                )}\n              </>\n            ) : (\n              <>\n                {!!spoilerText && (\n                  <>\n                    <div\n                      class=\"content spoiler-content\"\n                      lang={language}\n                      dir=\"auto\"\n                      ref={spoilerContentRef}\n                      data-read-more={_(readMoreText)}\n                    >\n                      <p>\n                        <EmojiText text={spoilerText} emojis={emojis} />\n                      </p>\n                    </div>\n                    {readingExpandSpoilers || previewMode ? (\n                      <div class=\"spoiler-divider\">\n                        <Icon icon=\"eye-open\" /> <Trans>Content warning</Trans>\n                      </div>\n                    ) : (\n                      <button\n                        class={`light spoiler-button ${\n                          showSpoiler ? 'spoiling' : ''\n                        }`}\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          if (showSpoiler) {\n                            delete states.spoilers[id];\n                            if (!readingExpandSpoilers) {\n                              delete states.spoilersMedia[id];\n                            }\n                          } else {\n                            states.spoilers[id] = true;\n                            if (!readingExpandSpoilers) {\n                              states.spoilersMedia[id] = true;\n                            }\n                          }\n                        }}\n                      >\n                        <Icon icon={showSpoiler ? 'eye-open' : 'eye-close'} />{' '}\n                        {showSpoiler ? t`Show less` : t`Show content`}\n                      </button>\n                    )}\n                  </>\n                )}\n                {!!content && (\n                  <div\n                    class=\"content\"\n                    ref={contentRef}\n                    data-read-more={_(readMoreText)}\n                    inert={!!spoilerText && !showSpoiler ? true : undefined}\n                  >\n                    <PostContent\n                      key={reloadPostContentCount}\n                      post={status}\n                      instance={instance}\n                      previewMode={previewMode}\n                    />\n                  </div>\n                )}\n                {!!content && (\n                  <MathBlock\n                    content={content}\n                    contentRef={contentRef}\n                    onRevert={reloadPostContent}\n                  />\n                )}\n                {!!poll && (\n                  <Poll\n                    lang={language}\n                    poll={poll}\n                    readOnly={readOnly || !sameInstance || !authenticated}\n                    onUpdate={(newPoll) => {\n                      states.statuses[sKey].poll = newPoll;\n                    }}\n                    refresh={() => {\n                      return masto.v1.polls\n                        .$select(poll.id)\n                        .fetch()\n                        .then((pollResponse) => {\n                          states.statuses[sKey].poll = pollResponse;\n                        })\n                        .catch((e) => {}); // Silently fail\n                    }}\n                    votePoll={(choices) => {\n                      return masto.v1.polls\n                        .$select(poll.id)\n                        .votes.create({\n                          choices,\n                        })\n                        .then((pollResponse) => {\n                          states.statuses[sKey].poll = pollResponse;\n                        })\n                        .catch((e) => {}); // Silently fail\n                    }}\n                  />\n                )}\n                {(((enableTranslate || inlineTranslate) &&\n                  isTranslateble(content, emojis) &&\n                  differentLanguage) ||\n                  forceTranslate) && (\n                  <TranslationBlock\n                    forceTranslate={forceTranslate || inlineTranslate}\n                    mini={!isSizeLarge && !withinContext}\n                    sourceLanguage={language}\n                    autoDetected={languageAutoDetected}\n                    text={getPostText(status, {\n                      maskCustomEmojis: true,\n                      maskURLs: true,\n                      // Hide regardless of native quote support\n                      // They are not useful in translation context\n                      hideInlineQuote: true,\n                    })}\n                  />\n                )}\n                {!previewMode &&\n                  (sensitive ||\n                    filterInfo?.action === 'blur' ||\n                    readingExpandMedia === 'hide_all') &&\n                  !!mediaAttachments.length &&\n                  (readingExpandMedia !== 'show_all' ||\n                    filterInfo?.action === 'blur') && (\n                    <button\n                      class={`plain spoiler-media-button ${\n                        showSpoilerMedia ? 'spoiling' : ''\n                      }`}\n                      type=\"button\"\n                      hidden={!readingExpandSpoilers && !!spoilerText}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if (showSpoilerMedia) {\n                          delete states.spoilersMedia[id];\n                        } else {\n                          states.spoilersMedia[id] = true;\n                        }\n                      }}\n                    >\n                      <Icon\n                        icon={showSpoilerMedia ? 'eye-open' : 'eye-close'}\n                      />{' '}\n                      <span>\n                        {filterInfo?.action === 'blur' && (\n                          <small>\n                            <Trans>Filtered: {filterInfo?.titlesStr}</Trans>\n                            <br />\n                          </small>\n                        )}\n                        {showSpoilerMedia ? t`Show less` : t`Show media`}\n                      </span>\n                    </button>\n                  )}\n                {!!mediaAttachments.length &&\n                  (mediaAttachments.length > 1 &&\n                  (isSizeLarge || (withinContext && size === 'm')) ? (\n                    <div class=\"media-large-container\">\n                      {mediaAttachments.map((media, i) => (\n                        <div key={media.id} class={`media-container media-eq1`}>\n                          <Media\n                            media={media}\n                            autoAnimate\n                            showCaption\n                            allowLongerCaption={!content || isSizeLarge}\n                            lang={language}\n                            to={`/${instance}/s/${id}?${\n                              withinContext ? 'media' : 'media-only'\n                            }=${i + 1}`}\n                            onClick={\n                              onMediaClick\n                                ? (e) => onMediaClick(e, i, media, status)\n                                : undefined\n                            }\n                          />\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <MultipleMediaFigure\n                      lang={language}\n                      enabled={showMultipleMediaCaptions}\n                      captionChildren={captionChildren}\n                    >\n                      <div\n                        ref={mediaContainerRef}\n                        class={`media-container media-eq${\n                          mediaAttachments.length\n                        } ${mediaAttachments.length > 2 ? 'media-gt2' : ''} ${\n                          mediaAttachments.length > 4 ? 'media-gt4' : ''\n                        }`}\n                      >\n                        {displayedMediaAttachments.map((media, i) => (\n                          <Media\n                            key={media.id}\n                            media={media}\n                            autoAnimate={isSizeLarge}\n                            showCaption={mediaAttachments.length === 1}\n                            allowLongerCaption={\n                              !content && mediaAttachments.length === 1\n                            }\n                            lang={language}\n                            altIndex={\n                              showMultipleMediaCaptions &&\n                              !!media.description &&\n                              i + 1\n                            }\n                            to={`/${instance}/s/${id}?${\n                              withinContext ? 'media' : 'media-only'\n                            }=${i + 1}`}\n                            onClick={\n                              onMediaClick\n                                ? (e) => {\n                                    onMediaClick(e, i, media, status);\n                                  }\n                                : undefined\n                            }\n                            checkAspectRatio={mediaAttachments.length === 1}\n                          />\n                        ))}\n                      </div>\n                    </MultipleMediaFigure>\n                  ))}\n                <QuoteStatuses\n                  id={id}\n                  instance={instance}\n                  level={quoted}\n                  collapsed={!isSizeLarge && !withinContext}\n                  fallbackQuote={quote}\n                />\n                {!!card &&\n                  /^https/i.test(card?.url) &&\n                  !sensitive &&\n                  !spoilerText &&\n                  !poll &&\n                  !mediaAttachments.length &&\n                  !snapStates.statusQuotes[sKey] && (\n                    <StatusCard\n                      card={card}\n                      selfReferential={\n                        card?.url === status.url || card?.url === status.uri\n                      }\n                      selfAuthor={card?.authors?.some(\n                        (a) => a.account?.url === accountURL,\n                      )}\n                      instance={currentInstance}\n                    />\n                  )}\n              </>\n            )}\n          </div>\n          {!isSizeLarge && (showCommentCount || showQuoteCount) && (\n            <div class=\"content-comment-hint insignificant\">\n              {showCommentCount && (\n                <>\n                  <Icon icon=\"comment2\" alt={t`Replies`} /> {repliesCount}\n                </>\n              )}{' '}\n              {showQuoteCount && (\n                <>\n                  <Icon icon=\"quote\" alt={t`Quotes`} /> {quotesCount}\n                </>\n              )}\n            </div>\n          )}\n          {isSizeLarge && (\n            <>\n              <div class=\"extra-meta\">\n                {_deleted ? (\n                  <span class=\"status-deleted-tag\">\n                    <Trans>Deleted</Trans>\n                  </span>\n                ) : (\n                  <>\n                    <Icon icon={visibilityIconsMap[visibility]} alt=\"\" />{' '}\n                    <span>{_(visibilityText[visibility])}</span> &bull;{' '}\n                    <a href={url} target=\"_blank\" rel=\"noopener\">\n                      {\n                        // within a day\n                        Date.now() - createdAtDate.getTime() < 86400000 && (\n                          <>\n                            <RelativeTime\n                              datetime={createdAtDate}\n                              format=\"micro\"\n                            />{' '}\n                            {' '}\n                          </>\n                        )\n                      }\n                      {!!createdAt && (\n                        <time\n                          class=\"created\"\n                          datetime={createdAtDate.toISOString()}\n                          title={createdAtDate.toLocaleString()}\n                        >\n                          {createdDateText}\n                        </time>\n                      )}\n                    </a>\n                    {editedAt && (\n                      <span class=\"edited-container\">\n                        {' '}\n                        &bull; <Icon icon=\"pencil\" alt={t`Edited`} />{' '}\n                        <time\n                          tabIndex=\"0\"\n                          class=\"edited\"\n                          datetime={editedAtDate.toISOString()}\n                          onClick={() => {\n                            setShowEdited(id);\n                          }}\n                        >\n                          {editedDateText}\n                        </time>\n                      </span>\n                    )}\n                  </>\n                )}\n              </div>\n              {!!emojiReactions?.length && (\n                <div class=\"emoji-reactions\">\n                  {emojiReactions.map((emojiReaction) => {\n                    const { name, count, me, url, staticUrl } = emojiReaction;\n                    if (url) {\n                      // Some servers return url and staticUrl\n                      return (\n                        <span\n                          class={`emoji-reaction tag ${\n                            me ? '' : 'insignificant'\n                          }`}\n                        >\n                          <CustomEmoji\n                            alt={name}\n                            url={url}\n                            staticUrl={staticUrl}\n                          />{' '}\n                          {count}\n                        </span>\n                      );\n                    }\n                    const isShortCode = /^:.+?:$/.test(name);\n                    if (isShortCode) {\n                      const emoji = emojis.find(\n                        (e) =>\n                          e.shortcode ===\n                          name.replace(/^:/, '').replace(/:$/, ''),\n                      );\n                      if (emoji) {\n                        return (\n                          <span\n                            class={`emoji-reaction tag ${\n                              me ? '' : 'insignificant'\n                            }`}\n                          >\n                            <CustomEmoji\n                              alt={name}\n                              url={emoji.url}\n                              staticUrl={emoji.staticUrl}\n                            />{' '}\n                            {count}\n                          </span>\n                        );\n                      }\n                    }\n                    return (\n                      <span\n                        class={`emoji-reaction tag ${\n                          me ? '' : 'insignificant'\n                        }`}\n                      >\n                        {name} {count}\n                      </span>\n                    );\n                  })}\n                </div>\n              )}\n              <div class={`actions ${_deleted ? 'disabled' : ''}`}>\n                <div class=\"action has-count\">\n                  {tooManyMentions ? (\n                    <Menu2\n                      openTrigger=\"clickOnly\"\n                      direction=\"bottom\"\n                      overflow=\"auto\"\n                      gap={-8}\n                      shift={8}\n                      menuClassName=\"menu-emphasized\"\n                      menuButton={\n                        <StatusButton\n                          title={t`Reply`}\n                          alt={t`Comments`}\n                          class=\"reply-button\"\n                          icon=\"comment\"\n                          count={repliesCount}\n                        />\n                      }\n                    >\n                      {replyModeMenuItems}\n                    </Menu2>\n                  ) : (\n                    <StatusButton\n                      title={t`Reply`}\n                      alt={t`Comments`}\n                      class=\"reply-button\"\n                      icon=\"comment\"\n                      count={repliesCount}\n                      onClick={replyStatus}\n                    />\n                  )}\n                </div>\n                {/* <div class=\"action has-count\">\n                <StatusButton\n                  checked={reblogged}\n                  title={['Boost', 'Unboost']}\n                  alt={['Boost', 'Boosted']}\n                  class=\"reblog-button\"\n                  icon=\"rocket\"\n                  count={reblogsCount}\n                  onClick={boostStatus}\n                  disabled={!canBoost}\n                />\n              </div> */}\n                <div\n                  class={`action ${canQuote && reblogsCount > 0 && quotesCount > 0 ? 'has-counts' : 'has-count'}`}\n                >\n                  <MenuConfirm\n                    disabled={!canBoost}\n                    onClick={confirmBoostStatus}\n                    confirmLabel={\n                      <>\n                        <Icon icon=\"rocket\" />\n                        <span class=\"menu-grow\">\n                          {reblogged ? t`Unboost` : t`Boost`}\n                        </span>\n                        {reblogsCount > 0 && (\n                          <small class=\"more-insignificant\">\n                            {shortenNumber(reblogsCount)}\n                          </small>\n                        )}\n                      </>\n                    }\n                    menuExtras={\n                      <>\n                        {supportsNativeQuote() && (\n                          <MenuItem\n                            disabled={quoteDisabled}\n                            onClick={() => {\n                              showCompose({\n                                quoteStatus: status,\n                              });\n                            }}\n                          >\n                            <Icon icon=\"quote\" />\n                            {quoteMetaText ? (\n                              <small>\n                                {quoteText}\n                                <br />\n                                {quoteMetaText}\n                              </small>\n                            ) : (\n                              <span class=\"menu-grow\">{quoteText}</span>\n                            )}\n                            {quotesCount > 0 && (\n                              <small class=\"more-insignificant\">\n                                {shortenNumber(quotesCount)}\n                              </small>\n                            )}\n                          </MenuItem>\n                        )}\n                        {(DEV || !supportsNativeQuote()) && (\n                          <MenuItem\n                            onClick={() => {\n                              showCompose({\n                                draftStatus: {\n                                  status: `\\n${url}`,\n                                },\n                              });\n                            }}\n                          >\n                            <Icon icon=\"quote\" />\n                            <span>\n                              <Trans>Quote with link</Trans>\n                            </span>\n                            {supportsNativeQuote() && DEV && (\n                              <small class=\"tag collapsed\">DEV</small>\n                            )}\n                          </MenuItem>\n                        )}\n                      </>\n                    }\n                    menuFooter={menuFooter}\n                  >\n                    <StatusButton\n                      checked={reblogged}\n                      title={[\n                        canQuote ? t`Boost/Quote` : t`Boost`,\n                        t`Unboost`,\n                      ]}\n                      alt={[t`Boost`, t`Boosted`]}\n                      class=\"reblog-button\"\n                      icon={\n                        reblogsCount <= 0 && quotesCount > 0\n                          ? 'quote'\n                          : 'rocket'\n                      }\n                      count={reblogsCount}\n                      extraCount={quotesCount}\n                      // onClick={boostStatus}\n                      disabled={!canBoost}\n                    />\n                  </MenuConfirm>\n                </div>\n                <div class=\"action has-count\">\n                  <StatusButton\n                    checked={favourited}\n                    title={[t`Like`, t`Unlike`]}\n                    alt={[t`Like`, t`Liked`]}\n                    class=\"favourite-button\"\n                    icon=\"heart\"\n                    count={favouritesCount}\n                    onClick={favouriteStatus}\n                  />\n                </div>\n                {supports('@mastodon/post-bookmark') && (\n                  <div class=\"action\">\n                    <StatusButton\n                      checked={bookmarked}\n                      title={[t`Bookmark`, t`Unbookmark`]}\n                      alt={[t`Bookmark`, t`Bookmarked`]}\n                      class=\"bookmark-button\"\n                      icon=\"bookmark\"\n                      onClick={bookmarkStatus}\n                    />\n                  </div>\n                )}\n                <Menu2\n                  portal={{\n                    target:\n                      document.querySelector('.status-deck') || document.body,\n                  }}\n                  align=\"end\"\n                  gap={4}\n                  overflow=\"auto\"\n                  viewScroll=\"close\"\n                  menuButton={\n                    <div class=\"action\">\n                      <button\n                        type=\"button\"\n                        title={t`More`}\n                        class=\"plain more-button\"\n                      >\n                        <Icon icon=\"more2\" size=\"l\" alt={t`More`} />\n                      </button>\n                    </div>\n                  }\n                >\n                  {StatusMenuItems}{' '}\n                </Menu2>\n              </div>\n            </>\n          )}\n        </div>\n        {!!showEdited && (\n          <Modal\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowEdited(false);\n                // statusRef.current?.focus();\n              }\n            }}\n          >\n            <EditedAtModal\n              statusID={showEdited}\n              instance={instance}\n              fetchStatusHistory={() => {\n                return masto.v1.statuses.$select(showEdited).history.list();\n              }}\n              onClose={() => {\n                setShowEdited(false);\n                statusRef.current?.focus();\n              }}\n            />\n          </Modal>\n        )}\n        {!!showEmbed && (\n          <Modal\n            onClose={() => {\n              setShowEmbed(false);\n            }}\n          >\n            <PostEmbedModal\n              post={status}\n              instance={instance}\n              onClose={() => {\n                setShowEmbed(false);\n              }}\n            />\n          </Modal>\n        )}\n        {!!showQuoteSettings && (\n          <Modal\n            onClose={() => {\n              setShowQuoteSettings(false);\n              states.reloadStatusPage++;\n            }}\n          >\n            <QuoteSettingsSheet\n              onClose={() => {\n                setShowQuoteSettings(false);\n                states.reloadStatusPage++;\n              }}\n              post={status}\n              currentPolicy={postQuoteApprovalPolicy}\n            />\n          </Modal>\n        )}\n        {!!showQuotes && (\n          <Modal\n            onClose={() => {\n              setShowQuotes(false);\n            }}\n          >\n            <QuotesModal\n              statusId={id}\n              instance={instance}\n              onClose={() => {\n                setShowQuotes(false);\n              }}\n            />\n          </Modal>\n        )}\n        {!!showQuoteChain && (\n          <Modal\n            onClose={() => {\n              setShowQuoteChain(false);\n            }}\n          >\n            <QuoteChainModal\n              statusId={id}\n              instance={instance}\n              onClose={() => {\n                setShowQuoteChain(false);\n              }}\n            />\n          </Modal>\n        )}\n      </article>\n    </StatusParent>\n  );\n}\n\nfunction nicePostURL(url) {\n  if (!url) return;\n  const urlObj = URL.parse(url);\n  if (!urlObj) return;\n  const { host, pathname } = urlObj;\n  const path = pathname.replace(/\\/$/, '');\n  // split only first slash\n  const [_, username, restPath] = path.match(/\\/(@[^\\/]+)\\/(.*)/) || [];\n  return (\n    <>\n      {punycode.toUnicode(host)}\n      {username ? (\n        <>\n          /{username}\n          <wbr />\n          <span class=\"more-insignificant\">/{restPath}</span>\n        </>\n      ) : (\n        <span class=\"more-insignificant\">{path}</span>\n      )}\n    </>\n  );\n}\n\nconst handledUnfulfilledStates = [\n  'deleted',\n  'unauthorized',\n  'pending',\n  'rejected',\n  'revoked',\n  'blocked_account',\n  'blocked_domain',\n  'muted_account',\n];\nconst revealableUnfulfilledStates = [\n  'blocked_account',\n  'blocked_domain',\n  'muted_account',\n];\nconst unfulfilledText = {\n  filterHidden: msg`Post hidden by your filters`,\n  pending: msg`Post pending`,\n  deleted: msg`Post unavailable`,\n  unauthorized: msg`Post unavailable`,\n  rejected: msg`Post unavailable`,\n  revoked: msg`Post removed by author`,\n  blocked_account: (name) => msg`Post hidden because you've blocked @${name}.`,\n  blocked_domain: (domain) =>\n    msg`Post hidden because you've blocked ${domain}.`,\n  muted_account: (name) => msg`Post hidden because you've muted @${name}.`,\n};\n\nconst QuoteStatus = memo(({ quote, level = 0 }) => {\n  const { _ } = useLingui();\n  const snapStates = useSnapshot(states);\n  const filterContext = useContext(FilterContext);\n  const currentAccount = getCurrentAccID();\n\n  const q = quote;\n  let unfulfilledState;\n\n  // Static as in there's no live update (edited, liked, etc.)\n  const isStaticQuote = !!q.quoteStatus;\n\n  const quoteStatus =\n    snapStates.statuses[statusKey(q.id, q.instance)] || q.quoteStatus;\n  if (quoteStatus) {\n    const isSelf = currentAccount && currentAccount === quoteStatus.account?.id;\n    const filterInfo =\n      !isSelf && isFiltered(quoteStatus.filtered, filterContext);\n\n    if (filterInfo?.action === 'hide') {\n      unfulfilledState = 'filterHidden';\n    }\n  }\n\n  if (!unfulfilledState) {\n    unfulfilledState = handledUnfulfilledStates.find(\n      (state) => q.state === state,\n    );\n  }\n\n  const isRevealable = revealableUnfulfilledStates.includes(unfulfilledState);\n  const quoteKey = q.id ? statusKey(q.id, q.instance) : null;\n  const isRevealed = quoteKey && snapStates.revealedQuotes[quoteKey];\n\n  if (unfulfilledState && (!isRevealable || !isRevealed)) {\n    // Get account info for revealable states\n    const quotedAccount = quoteStatus?.account;\n    const quotedAccountAcct = quotedAccount?.acct;\n    const domain = quotedAccountAcct?.split('@')[1];\n\n    let message;\n    if (isRevealable) {\n      if (unfulfilledState === 'blocked_account') {\n        message = _(unfulfilledText.blocked_account(quotedAccountAcct));\n      } else if (unfulfilledState === 'blocked_domain') {\n        message = _(unfulfilledText.blocked_domain(domain));\n      } else if (unfulfilledState === 'muted_account') {\n        message = _(unfulfilledText.muted_account(quotedAccountAcct));\n      }\n    } else {\n      message = _(unfulfilledText[unfulfilledState]);\n    }\n\n    return (\n      <div\n        key={quoteKey}\n        class={`status-card-unfulfilled ${\n          unfulfilledState === 'filterHidden' || isRevealable\n            ? 'status-card-ghost'\n            : ''\n        } ${q.native ? 'quote-post-native' : ''}`}\n      >\n        <Icon icon=\"quote\" />\n        <i>{message}</i>\n        {isRevealable && quoteKey && (\n          <button\n            type=\"button\"\n            class=\"textual\"\n            onClick={() => {\n              states.revealedQuotes[quoteKey] = true;\n            }}\n          >\n            <Trans>Show anyway</Trans>\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  const Parent = q.native ? Fragment : LazyShazam;\n  return (\n    <Parent id={q.instance + q.id} key={q.instance + q.id}>\n      <Link\n        key={q.instance + q.id}\n        to={`${q.instance ? `/${q.instance}` : ''}/s/${q.id}`}\n        class={`status-card-link ${q.native ? 'quote-post-native' : ''}`}\n        data-read-more={_(readMoreText)}\n      >\n        <Status\n          statusID={q.id}\n          status={isStaticQuote ? quoteStatus : undefined}\n          instance={q.instance}\n          size=\"s\"\n          quoted={level + 1}\n          quoteDomain={q.originalDomain}\n          enableCommentHint\n        />\n      </Link>\n    </Parent>\n  );\n});\n\nconst ShallowQuote = ({ quote } = {}) => {\n  const { account, native, instance } = quote || {};\n  if (!account) return null;\n  return (\n    <div class=\"status-card-container\">\n      <div class={native ? 'quote-post-native' : ''}>\n        <div class=\"status-card status-shallow-card\">\n          <NameText account={account} instance={instance} showAvatar />{' '}\n          <span class=\"insignificant\"></span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst QuoteStatuses = memo(\n  ({ id, instance, level = 0, collapsed = false, fallbackQuote }) => {\n    if (!id || !instance) return;\n    const { _ } = useLingui();\n    const snapStates = useSnapshot(states);\n    const sKey = statusKey(id, instance);\n    const quotes = snapStates.statusQuotes[sKey];\n    let uniqueQuotes = quotes?.filter(\n      (q, i, arr) => q.native || arr.findIndex((q2) => q2.url === q.url) === i,\n    );\n\n    const containerRef = useTruncated();\n\n    if (!uniqueQuotes?.length && fallbackQuote?.quotedStatus) {\n      // Just render it\n      return (\n        <div\n          class=\"status-card-container\"\n          ref={containerRef}\n          data-read-more={_(readMoreText)}\n          data-quote-container-static={true}\n        >\n          <QuoteStatus\n            quote={{\n              // Same structure as the one in saveStatus (utils/states)\n              id,\n              instance,\n              // url\n              state: fallbackQuote.state,\n              // account\n              native: true,\n              // Inject whole quoteStatus instead of reading from states\n              quoteStatus: fallbackQuote.quotedStatus,\n            }}\n          />\n        </div>\n      );\n    }\n\n    if (!uniqueQuotes?.length) return;\n    if (level > 2) {\n      return <ShallowQuote quote={uniqueQuotes[0]} />;\n    }\n\n    if (collapsed) {\n      // Only show the first quote if \"collapsed\"\n      uniqueQuotes = [uniqueQuotes[0]];\n    }\n\n    return (\n      <div\n        class=\"status-card-container\"\n        ref={containerRef}\n        data-read-more={_(readMoreText)}\n      >\n        {uniqueQuotes.map((q) => {\n          const quoteKey = q.id\n            ? statusKey(q.id, q.instance)\n            : `${q.instance || ''}-${q.state}`;\n          return <QuoteStatus key={quoteKey} quote={q} level={level} />;\n        })}\n      </div>\n    );\n  },\n);\n\nfunction EditedAtModal({\n  statusID,\n  instance,\n  fetchStatusHistory = () => {},\n  onClose,\n}) {\n  const { t } = useLingui();\n  const [uiState, setUIState] = useState('default');\n  const [editHistory, setEditHistory] = useState([]);\n\n  useEffect(() => {\n    setUIState('loading');\n    (async () => {\n      try {\n        const editHistory = await fetchStatusHistory();\n        console.log(editHistory);\n        setEditHistory(editHistory);\n        setUIState('default');\n      } catch (e) {\n        console.error(e);\n        setUIState('error');\n      }\n    })();\n  }, []);\n\n  return (\n    <div id=\"edit-history\" class=\"sheet\">\n      {!!onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <h2>\n          <Trans>Edit History</Trans>\n        </h2>\n        {uiState === 'error' && (\n          <p>\n            <Trans>Failed to load history</Trans>\n          </p>\n        )}\n        {uiState === 'loading' && (\n          <p>\n            <Loader abrupt /> <Trans>Loading</Trans>\n          </p>\n        )}\n      </header>\n      <main tabIndex=\"-1\">\n        {editHistory.length > 0 && (\n          <ol>\n            {editHistory.map((status) => {\n              const { createdAt } = status;\n              const createdAtDate = new Date(createdAt);\n              return (\n                <li key={createdAt} class=\"history-item\">\n                  <h3>\n                    <time>\n                      {niceDateTime(createdAtDate, {\n                        formatOpts: {\n                          weekday: 'short',\n                          second: 'numeric',\n                        },\n                      })}\n                    </time>\n                  </h3>\n                  <Status\n                    status={status}\n                    instance={instance}\n                    size=\"s\"\n                    withinContext\n                    readOnly\n                    previewMode\n                  />\n                </li>\n              );\n            })}\n          </ol>\n        )}\n      </main>\n    </div>\n  );\n}\n\nfunction FilteredStatus({\n  status,\n  filterInfo,\n  instance,\n  containerProps = {},\n  showFollowedTags,\n  quoted,\n}) {\n  const { _, t } = useLingui();\n  const snapStates = useSnapshot(states);\n  const {\n    id: statusID,\n    account: { avatar, avatarStatic, bot, group },\n    createdAt,\n    visibility,\n    reblog,\n  } = status;\n  const isReblog = !!reblog;\n  const filterTitleStr = filterInfo?.titlesStr || '';\n  const createdAtDate = new Date(createdAt);\n  const statusPeekText = statusPeek(status.reblog || status);\n\n  const [showPeek, setShowPeek] = useState(false);\n  const bindLongPressPeek = useLongPress(\n    () => {\n      setShowPeek(true);\n    },\n    {\n      threshold: 600,\n      captureEvent: true,\n      detect: 'touch',\n      cancelOnMovement: 2, // true allows movement of up to 25 pixels\n    },\n  );\n\n  const statusPeekRef = useTruncated();\n  const sKey = statusKey(status.id, instance);\n  const ssKey =\n    statusKey(status.id, instance) +\n    ' ' +\n    (statusKey(reblog?.id, instance) || '');\n\n  const actualStatusID = reblog?.id || statusID;\n  const url = instance\n    ? `/${instance}/s/${actualStatusID}`\n    : `/s/${actualStatusID}`;\n  const isFollowedTags =\n    showFollowedTags && !!snapStates.statusFollowedTags[sKey]?.length;\n\n  return (\n    <div\n      class={`${\n        quoted\n          ? ''\n          : isReblog\n            ? group\n              ? 'status-group'\n              : 'status-reblog'\n            : isFollowedTags\n              ? 'status-followed-tags'\n              : ''\n      } visibility-${visibility}`}\n      {...containerProps}\n      // title={statusPeekText}\n      onContextMenu={(e) => {\n        e.preventDefault();\n        setShowPeek(true);\n      }}\n      {...bindLongPressPeek()}\n    >\n      <article\n        data-state-post-id={ssKey}\n        class={`status filtered ${quoted ? 'status-card' : ''}`}\n        tabindex=\"-1\"\n      >\n        <b\n          class=\"status-filtered-badge clickable badge-meta\"\n          title={filterTitleStr}\n          onClick={(e) => {\n            e.preventDefault();\n            setShowPeek(true);\n          }}\n        >\n          <span>\n            <Trans>Filtered</Trans>\n          </span>\n          <span>{filterTitleStr}</span>\n        </b>{' '}\n        <Avatar url={avatarStatic || avatar} squircle={bot} />\n        <span class=\"status-filtered-info\">\n          <span class=\"status-filtered-info-1\">\n            {isReblog ? (\n              <Trans comment=\"[Name] [Visibility icon] boosted\">\n                <NameText account={status.account} instance={instance} />{' '}\n                <Icon\n                  icon={visibilityIconsMap[visibility]}\n                  alt={_(visibilityText[visibility])}\n                  size=\"s\"\n                />{' '}\n                boosted\n              </Trans>\n            ) : isFollowedTags ? (\n              <>\n                <NameText account={status.account} instance={instance} />{' '}\n                <Icon\n                  icon={visibilityIconsMap[visibility]}\n                  alt={_(visibilityText[visibility])}\n                  size=\"s\"\n                />{' '}\n                <span>\n                  {snapStates.statusFollowedTags[sKey]\n                    .slice(0, 3)\n                    .map((tag) => (\n                      <span key={tag} class=\"status-followed-tag-item\">\n                        #{tag}\n                      </span>\n                    ))}\n                </span>\n              </>\n            ) : (\n              <>\n                <NameText account={status.account} instance={instance} />{' '}\n                <Icon\n                  icon={visibilityIconsMap[visibility]}\n                  alt={_(visibilityText[visibility])}\n                  size=\"s\"\n                />{' '}\n                <RelativeTime datetime={createdAtDate} format=\"micro\" />\n              </>\n            )}\n          </span>\n          <span class=\"status-filtered-info-2\">\n            {isReblog && (\n              <>\n                <Avatar\n                  url={reblog.account.avatarStatic || reblog.account.avatar}\n                  squircle={bot}\n                />{' '}\n              </>\n            )}\n            {statusPeekText}\n          </span>\n        </span>\n      </article>\n      {!!showPeek && (\n        <Modal\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setShowPeek(false);\n            }\n          }}\n        >\n          <div id=\"filtered-status-peek\" class=\"sheet\">\n            <button\n              type=\"button\"\n              class=\"sheet-close\"\n              onClick={() => setShowPeek(false)}\n            >\n              <Icon icon=\"x\" alt={t`Close`} />\n            </button>\n            <header>\n              <b class=\"status-filtered-badge\">\n                <Trans>Filtered</Trans>\n              </b>{' '}\n              {filterTitleStr}\n            </header>\n            <main tabIndex=\"-1\">\n              <Link\n                ref={statusPeekRef}\n                class=\"status-link\"\n                to={url}\n                onClick={() => {\n                  setShowPeek(false);\n                }}\n                data-read-more={_(readMoreText)}\n              >\n                <Status status={status} instance={instance} size=\"s\" readOnly />\n              </Link>\n            </main>\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Status, (oldProps, newProps) => {\n  // Shallow equal all props except 'status'\n  // This will be pure static until status ID changes\n  const { status, ...restOldProps } = oldProps;\n  const { status: newStatus, ...restNewProps } = newProps;\n  return (\n    status?.id === newStatus?.id && shallowEqual(restOldProps, restNewProps)\n  );\n});\n","var IDX=36, HEX='';\nwhile (IDX--) HEX += IDX.toString(36);\n\nexport function uid(len) {\n\tvar str='', num = len || 11;\n\twhile (num--) str += HEX[Math.random() * 36 | 0];\n\treturn str;\n}\n","/**\n * Fuse.js v7.1.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2025 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When `true`, the algorithm will ignore diacritics (accents) in comparisons\n  ignoreDiacritics: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nconst stripDiacritics = String.prototype.normalize\n    ? ((str) => str.normalize('NFD').replace(/[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/g, ''))\n    : ((str) => str);\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, ignoreDiacritics, includeMatches } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      ignoreDiacritics,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive, ignoreDiacritics } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.1.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","import { useEffect, useState } from 'preact/hooks';\n\nexport const MIN_SCHEDULED_AT = 6 * 60 * 1000; // 6 mins\nconst MAX_SCHEDULED_AT = 90 * 24 * 60 * 60 * 1000; // 90 days\n\nexport default function ScheduledAtField({ scheduledAt, setScheduledAt }) {\n  if (!scheduledAt || !scheduledAt?.getTime) {\n    // Not using \"instanceof Date\" check due to \"cross-realm\" issues\n    console.warn('scheduledAt is invalid', scheduledAt);\n    return;\n  }\n  const [minStr, setMinStr] = useState();\n  const [maxStr, setMaxStr] = useState();\n  const timezoneOffset = scheduledAt.getTimezoneOffset();\n\n  useEffect(() => {\n    function updateMinStr() {\n      const min = new Date(Date.now() + MIN_SCHEDULED_AT);\n      const str = new Date(min.getTime() - timezoneOffset * 60000)\n        .toISOString()\n        .slice(0, 16);\n      setMinStr(str);\n    }\n    updateMinStr();\n\n    function updateMaxStr() {\n      const max = new Date(Date.now() + MAX_SCHEDULED_AT);\n      const str = new Date(max.getTime() - timezoneOffset * 60000)\n        .toISOString()\n        .slice(0, 16);\n      setMaxStr(str);\n    }\n    updateMaxStr();\n\n    // Update every 10s\n    const intervalId = setInterval(() => {\n      updateMinStr();\n      updateMaxStr();\n    }, 1000 * 10);\n    return () => clearInterval(intervalId);\n  }, []);\n\n  const defaultValue = scheduledAt\n    ? new Date(scheduledAt.getTime() - scheduledAt.getTimezoneOffset() * 60000)\n        .toISOString()\n        .slice(0, 16)\n    : null;\n\n  return (\n    <input\n      type=\"datetime-local\"\n      name=\"scheduledAt\"\n      defaultValue={defaultValue}\n      min={minStr}\n      max={maxStr}\n      required\n      onChange={(e) => {\n        setScheduledAt(new Date(e.target.value));\n      }}\n    />\n  );\n}\n\nexport function getLocalTimezoneName() {\n  const date = new Date();\n  const formatter = new Intl.DateTimeFormat(undefined, {\n    timeZoneName: 'long',\n  });\n  const parts = formatter.formatToParts(date);\n  const timezoneName = parts.find(\n    (part) => part.type === 'timeZoneName',\n  )?.value;\n  return timezoneName;\n}\n"],"file":"ScheduledAtField-D2XxRl4Z.js"}